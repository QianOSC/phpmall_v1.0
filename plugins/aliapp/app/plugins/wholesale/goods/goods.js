(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["plugins/wholesale/goods/goods"],{"45f7":function(t,e,n){"use strict";n.r(e);var o=n("9755"),r=n("e793");for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n("e7d0");var i=n("2877"),s=Object(i["a"])(r["default"],o["a"],o["b"],!1,null,"3091b2ea",null);e["default"]=s.exports},"8ecf":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("a34a")),r=n("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,o,r,a,i){try{var s=t[a](i),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(o,r)}function s(t){return function(){var e=this,n=arguments;return new Promise(function(o,r){var a=t.apply(e,n);function s(t){i(a,o,r,s,c,"next",t)}function c(t){i(a,o,r,s,c,"throw",t)}s(void 0)})}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(n,!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){return n.e("components/page-component/goods/app-goods-banner").then(n.bind(null,"12b6"))},h=function(){return n.e("components/page-component/app-attr/app-attr").then(n.bind(null,"d3c4"))},p=function(){return n.e("components/page-component/goods/app-goods-full-reduce").then(n.bind(null,"6132"))},f=function(){return n.e("components/page-component/goods/bd-info").then(n.bind(null,"0e01"))},b=function(){return Promise.all([n.e("common/vendor"),n.e("components/page-component/goods/bd-coupon")]).then(n.bind(null,"11b2"))},g=function(){return n.e("components/page-component/goods/bd-xbc").then(n.bind(null,"8639"))},m=function(){return n.e("components/page-component/goods/bd-kb").then(n.bind(null,"4c29"))},v=function(){return n.e("components/page-component/goods/bd-hc").then(n.bind(null,"de37"))},_=function(){return n.e("components/page-component/goods/bd-detail").then(n.bind(null,"3e70"))},y=function(){return n.e("components/page-component/goods/bd-comments").then(n.bind(null,"9470"))},w=function(){return n.e("components/basic-component/app-close/app-close").then(n.bind(null,"f0dd"))},O=function(){return n.e("components/page-component/goods/bd-service").then(n.bind(null,"861b"))},x={name:"goods",data:function(){return{showClose:!1,is_open:0,goods:{},selectAttr:null,previewUrl:this.$api.wholesale.order_preview,submitUrl:this.$api.wholesale.order_submit,show:0,list:[],appAttr:{},totalNumber:0,totalPrice:"0.00",poster_config:this.$api.wholesale.poster_config,poster_generate:this.$api.wholesale.poster_generate,url:this.$api.wholesale.poster,goods_id:-1,loading:!1,first:!0,is_vip:!1,is_vip_card_user:0,discount:null,full_reduce:null,flash_sale:null,wholesaleDiscount:0}},onLoad:function(t){var e=this,n=this;n.goods_id=t.id,n.$showLoading({type:"global",text:"加载中..."}),n.request({url:n.$api.wholesale.detail,data:{id:n.goods_id}}).then(function(t){n.first=!1,n.goods=t.detail,t.detail.goods_activity&&(e.full_reduce=t.detail.goods_activity.full_reduce),n.goods.vip_card_appoint.discount>0&&(n.is_vip=!0,n.discount=n.goods.vip_card_appoint.discount),n.is_vip_card_user=n.goods.vip_card_appoint.is_vip_card_user;var o=!0,r=!1,a=void 0;try{for(var i,s=n.goods.attr[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var c=i.value;c.number="0"}}catch(g){r=!0,a=g}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}if(1==n.goods.attr_groups.length)n.goods.attr[0].number="0";else{var l=!0,u=!1,d=void 0;try{for(var h,p=n.goods.attr_groups[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var f=h.value;for(var b in f.less_attr_group_name=f.attr_group_name.substring(0,10),f.scrollLeft=0,f.attr_list)f.attr_list[b].active=!(b>0),f.attr_list[b].number=0}}catch(g){u=!0,d=g}finally{try{l||null==p.return||p.return()}finally{if(u)throw d}}}n.flash_sale=n.goods.plugin_extra.flash_sale,n.loading=!0,n.$hideLoading()})},onShow:function(){var t=this;if(this.showClose=!1,setTimeout(function(){t.showClose=!0}),this.first)return!1;var e=JSON.parse(JSON.stringify(this.goods.attr)),n=JSON.parse(JSON.stringify(this.goods.attr_groups));this.$showLoading(),this.$nextTick(function(){var o=t;o.request({url:o.$api.wholesale.detail,data:{id:o.goods_id}}).then(function(r){o.goods=r.detail,o.goods.attr=e,o.goods.attr_groups=n,t.$hideLoading()})})},computed:l({},(0,r.mapState)("gConfig",{mall:function(t){return t.mallConfig.mall},iphone:function(t){return t.iphone},iphoneHeight:function(t){return t.iphoneHeight}}),{},(0,r.mapGetters)("mallConfig",{getTheme:"getTheme"}),{},(0,r.mapState)({mall:function(t){return t.mallConfig.mall},themeObject:function(t){var e=t.mallConfig.mall.setting.theme_color;return{back:e+"-m-back "+e,backP:e+"-m-back-p "+e,backO:e+"-m-back-o "+e,theme:e,color:e+"-m-text "+e,sBack:e+"-s-back "+e,border:e+"-m-border "+e,mBtn:e+"-m-gradient-btn "+e,sBtn:e+"-s-gradient-btn "+e}}}),{good_negotiable:function(){var t=this.mall.setting.good_negotiable;this.contact_tel="",this.contact="",this.contact_web="";for(var e=[],n=0;n<t.length;n++)"contact_tel"===t[n]&&(this.contact_tel="contact_tel"),"contact_web"===t[n]&&(this.contact_web="contact_web");return this.contact_tel&&e.push(this.contact_tel),this.contact&&e.push(this.contact),this.contact_web&&e.push(this.contact_web),console.log(e),e},contactBtn:function(){var t=this.good_negotiable.length,e=this.getTheme;return 3!==t||"a"!==e&&"b"!==e&&"f"!==e?3===t&&"a"!==e&&"b"!==e&&"f"!==e?"".concat(this.themeObject.mBtn," ").concat(e,"-s-text ").concat(e," bd-three-one bd-no-radius "):2!==t||"a"!==e&&"b"!==e&&"f"!==e||this.contact_tel?2!==t||"a"!==e&&"b"!==e&&"f"!==e||!this.contact_tel?2!==t||"a"===e||"b"===e||"f"===e||this.contact_tel?2===t&&"a"!==e&&"b"!==e&&"f"!==e&&this.contact_tel?"".concat(this.themeObject.mBtn," ").concat(e,"-s-text ").concat(e," bd-btn-half bd-content-radius-1"):"".concat(this.themeObject.mBtn," text ").concat(e," all-width all-radius "):"".concat(this.themeObject.sBtn," ").concat(e,"-s-text ").concat(e," bd-btn-half bd-content-radius-0"):"".concat(e,"-m-back text ").concat(e," bd-btn-half bd-content-radius-1"):"".concat(this.themeObject.sBtn," text ").concat(e," bd-btn-half bd-content-radius-0"):"".concat(this.themeObject.mBtn," text ").concat(e," bd-three-one bd-no-radius ")}}),onShareAppMessage:function(){return this.$shareAppMessage({path:"/plugins/wholesale/goods/goods",title:this.goods.app_share_title?this.goods.app_share_title:this.goods.name,imageUrl:this.goods.app_share_pic?this.goods.app_share_pic:"",params:{id:this.goods.id}})},methods:{getMall:function(t){this.is_open=t.is_open},setCoupon:function(t){this.$set(this.goods.goods_coupon_center[t],"is_receive",1)},clickAttr:function(){this.show=Math.random()},attr:function(t){this.appAttr=t},favorite:function(){var e=this.$api.user.favorite_add,n=!0;this.goods.favorite&&(e=this.$api.user.favorite_remove,n=!1),this.goods.favorite=n,this.$request({url:e,data:{goods_id:this.goods.id}}).then(function(e){0===e.code||t.showModal({title:"提示",content:e.msg,showCancel:!1})}).catch(function(t){})},back:function(){t.reLaunch({url:"/pages/index/index"})},request:function(){var e=s(o.default.mark(function e(n){var r,a,i;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=n.url,a=n.data,e.next=3,this.$request({url:r,data:a});case 3:if(i=e.sent,0!==i.code){e.next=8;break}return e.abrupt("return",i.data);case 8:t.showToast({title:i.msg,icon:"none",duration:1e3}),setTimeout(function(){t.navigateBack()},1e3);case 10:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),attrtap:function(t,e){var n=this,o=this;if(null!==t){o.goods=t;var r=!0,a=!1,i=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value,u=!0,d=!1,h=void 0;try{for(var p,f=o.goods.attr[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var b=p.value;l.id==b.id&&(b.number=l.number)}}catch(q){d=!0,h=q}finally{try{u||null==f.return||f.return()}finally{if(d)throw h}}}}catch(q){a=!0,i=q}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}o.totalNumber=0;var g=0,m=!0,v=!1,_=void 0;try{for(var y,w=o.goods.attr[Symbol.iterator]();!(m=(y=w.next()).done);m=!0){var O=y.value;if(o.totalNumber+=+O.number,O.number>0){var x=1===o.goods.level_show?O.price_member:O.price;g+=O.number*x}}}catch(q){v=!0,_=q}finally{try{m||null==w.return||w.return()}finally{if(v)throw _}}if(o.goods.attr_groups.length>1){var j=!0,$=!1,S=void 0;try{for(var k,P=o.goods.attr_groups[0].attr_list[Symbol.iterator]();!(j=(k=P.next()).done);j=!0){var C=k.value;C.number=0;var B=!0,D=!1,N=void 0;try{for(var T,L=o.goods.attr[Symbol.iterator]();!(B=(T=L.next()).done);B=!0){var M=T.value;M.number>0&&C.attr_id==M.attr_list[0].attr_id&&C.attr_name==M.attr_list[0].attr_name&&(C.number+=+M.number,C.length=-5-10*+C.number.toString().length)}}catch(q){D=!0,N=q}finally{try{B||null==L.return||L.return()}finally{if(D)throw N}}}}catch(q){$=!0,S=q}finally{try{j||null==P.return||P.return()}finally{if($)throw S}}}setTimeout(function(){var t=0,e=!0,r=!1,a=void 0;try{for(var i,s=o.goods.wholesaleGoods.wholesale_rules[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var c=i.value;o.totalNumber<c.num||(n.wholesaleDiscount=c.discount,t++)}}catch(q){r=!0,a=q}finally{try{e||null==s.return||s.return()}finally{if(r)throw a}}0==t&&(n.wholesaleDiscount=0==o.goods.wholesaleGoods.type?10:0),n.wholesaleDiscount>0&&(0==o.goods.wholesaleGoods.type?g*=n.wholesaleDiscount/10:g-=n.wholesaleDiscount*o.totalNumber),o.totalPrice=g.toFixed(2)},0)}}},components:{"app-banner":d,"app-attr":h,"app-goods-full-reduce":p,appClose:w,bdInfo:f,bdCoupon:b,bdXbc:g,bdKb:m,bdHc:v,bdDetail:_,bdComments:y,bdService:O}};e.default=x}).call(this,n("c11b")["default"])},9755:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=(t._self._c,encodeURIComponent(t.mall.setting.web_service_url));t.$mp.data=Object.assign({},{$root:{m0:n}})},r=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r})},a550:function(t,e,n){},ae58:function(t,e){t.exports=require("../siteinfo.js")},e793:function(t,e,n){"use strict";n.r(e);var o=n("8ecf"),r=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=r.a},e7d0:function(t,e,n){"use strict";var o=n("a550"),r=n.n(o);r.a}},[["456b","common/runtime","common/vendor"]]]);