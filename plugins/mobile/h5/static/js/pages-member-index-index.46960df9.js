(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-index-index"],{"03b8":function(t,e,a){"use strict";a.r(e);var i=a("4d13"),o=a("bc12");for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);a("8855");var r=a("2877"),s=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,"350acd90",null);e["default"]=s.exports},1336:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".text-center[data-v-350acd90]{text-align:center}.font-weight[data-v-350acd90]{font-weight:700}.page-width[data-v-350acd90]{width:100%}.goods-hover-class[data-v-350acd90]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-350acd90]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-350acd90]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-350acd90]{width:100%}.u-hover-class[data-v-350acd90]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-350acd90]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.placeholder[data-v-350acd90]{height:%?160?%;background-color:#fff}.member-level-name[data-v-350acd90]{max-width:%?200?%}.info-text[data-v-350acd90]{margin:0 %?20?%}.user[data-v-350acd90]{position:relative;height:%?690?%;width:100%;background-color:#fff;overflow:hidden}.user.recharge[data-v-350acd90]{height:%?550?%}.user.recharge.less[data-v-350acd90]{height:%?480?%}.user-info[data-v-350acd90]{position:absolute;left:0;right:0;top:%?40?%;width:100%;padding:0 %?45?%;z-index:5;color:#fff;padding-left:%?185?%}.user-info .user-member-info[data-v-350acd90]{margin-top:%?16?%;font-size:%?20?%}.user-info .avatar[data-v-350acd90]{height:%?100?%;width:%?100?%;border-radius:50%;border:%?2?% solid #fff;position:absolute;left:%?45?%}.member-detail[data-v-350acd90]{position:relative;height:%?36?%;line-height:%?36?%;border-radius:%?18?%;padding:0 %?16?% 0 %?54?%;background-color:#454955;display:inline-block;margin-bottom:%?15?%}.member-detail .level-icon[data-v-350acd90]{border-radius:50%;position:absolute;margin-bottom:%?-3?%}.member-detail uni-image[data-v-350acd90]{height:%?44?%;width:%?44?%;position:absolute;bottom:0;left:0}.card[data-v-350acd90]{height:%?690?%;width:100%;position:relative;background-color:#292a31;z-index:2}.card.less[data-v-350acd90]{height:%?650?%}.card.less.recharge[data-v-350acd90]{height:%?480?%}.card.recharge[data-v-350acd90]{height:%?530?%}.card-bottom[data-v-350acd90]{position:absolute;width:100%;height:%?80?%;bottom:0;left:0;z-index:5}.question[data-v-350acd90]{position:absolute;right:%?24?%;top:%?24?%;z-index:99}.question uni-image[data-v-350acd90]{height:%?36?%;width:%?36?%}.card-img[data-v-350acd90]{position:absolute;bottom:0;left:0;right:0;height:%?320?%;width:%?660?%;margin:0 auto;border-radius:%?16?%;z-index:3}.member-info[data-v-350acd90]{background-color:#fff;padding-top:%?40?%}.member-title uni-image[data-v-350acd90]{height:%?32?%;width:%?68?%}.user-balance[data-v-350acd90]{height:%?140?%;width:%?660?%;background-color:#454955;position:absolute;top:%?210?%;left:%?45?%;right:%?45?%;border-radius:%?16?%;z-index:999;padding:%?36?%;color:#fff}.user-balance.less[data-v-350acd90]{top:%?160?%}.user-text[data-v-350acd90]{vertical-align:top;font-size:%?18?%;display:inline-block}.user-price[data-v-350acd90]{font-size:%?46?%;font-family:DIN}.go-btn[data-v-350acd90]{background-color:#454955;height:%?56?%;line-height:%?52?%;width:%?140?%;border-radius:%?28?%;font-size:%?28?%;color:#fff;border:%?1?% solid #fff;padding:0;text-align:center;margin-top:%?1?%}.go-btn[data-v-350acd90]:after{border:0}.progress-line[data-v-350acd90]{height:%?10?%;border-radius:%?5?%;margin-bottom:%?5?%;background-color:#949598;position:relative}.progress-active[data-v-350acd90]{height:%?10?%;border-radius:%?5?%;background-color:#ffb82f;position:absolute;left:0;top:0}.card-info[data-v-350acd90]{position:absolute;bottom:%?-10?%;left:%?620?%;height:%?320?%;width:%?660?%;padding:%?78?% %?100?% 0;color:rgba(53,53,53,.7);font-size:%?24?%;text-align:center}.card-name[data-v-350acd90]{font-size:%?44?%;color:#fff}.rights[data-v-350acd90]{margin-top:%?40?%;text-align:center;color:#353535;font-size:%?26?%;white-space:nowrap;width:auto}.rights-item[data-v-350acd90]{display:inline-block;width:%?150?%;margin:0 %?40?% %?20?%}.rights-item .t-omit[data-v-350acd90]{display:block}.rights-img[data-v-350acd90]{height:%?80?%;width:%?80?%;margin-bottom:%?12?%}.update[data-v-350acd90]{background-color:#fff;padding-top:%?60?%;padding-bottom:%?40?%}.update-nav[data-v-350acd90]{height:%?64?%;padding:0 %?26?%;color:#999;font-size:%?28?%}.update-img[data-v-350acd90]{float:left;height:%?64?%;width:%?200?%}.more[data-v-350acd90]{height:%?64?%;line-height:%?64?%;float:right}.more uni-image[data-v-350acd90]{height:%?22?%;width:%?12?%;margin-left:%?12?%}.member-list[data-v-350acd90]{margin-top:%?32?%;height:%?505?%;white-space:nowrap;width:auto}.member-item[data-v-350acd90]{margin:%?20?%;width:%?342?%;height:%?465?%;display:inline-block;position:relative;text-align:center;font-size:%?24?%;color:#999;-webkit-box-shadow:%?0?% %?0?% %?20?% rgba(0,0,0,.1);box-shadow:%?0?% %?0?% %?20?% rgba(0,0,0,.1);border-radius:%?16?%}.memeber-other[data-v-350acd90]{padding-top:%?22?%;height:%?290?%;width:100%;border:%?1?% solid #e2e2e2;border-top:0;border-bottom-left-radius:%?16?%;border-bottom-right-radius:%?16?%}.memeber-img[data-v-350acd90]{width:100%;height:%?175?%;display:block;border-top-left-radius:%?16?%;border-top-right-radius:%?16?%}.member-name[data-v-350acd90]{color:#353535;font-size:%?32?%;width:90%}.member-price[data-v-350acd90]{margin-top:%?8?%;font-size:%?24?%;color:rgba(53,53,53,.7)}.member-price uni-text[data-v-350acd90]{font-size:%?42?%}.discount[data-v-350acd90]{padding-top:%?12?%;color:#ffb82f;font-size:%?24?%}.discount uni-text[data-v-350acd90]{font-size:%?40?%}.update-btn[data-v-350acd90]{height:%?62?%;width:60%;line-height:%?60?%;margin:%?24?% auto 0;font-size:%?28?%;color:#b4914f;border-radius:%?31?%;background-color:#fff;border:%?1?% solid #b4914f}.update-btn[data-v-350acd90]:after{border:0}.coupon[data-v-350acd90]{padding-bottom:%?40?%;background-color:#fff}.coupon-list[data-v-350acd90]{margin-top:%?32?%;padding-left:%?26?%;height:%?130?%;white-space:nowrap;overflow:hidden;width:auto}.coupon-item[data-v-350acd90]{height:%?130?%;width:%?260?%;position:relative;font-size:%?24?%;margin-right:%?15?%;display:inline-block}.coupon-bg[data-v-350acd90]{height:%?130?%;width:%?260?%}.coupon-price[data-v-350acd90]{position:absolute;top:%?15?%;left:0;right:0;color:#fff;text-align:center;width:75%}.coupon-price uni-text[data-v-350acd90]{font-size:%?40?%}.coupon-total[data-v-350acd90]{position:absolute;bottom:%?10?%;left:0;right:0;color:#fff;text-align:center;width:75%}.coupon-status[data-v-350acd90]{position:absolute;top:0;right:0;width:%?70?%;height:%?130?%;font-size:%?22?%;color:#fff;white-space:normal;line-height:125%;padding:%?10?% 0 0 %?30?%}.goods[data-v-350acd90]{margin-bottom:%?55?%}.goods-list[data-v-350acd90]{margin-top:%?32?%;height:%?440?%;white-space:nowrap}.goods-item[data-v-350acd90]{margin:%?20?% 0;height:%?400?%;width:%?220?%;display:inline-block;margin-left:%?20?%;padding:%?24?%;color:#999;font-size:%?24?%;text-align:center;border-radius:%?8?%;-webkit-box-shadow:0 0 %?20?% rgba(0,0,0,.1);box-shadow:0 0 %?20?% rgba(0,0,0,.1)}.goods-img[data-v-350acd90]{height:%?210?%;width:%?210?%;margin-bottom:%?10?%;display:block}.goods-name[data-v-350acd90]{color:#666;width:%?210?%}.goods-price[data-v-350acd90]{color:#b4914f;margin:%?5?%}.goods-price uni-text[data-v-350acd90]{font-size:%?42?%}.before[data-v-350acd90]{text-decoration:line-through}.level[data-v-350acd90]{margin:%?32?% auto %?40?%;width:%?700?%;height:%?206?%;border-radius:%?16?%;border:%?1?% solid #e2e2e2;position:relative;-webkit-box-shadow:0 0 %?20?% rgba(0,0,0,.1);box-shadow:0 0 %?20?% rgba(0,0,0,.1)}.level-img[data-v-350acd90]{height:100%;width:%?400?%;float:left;display:block;border-top-left-radius:%?16?%;border-bottom-left-radius:%?16?%}.level-name[data-v-350acd90]{font-size:%?32?%;color:#353535;width:100%;height:%?40?%}.level-right[data-v-350acd90]{position:absolute;right:0;top:0;width:%?300?%;height:%?206?%;color:#999;font-size:%?24?%;text-align:center;padding:%?20?% 0;border-top-right-radius:%?16?%;border-bottom-right-radius:%?16?%}.level-right .discount[data-v-350acd90]{margin-left:%?14?%;margin-top:%?-5?%}.level-btn[data-v-350acd90]{margin-top:%?14?%;height:%?48?%;line-height:%?46?%;padding:0 %?30?%;border-radius:%?24?%;border:%?1?% solid #b4914f;font-size:%?24?%;display:inline-block;color:#b4914f;background-color:#fff}.level-btn[data-v-350acd90]:after{border:0}.banner[data-v-350acd90]{width:100%;height:%?110?%;display:block;margin:%?40?% 0 %?20?%}.no-rights[data-v-350acd90]{height:%?200?%;width:%?700?%;margin:0 auto;border:%?1?% solid #b4914f;border-radius:%?16?%;text-align:center;color:#353535;font-size:%?26?%;padding-top:%?35?%}.rights.border[data-v-350acd90]{border:%?1?% solid #b4914f;margin:0 %?26?%;width:auto;min-height:%?200?%;border-radius:%?16?%}.border .rights-item[data-v-350acd90]{margin-top:%?34?%}.no-next[data-v-350acd90]{padding-top:%?140?%}body.?%PAGE?%[data-v-350acd90]{background:#f7f7f7}",""])},"4d13":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticStyle:{position:"absolute",width:"100%",height:"100%",top:"0",left:"0","background-color":"#fff",overflow:"auto"}},[a("app-layout",{attrs:{haveBackground:t.haveBackground}},[a("v-uni-view",{class:["user",t.recharge?"":"recharge",t.nextMember&&t.nextMember.money>0?"":"less"]},[""!=t.detail.rules&&t.level>0?a("v-uni-view",{staticClass:"question",on:{click:function(e){e=t.$handleEvent(e),t.toRules(e)}}},[a("v-uni-image",{attrs:{"load-lazy":"true",src:"./../image/question.png"}})],1):t._e(),a("v-uni-view",{staticClass:"user-info"},[a("v-uni-image",{staticClass:"avatar",attrs:{"load-lazy":"true",src:t.userInfo.options.avatar}}),a("v-uni-view",[t._v(t._s(t.userInfo.nickname))]),a("v-uni-view",{staticClass:"user-member-info"},[a("v-uni-view",{staticClass:"member-detail"},[a("v-uni-image",{staticClass:"level-icon",attrs:{"load-lazy":"true",src:t.member_pic_url}}),0==t.level?a("v-uni-text",[t._v(t._s(t.userInfo.identity.level_name))]):t._e(),t.level>0?a("v-uni-text",{staticClass:"t-omit member-level-name"},[t._v(t._s(t.detail.name))]):t._e()],1),t.nextMember&&t.nextMember.money>0?a("v-uni-view",{staticClass:"progress"},[a("v-uni-view",{staticClass:"progress-line"},[a("v-uni-view",{staticClass:"progress-active",style:[{width:t.prop+"%"}]})],1),t.nextList.length>0?a("v-uni-view",[t._v("消费￥"+t._s(null!==t.list?t.list.consumption_money:"0")+"/￥"+t._s(null!==t.detail?t.nextMember.money:"0"))]):t._e()],1):t._e()],1)],1),1==t.recharge?a("v-uni-view",{class:["user-balance","main-between","cross-center",t.nextMember&&t.nextMember.money>0?"":"less"]},[a("v-uni-view",{staticClass:"user-text"},[a("v-uni-view",[t._v("账户余额")]),a("v-uni-view",{staticClass:"user-price"},[t._v("￥"+t._s(t.balance))])],1),a("v-uni-view",{staticClass:"to-recharge",on:{click:function(e){e=t.$handleEvent(e),t.toRecharge(e)}}},[a("v-uni-button",{staticClass:"go-btn"},[t._v("去充值")])],1)],1):t._e(),a("v-uni-view",{class:["card",t.recharge?"":"recharge",t.nextMember&&t.nextMember.money>0?"":"less"]},[t.list?a("v-uni-image",{staticClass:"card-img",attrs:{"load-lazy":"true",src:t.list&&t.list.mall_member?t.detail.bg_pic_url:t.list.member_bg_pic_url}}):t._e(),a("v-uni-image",{staticClass:"card-bottom",attrs:{src:t.memberImg.card_bottom}})],1)],1),a("v-uni-view",{staticClass:"member-info"},[t.level>0&&t.detail.rights&&t.detail.rights.length>0?a("v-uni-view",{staticClass:"member-title main-center cross-center"},[a("v-uni-image",{attrs:{"load-lazy":"true",src:t.memberImg.member_left}}),a("v-uni-view",{staticClass:"info-text"},[t._v(t._s(t.detail.name)+"特权")]),a("v-uni-image",{attrs:{"load-lazy":"true",src:t.memberImg.member_right}})],1):a("v-uni-image",{staticClass:"banner",attrs:{"load-lazy":"true",src:t.memberImg.banner}}),t.detail.rights&&t.detail.rights.length>0?a("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.toDetail(e)}}},[a("v-uni-view",{class:["main-center flex-wrap","rights",0==t.level?"border":""]},t._l(t.detail.rights,function(e){return a("v-uni-view",{key:e.id,staticClass:"rights-item"},[a("v-uni-image",{staticClass:"rights-img",attrs:{"load-lazy":"true",src:e.pic_url}}),a("v-uni-view",{staticClass:"t-omit"},[t._v(t._s(e.title))])],1)}),1)],1):t._e()],1),t.nextList&&t.nextList.length>0?a("v-uni-view",{staticClass:"update"},[a("v-uni-view",{staticClass:"update-nav"},[a("v-uni-image",{staticClass:"update-img",attrs:{"load-lazy":"true",src:t.memberImg.up}}),a("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.toMore(e)}}},[a("v-uni-view",{staticClass:"more"},[a("v-uni-text",[t._v("更多")]),a("v-uni-image",{attrs:{"load-lazy":"true",src:"/static/image/icon/arrow-right.png"}})],1)],1)],1),t.nextList.length>1?a("v-uni-view",{staticClass:"member-list main-center"},t._l(t.nextList,function(e){return a("v-uni-view",{key:e.id,staticClass:"member-item"},[a("v-uni-image",{staticClass:"memeber-img",attrs:{"load-lazy":"true",src:e.bg_pic_url?e.bg_pic_url:e.pic_url}}),a("v-uni-view",{staticClass:"memeber-other"},[a("v-uni-view",{staticClass:"member-name t-omit"},[t._v(t._s(e.name))]),a("v-uni-view",{staticClass:"discount"},[a("v-uni-text",[t._v(t._s(e.discount))]),t._v("折")],1),a("v-uni-view",[t._v("会员折扣")]),a("v-uni-view",{on:{click:function(a){a=t.$handleEvent(a),t.toMore(e.level)}}},[a("v-uni-button",{staticClass:"update-btn"},[t._v("立即升级")])],1)],1)],1)}),1):a("v-uni-view",{staticClass:"level"},[a("v-uni-image",{staticClass:"level-img",attrs:{"load-lazy":"true",src:t.nextList[0].bg_pic_url?t.nextList[0].bg_pic_url:t.nextList[0].pic_url}}),a("v-uni-view",{staticClass:"level-right"},[a("v-uni-view",{staticClass:"level-name t-omit"},[t._v(t._s(t.nextList[0].name))]),t._v("会员折扣"),a("v-uni-text",{staticClass:"discount"},[a("v-uni-text",[t._v(t._s(t.nextList[0].discount))]),t._v("折")],1),a("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.toMore(t.nextList[0].level)}}},[a("v-uni-button",{staticClass:"level-btn"},[t._v("立即升级")])],1)],1)],1)],1):t._e(),t.coupon.length>0?a("v-uni-view",{staticClass:"coupon"},[a("v-uni-view",{staticClass:"update-nav"},[a("v-uni-image",{staticClass:"update-img",attrs:{"load-lazy":"true",src:t.memberImg.coupon}})],1),a("v-uni-scroll-view",{staticClass:"coupon-list",attrs:{"scroll-x":""}},t._l(t.coupon,function(e,i){return a("v-uni-view",{key:e.id,staticClass:"coupon-item",on:{click:function(a){a=t.$handleEvent(a),t.toCoupon(e.id)}}},["0"===e.user_count?a("v-uni-image",{staticClass:"coupon-bg",attrs:{"load-lazy":"true",src:t.memberImg.coupon_index}}):a("v-uni-image",{staticClass:"coupon-bg",attrs:{"load-lazy":"true",src:t.memberImg.coupon_received}}),2==e.type?a("v-uni-view",{staticClass:"coupon-price"},[t._v("￥"),a("v-uni-text",[t._v(t._s(e.sub_price))])],1):a("v-uni-view",{staticClass:"coupon-price"},[a("v-uni-text",[t._v(t._s(e.discount))]),t._v("折")],1),a("v-uni-view",{staticClass:"coupon-total"},[t._v("满"+t._s(e.min_price)+"可用")]),a("v-uni-view",{staticClass:"coupon-status",style:{"padding-top":"0"===e.user_count?"10rpx":"25rpx"},on:{click:function(a){a.stopPropagation(),a=t.$handleEvent(a),t.receive(e,i)}}},[t._v(t._s("0"===e.user_count?"立即领取":"已领取"))])],1)}),1)],1):t._e(),t.goods.length>0?a("v-uni-view",{staticClass:"goods"},[a("v-uni-view",{staticClass:"update-nav"},[a("v-uni-image",{staticClass:"update-img",attrs:{"load-lazy":"true",src:t.memberImg.goods}}),a("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.toGoods(e)}}},[a("v-uni-view",{staticClass:"more"},[a("v-uni-text",[t._v("更多")]),a("v-uni-image",{attrs:{"load-lazy":"true",src:"/static/image/icon/arrow-right.png"}})],1)],1)],1),a("v-uni-scroll-view",{staticClass:"goods-list",attrs:{"scroll-x":""}},t._l(t.goods,function(e){return a("v-uni-view",{key:e.id,staticClass:"goods-item",on:{click:function(a){a=t.$handleEvent(a),t.toGoods(e.id)}}},[a("v-uni-image",{staticClass:"goods-img",attrs:{"load-lazy":"true",src:e.cover_pic}}),a("v-uni-view",{staticClass:"goods-name t-omit"},[t._v(t._s(e.name))]),a("v-uni-view",{staticClass:"goods-price"},[t._v("￥"),a("v-uni-text",[t._v(t._s(e.price))])],1),a("v-uni-view",{staticClass:"before"},[t._v("原价"+t._s(e.original_price)+"元")])],1)}),1)],1):t._e(),t.tabbarbool?a("v-uni-view",{staticClass:"placeholder"}):t._e()],1)],1)},o=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return o})},8855:function(t,e,a){"use strict";var i=a("acec"),o=a.n(i);o.a},acec:function(t,e,a){var i=a("1336");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("740753b8",i,!0,{sourceMap:!1,shadowMode:!1})},bc12:function(t,e,a){"use strict";a.r(e);var i=a("c695"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=o.a},c695:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("2f62");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)}return a}function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(a,!0).forEach(function(e){r(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var s={data:function(){return{currentRoute:this.$platDiff.route(),tabbarbool:!1,detail:{rules:""},list:[],nextList:[],goods:[],first:!1,haveBackground:!1,coupon:[],balance:0,loading:!1,member_pic_url:null,nextMember:{money:0},recharge:!1,current:"wechat",prop:0,page_loading:!0,level:0}},name:"index",computed:n({},(0,i.mapState)({tabBarNavs:function(t){return t.mallConfig.navbar.navs},userInfo:function(t){return t.user.info},memberImg:function(t){return t.mallConfig.__wxapp_img.member},couponImg:function(t){return t.mallConfig.__wxapp_img.coupon}})),watch:{tabBarNavs:{handler:function(){this.b()},immediate:!0}},methods:{b:function(){return this.tabbarbool=!1},receive:function(t,e){var a=this;if(t.user_count>0||a.loading)return!1;a.loading=!0,uni.showLoading({mask:!0,title:"领取中..."}),a.$request({url:a.$api.member.receive,data:{coupon_id:t.id}}).then(function(t){a.loading=!1,uni.hideLoading(),0===t.code?(uni.showToast({title:t.msg,duration:1e3}),a.coupon[e].user_count=0===t.data.rest?1:0):uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(){uni.hideLoading(),a.$event.on(a.$const.EVENT_USER_LOGIN).then(function(){a.receive(t,e)})})},toCoupon:function(t){uni.navigateTo({url:"/pages/coupon/details/details-no-share?is_member=1&id="+t})},toGoods:function(t){t?uni.navigateTo({url:"/pages/goods/goods?id="+t}):uni.navigateTo({url:"/pages/member/goods/goods?discount="+this.detail.discount})},toDetail:function(){uni.navigateTo({url:"/pages/member/detail/detail?level="+this.level+"&prop="+this.prop})},toMore:function(t){t>0?uni.navigateTo({url:"/pages/member/upgrade/upgrade?level="+this.level+"&other="+t}):uni.navigateTo({url:"/pages/member/upgrade/upgrade?level="+this.level})},toRules:function(){uni.navigateTo({url:"/pages/rules/index?url=".concat(encodeURIComponent(this.$api.member.index),"&keys=").concat(JSON.stringify(["mall_member","rules"]))})},toRecharge:function(){uni.navigateTo({url:"/pages/balance/recharge"})},getList:function(){var t=this;t.$request({url:t.$api.member.index,method:"get"}).then(function(e){t.$hideLoading(),t.$store.dispatch("user/info"),0==e.code?(t.list=e.data,t.detail=t.list.mall_member,t.goods=t.list.member_goods,t.coupon=t.list.member_coupons,t.nextMember=t.list.next_consume_upgrade_member,t.member_pic_url=t.list.member_pic_url,t.nextList=t.list.next_mall_member,t.recharge&&(t.balance=t.list.user_info.balance),null!=t.detail&&(t.level=t.detail.level),t.nextMember&&(t.prop=t.list.consumption_money/t.nextMember.money*100,t.prop>100&&(t.prop=100)),null==t.detail&&t.nextList&&t.nextList.length>0&&(t.detail=t.nextList[0])):uni.showToast({title:e.msg,icon:"none",duration:1e3})}).catch(function(e){t.$hideLoading(),t.$event.on(t.$const.EVENT_USER_LOGIN).then(function(){t.getList()})})}},onLoad:function(){var t=this;t.$showLoading({type:"global",text:"加载中..."}),t.$request({url:t.$api.recharge.setting,method:"get"}).then(function(e){0==e.code?1==e.data.setting.status&&(t.recharge=!0):uni.showToast({title:e.msg,icon:"none",duration:1e3})}).catch(function(e){t.$hideLoading()})},onShow:function(){var t=this;t.getList()}};e.default=s}}]);