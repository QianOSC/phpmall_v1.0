(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-index-index"],{"03b8":function(e,t,i){"use strict";i.r(t);var a=i("51dc"),o=i("bc12");for(var n in o)"default"!==n&&function(e){i.d(t,e,function(){return o[e]})}(n);i("a999");var r=i("2877"),s=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,"dc8e8600",null);t["default"]=s.exports},"48c3d":function(e,t,i){var a=i("5ace");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("4f06").default;o("1c22358e",a,!0,{sourceMap:!1,shadowMode:!1})},"51dc":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticStyle:{position:"absolute",width:"100%",height:"100%",top:"0",left:"0","background-color":"#fff",overflow:"auto"}},[i("app-layout",{attrs:{haveBackground:e.haveBackground}},[i("v-uni-view",{class:["user",e.recharge?"":"recharge",e.nextMember&&e.nextMember.money>0?"":"less"]},[""!=e.detail.rules&&e.level>0?i("v-uni-view",{staticClass:"question",on:{click:function(t){t=e.$handleEvent(t),e.toRules(t)}}},[i("v-uni-image",{attrs:{"load-lazy":"true",src:"./../image/question.png"}})],1):e._e(),i("v-uni-view",{staticClass:"user-info"},[i("v-uni-image",{staticClass:"avatar",attrs:{"load-lazy":"true",src:e.userInfo.options.avatar}}),i("v-uni-view",[e._v(e._s(e.userInfo.nickname))]),i("v-uni-view",{staticClass:"user-member-info"},[i("v-uni-view",{staticClass:"member-detail"},[i("v-uni-image",{staticClass:"level-icon",attrs:{"load-lazy":"true",src:e.member_pic_url}}),0==e.level?i("v-uni-text",[e._v(e._s(e.userInfo.identity.level_name))]):e._e(),e.level>0?i("v-uni-text",{staticClass:"t-omit member-level-name"},[e._v(e._s(e.detail.name))]):e._e()],1),e.nextMember&&e.nextMember.money>0?i("v-uni-view",{staticClass:"progress"},[i("v-uni-view",{staticClass:"progress-line"},[i("v-uni-view",{staticClass:"progress-active",style:[{width:e.prop+"%"}]})],1),e.nextList.length>0?i("v-uni-view",[e._v("消费￥"+e._s(null!==e.list?e.list.consumption_money:"0")+"/￥"+e._s(null!==e.detail?e.nextMember.money:"0"))]):e._e()],1):e._e()],1)],1),1==e.recharge?i("v-uni-view",{class:["user-balance","main-between","cross-center",e.nextMember&&e.nextMember.money>0?"":"less"]},[i("v-uni-view",{staticClass:"user-text"},[i("v-uni-view",[e._v("账户余额")]),i("v-uni-view",{staticClass:"user-price"},[e._v("￥"+e._s(e.balance))])],1),i("v-uni-view",{staticClass:"to-recharge",on:{click:function(t){t=e.$handleEvent(t),e.toRecharge(t)}}},[i("v-uni-button",{staticClass:"go-btn"},[e._v("去充值")])],1)],1):e._e(),i("v-uni-view",{class:["card",e.recharge?"":"recharge",e.nextMember&&e.nextMember.money>0?"":"less"]},[e.list?i("v-uni-image",{staticClass:"card-img",attrs:{"load-lazy":"true",src:e.list&&e.list.mall_member?e.detail.bg_pic_url:e.list.member_bg_pic_url}}):e._e(),i("v-uni-image",{staticClass:"card-bottom",attrs:{src:e.memberImg.card_bottom}})],1)],1),i("v-uni-view",{staticClass:"member-info"},[e.level>0&&e.detail.rights&&e.detail.rights.length>0?i("v-uni-view",{staticClass:"member-title main-center cross-center"},[i("v-uni-image",{attrs:{"load-lazy":"true",src:e.memberImg.member_left}}),i("v-uni-view",{staticClass:"info-text"},[e._v(e._s(e.detail.name)+"特权")]),i("v-uni-image",{attrs:{"load-lazy":"true",src:e.memberImg.member_right}})],1):i("v-uni-image",{staticClass:"banner",attrs:{"load-lazy":"true",src:e.memberImg.banner}}),e.detail.rights&&e.detail.rights.length>0?i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.toDetail(t)}}},[i("v-uni-view",{class:["main-center flex-wrap","rights",0==e.level?"border":""]},e._l(e.detail.rights,function(t){return i("v-uni-view",{key:t.id,staticClass:"rights-item"},[i("v-uni-image",{staticClass:"rights-img",attrs:{"load-lazy":"true",src:t.pic_url}}),i("v-uni-view",{staticClass:"t-omit"},[e._v(e._s(t.title))])],1)}),1)],1):e._e()],1),e.nextList&&e.nextList.length>0?i("v-uni-view",{staticClass:"update"},[i("v-uni-view",{staticClass:"update-nav"},[i("v-uni-image",{staticClass:"update-img",attrs:{"load-lazy":"true",src:e.memberImg.up}}),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.toMore(t)}}},[i("v-uni-view",{staticClass:"more"},[i("v-uni-text",[e._v("更多")]),i("v-uni-image",{attrs:{"load-lazy":"true",src:"/static/image/icon/arrow-right.png"}})],1)],1)],1),e.nextList.length>1?i("v-uni-view",{staticClass:"member-list main-center"},e._l(e.nextList,function(t){return i("v-uni-view",{key:t.id,staticClass:"member-item"},[i("v-uni-image",{staticClass:"memeber-img",attrs:{"load-lazy":"true",src:t.bg_pic_url?t.bg_pic_url:t.pic_url}}),i("v-uni-view",{staticClass:"memeber-other"},[i("v-uni-view",{staticClass:"member-name t-omit"},[e._v(e._s(t.name))]),i("v-uni-view",{staticClass:"discount"},[i("v-uni-text",[e._v(e._s(t.discount))]),e._v("折")],1),i("v-uni-view",[e._v("会员折扣")]),i("v-uni-view",{on:{click:function(i){i=e.$handleEvent(i),e.toMore(t.level)}}},[i("v-uni-button",{staticClass:"update-btn"},[e._v("立即升级")])],1)],1)],1)}),1):i("v-uni-view",{staticClass:"level"},[i("v-uni-image",{staticClass:"level-img",attrs:{"load-lazy":"true",src:e.nextList[0].bg_pic_url?e.nextList[0].bg_pic_url:e.nextList[0].pic_url}}),i("v-uni-view",{staticClass:"level-right"},[i("v-uni-view",{staticClass:"level-name t-omit"},[e._v(e._s(e.nextList[0].name))]),e._v("会员折扣"),i("v-uni-text",{staticClass:"discount"},[i("v-uni-text",[e._v(e._s(e.nextList[0].discount))]),e._v("折")],1),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.toMore(e.nextList[0].level)}}},[i("v-uni-button",{staticClass:"level-btn"},[e._v("立即升级")])],1)],1)],1)],1):e._e(),e.coupon.length>0?i("v-uni-view",{staticClass:"coupon"},[i("v-uni-view",{staticClass:"update-nav"},[i("v-uni-image",{staticClass:"update-img",attrs:{"load-lazy":"true",src:e.memberImg.coupon}})],1),i("v-uni-scroll-view",{staticClass:"coupon-list",attrs:{"scroll-x":""}},e._l(e.coupon,function(t,a){return i("v-uni-view",{key:t.id,staticClass:"coupon-item",on:{click:function(i){i=e.$handleEvent(i),e.toCoupon(t.id)}}},["0"===t.user_count?i("v-uni-image",{staticClass:"coupon-bg",attrs:{"load-lazy":"true",src:e.memberImg.coupon_index}}):i("v-uni-image",{staticClass:"coupon-bg",attrs:{"load-lazy":"true",src:e.memberImg.coupon_received}}),2==t.type?i("v-uni-view",{staticClass:"coupon-price"},[e._v("￥"),i("v-uni-text",[e._v(e._s(t.sub_price))])],1):i("v-uni-view",{staticClass:"coupon-price"},[i("v-uni-text",[e._v(e._s(t.discount))]),e._v("折")],1),i("v-uni-view",{staticClass:"coupon-total"},[e._v("满"+e._s(t.min_price)+"可用")]),i("v-uni-view",{staticClass:"coupon-status",style:{"padding-top":"0"===t.user_count?"10rpx":"25rpx"},on:{click:function(i){i.stopPropagation(),i=e.$handleEvent(i),e.receive(t,a)}}},[e._v(e._s("0"===t.user_count?"立即领取":"已领取"))])],1)}),1)],1):e._e(),e.goods.length>0?i("v-uni-view",{staticClass:"goods"},[i("v-uni-view",{staticClass:"update-nav"},[i("v-uni-image",{staticClass:"update-img",attrs:{"load-lazy":"true",src:e.memberImg.goods}}),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.toGoods(t)}}},[i("v-uni-view",{staticClass:"more"},[i("v-uni-text",[e._v("更多")]),i("v-uni-image",{attrs:{"load-lazy":"true",src:"/static/image/icon/arrow-right.png"}})],1)],1)],1),i("v-uni-scroll-view",{staticClass:"goods-list",attrs:{"scroll-x":""}},e._l(e.goods,function(t){return i("v-uni-view",{key:t.id,staticClass:"goods-item",on:{click:function(i){i=e.$handleEvent(i),e.toGoods(t.id)}}},[i("v-uni-image",{staticClass:"goods-img",attrs:{"load-lazy":"true",src:t.cover_pic}}),i("v-uni-view",{staticClass:"goods-name t-omit"},[e._v(e._s(t.name))]),i("v-uni-view",{staticClass:"goods-price"},[e._v("￥"),i("v-uni-text",[e._v(e._s(t.price))])],1),i("v-uni-view",{staticClass:"before"},[e._v("原价"+e._s(t.original_price)+"元")])],1)}),1)],1):e._e(),e.tabbarbool?i("v-uni-view",{staticClass:"placeholder"}):e._e()],1)],1)},o=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return o})},"5ace":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".text-center[data-v-dc8e8600]{text-align:center}.font-weight[data-v-dc8e8600]{font-weight:700}.page-width[data-v-dc8e8600]{width:100%}.goods-hover-class[data-v-dc8e8600]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-dc8e8600]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-dc8e8600]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-dc8e8600]{width:100%}.u-hover-class[data-v-dc8e8600]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-dc8e8600]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.placeholder[data-v-dc8e8600]{height:%?160?%;background-color:#fff}.member-level-name[data-v-dc8e8600]{max-width:%?200?%}.info-text[data-v-dc8e8600]{margin:0 %?20?%}.user[data-v-dc8e8600]{position:relative;height:%?690?%;width:100%;background-color:#fff;overflow:hidden}.user.recharge[data-v-dc8e8600]{height:%?550?%}.user.recharge.less[data-v-dc8e8600]{height:%?480?%}.user-info[data-v-dc8e8600]{position:absolute;left:0;right:0;top:%?40?%;width:100%;padding:0 %?45?%;z-index:5;color:#fff;padding-left:%?185?%}.user-info .user-member-info[data-v-dc8e8600]{margin-top:%?16?%;font-size:%?20?%}.user-info .avatar[data-v-dc8e8600]{height:%?100?%;width:%?100?%;border-radius:50%;border:%?2?% solid #fff;position:absolute;left:%?45?%}.member-detail[data-v-dc8e8600]{position:relative;height:%?36?%;line-height:%?36?%;border-radius:%?18?%;padding:0 %?16?% 0 %?54?%;background-color:#454955;display:inline-block;margin-bottom:%?15?%}.member-detail .level-icon[data-v-dc8e8600]{border-radius:50%;position:absolute;margin-bottom:%?-3?%}.member-detail uni-image[data-v-dc8e8600]{height:%?44?%;width:%?44?%;position:absolute;bottom:0;left:0}.card[data-v-dc8e8600]{height:%?690?%;width:100%;position:relative;background-color:#292a31;z-index:2}.card.less[data-v-dc8e8600]{height:%?650?%}.card.less.recharge[data-v-dc8e8600]{height:%?480?%}.card.recharge[data-v-dc8e8600]{height:%?530?%}.card-bottom[data-v-dc8e8600]{position:absolute;width:100%;height:%?80?%;bottom:0;left:0;z-index:5}.question[data-v-dc8e8600]{position:absolute;right:%?24?%;top:%?24?%;z-index:99}.question uni-image[data-v-dc8e8600]{height:%?36?%;width:%?36?%}.card-img[data-v-dc8e8600]{position:absolute;bottom:0;left:0;right:0;height:%?320?%;width:%?660?%;margin:0 auto;border-radius:%?16?%;z-index:3}.member-info[data-v-dc8e8600]{background-color:#fff;padding-top:%?40?%}.member-title uni-image[data-v-dc8e8600]{height:%?32?%;width:%?68?%}.user-balance[data-v-dc8e8600]{height:%?140?%;width:%?660?%;background-color:#454955;position:absolute;top:%?210?%;left:%?45?%;right:%?45?%;border-radius:%?16?%;z-index:999;padding:%?36?%;color:#fff}.user-balance.less[data-v-dc8e8600]{top:%?160?%}.user-text[data-v-dc8e8600]{vertical-align:top;font-size:%?18?%;display:inline-block}.user-price[data-v-dc8e8600]{font-size:%?46?%;font-family:DIN}.go-btn[data-v-dc8e8600]{background-color:#454955;height:%?56?%;line-height:%?52?%;width:%?140?%;border-radius:%?28?%;font-size:%?28?%;color:#fff;border:%?1?% solid #fff;padding:0;text-align:center;margin-top:%?1?%}.go-btn[data-v-dc8e8600]:after{border:0}.progress-line[data-v-dc8e8600]{height:%?10?%;border-radius:%?5?%;margin-bottom:%?5?%;background-color:#949598;position:relative}.progress-active[data-v-dc8e8600]{height:%?10?%;border-radius:%?5?%;background-color:#ffb82f;position:absolute;left:0;top:0}.card-info[data-v-dc8e8600]{position:absolute;bottom:%?-10?%;left:%?620?%;height:%?320?%;width:%?660?%;padding:%?78?% %?100?% 0;color:rgba(53,53,53,.7);font-size:%?24?%;text-align:center}.card-name[data-v-dc8e8600]{font-size:%?44?%;color:#fff}.rights[data-v-dc8e8600]{margin-top:%?40?%;text-align:center;color:#353535;font-size:%?26?%;white-space:nowrap;width:auto}.rights-item[data-v-dc8e8600]{display:inline-block;width:%?150?%;margin:0 %?40?% %?20?%}.rights-item .t-omit[data-v-dc8e8600]{display:block}.rights-img[data-v-dc8e8600]{height:%?80?%;width:%?80?%;margin-bottom:%?12?%}.update[data-v-dc8e8600]{background-color:#fff;padding-top:%?60?%;padding-bottom:%?40?%}.update-nav[data-v-dc8e8600]{height:%?64?%;padding:0 %?26?%;color:#999;font-size:%?28?%}.update-img[data-v-dc8e8600]{float:left;height:%?64?%;width:%?200?%}.more[data-v-dc8e8600]{height:%?64?%;line-height:%?64?%;float:right}.more uni-image[data-v-dc8e8600]{height:%?22?%;width:%?12?%;margin-left:%?12?%}.member-list[data-v-dc8e8600]{margin-top:%?32?%;height:%?505?%;white-space:nowrap;width:auto}.member-item[data-v-dc8e8600]{margin:%?20?%;width:%?342?%;height:%?465?%;display:inline-block;position:relative;text-align:center;font-size:%?24?%;color:#999;-webkit-box-shadow:%?0?% %?0?% %?20?% rgba(0,0,0,.1);box-shadow:%?0?% %?0?% %?20?% rgba(0,0,0,.1);border-radius:%?16?%}.memeber-other[data-v-dc8e8600]{padding-top:%?22?%;height:%?290?%;width:100%;border:%?1?% solid #e2e2e2;border-top:0;border-bottom-left-radius:%?16?%;border-bottom-right-radius:%?16?%}.memeber-img[data-v-dc8e8600]{width:100%;height:%?175?%;display:block;border-top-left-radius:%?16?%;border-top-right-radius:%?16?%}.member-name[data-v-dc8e8600]{color:#353535;font-size:%?32?%;width:90%}.member-price[data-v-dc8e8600]{margin-top:%?8?%;font-size:%?24?%;color:rgba(53,53,53,.7)}.member-price uni-text[data-v-dc8e8600]{font-size:%?42?%}.discount[data-v-dc8e8600]{padding-top:%?12?%;color:#ffb82f;font-size:%?24?%}.discount uni-text[data-v-dc8e8600]{font-size:%?40?%}.update-btn[data-v-dc8e8600]{height:%?62?%;width:60%;line-height:%?60?%;margin:%?24?% auto 0;font-size:%?28?%;color:#b4914f;border-radius:%?31?%;background-color:#fff;border:%?1?% solid #b4914f}.update-btn[data-v-dc8e8600]:after{border:0}.coupon[data-v-dc8e8600]{padding-bottom:%?40?%;background-color:#fff}.coupon-list[data-v-dc8e8600]{margin-top:%?32?%;padding-left:%?26?%;height:%?130?%;white-space:nowrap;overflow:hidden;width:auto}.coupon-item[data-v-dc8e8600]{height:%?130?%;width:%?260?%;position:relative;font-size:%?24?%;margin-right:%?15?%;display:inline-block}.coupon-bg[data-v-dc8e8600]{height:%?130?%;width:%?260?%}.coupon-price[data-v-dc8e8600]{position:absolute;top:%?15?%;left:0;right:0;color:#fff;text-align:center;width:75%}.coupon-price uni-text[data-v-dc8e8600]{font-size:%?40?%}.coupon-total[data-v-dc8e8600]{position:absolute;bottom:%?10?%;left:0;right:0;color:#fff;text-align:center;width:75%}.coupon-status[data-v-dc8e8600]{position:absolute;top:0;right:0;width:%?70?%;height:%?130?%;font-size:%?22?%;color:#fff;white-space:normal;line-height:125%;padding:%?10?% 0 0 %?30?%}.goods[data-v-dc8e8600]{margin-bottom:%?55?%}.goods-list[data-v-dc8e8600]{margin-top:%?32?%;height:%?440?%;white-space:nowrap}.goods-item[data-v-dc8e8600]{margin:%?20?% 0;height:%?400?%;width:%?220?%;display:inline-block;margin-left:%?20?%;padding:%?24?%;color:#999;font-size:%?24?%;text-align:center;border-radius:%?8?%;-webkit-box-shadow:0 0 %?20?% rgba(0,0,0,.1);box-shadow:0 0 %?20?% rgba(0,0,0,.1)}.goods-img[data-v-dc8e8600]{height:%?210?%;width:%?210?%;margin-bottom:%?10?%;display:block}.goods-name[data-v-dc8e8600]{color:#666;width:%?210?%}.goods-price[data-v-dc8e8600]{color:#b4914f;margin:%?5?%}.goods-price uni-text[data-v-dc8e8600]{font-size:%?42?%}.before[data-v-dc8e8600]{text-decoration:line-through}.level[data-v-dc8e8600]{margin:%?32?% auto %?40?%;width:%?700?%;height:%?206?%;border-radius:%?16?%;border:%?1?% solid #e2e2e2;position:relative;-webkit-box-shadow:0 0 %?20?% rgba(0,0,0,.1);box-shadow:0 0 %?20?% rgba(0,0,0,.1)}.level-img[data-v-dc8e8600]{height:100%;width:%?400?%;float:left;display:block;border-top-left-radius:%?16?%;border-bottom-left-radius:%?16?%}.level-name[data-v-dc8e8600]{font-size:%?32?%;color:#353535;width:100%;height:%?40?%}.level-right[data-v-dc8e8600]{position:absolute;right:0;top:0;width:%?300?%;height:%?206?%;color:#999;font-size:%?24?%;text-align:center;padding:%?20?% 0;border-top-right-radius:%?16?%;border-bottom-right-radius:%?16?%}.level-right .discount[data-v-dc8e8600]{margin-left:%?14?%;margin-top:%?-5?%}.level-btn[data-v-dc8e8600]{margin-top:%?14?%;height:%?48?%;line-height:%?46?%;padding:0 %?30?%;border-radius:%?24?%;border:%?1?% solid #b4914f;font-size:%?24?%;display:inline-block;color:#b4914f;background-color:#fff}.level-btn[data-v-dc8e8600]:after{border:0}.banner[data-v-dc8e8600]{width:100%;height:%?110?%;display:block;margin:%?40?% 0 %?20?%}.no-rights[data-v-dc8e8600]{height:%?200?%;width:%?700?%;margin:0 auto;border:%?1?% solid #b4914f;border-radius:%?16?%;text-align:center;color:#353535;font-size:%?26?%;padding-top:%?35?%}.rights.border[data-v-dc8e8600]{border:%?1?% solid #b4914f;margin:0 %?26?%;width:auto;min-height:%?200?%;border-radius:%?16?%}.border .rights-item[data-v-dc8e8600]{margin-top:%?34?%}.no-next[data-v-dc8e8600]{padding-top:%?140?%}body.?%PAGE?%[data-v-dc8e8600]{background:#f7f7f7}",""])},a999:function(e,t,i){"use strict";var a=i("48c3d"),o=i.n(a);o.a},bc12:function(e,t,i){"use strict";i.r(t);var a=i("c695"),o=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);t["default"]=o.a},c695:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i("2f62");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(i,!0).forEach(function(t){r(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s={data:function(){return{currentRoute:this.$platDiff.route(),tabbarbool:!1,detail:{rules:""},list:[],nextList:[],goods:[],first:!1,haveBackground:!1,coupon:[],balance:0,loading:!1,member_pic_url:null,nextMember:{money:0},recharge:!1,current:"wechat",prop:0,page_loading:!0,level:0}},name:"index",computed:n({},(0,a.mapState)({tabBarNavs:function(e){return e.mallConfig.navbar.navs},userInfo:function(e){return e.user.info},memberImg:function(e){return e.mallConfig.__wxapp_img.member},couponImg:function(e){return e.mallConfig.__wxapp_img.coupon}})),watch:{tabBarNavs:{handler:function(){this.b()},immediate:!0}},methods:{b:function(){return this.tabbarbool=!1},receive:function(e,t){var i=this;if(e.user_count>0||i.loading)return!1;i.loading=!0,uni.showLoading({mask:!0,title:"领取中..."}),i.$request({url:i.$api.member.receive,data:{coupon_id:e.id}}).then(function(e){i.loading=!1,uni.hideLoading(),0===e.code?(uni.showToast({title:e.msg,duration:1e3}),i.coupon[t].user_count=0===e.data.rest?1:0):uni.showToast({title:e.msg,icon:"none",duration:1e3})}).catch(function(){uni.hideLoading(),i.$event.on(i.$const.EVENT_USER_LOGIN).then(function(){i.receive(e,t)})})},toCoupon:function(e){uni.navigateTo({url:"/pages/coupon/details/details-no-share?is_member=1&id="+e})},toGoods:function(e){e?uni.navigateTo({url:"/pages/goods/goods?id="+e}):uni.navigateTo({url:"/pages/member/goods/goods?discount="+this.detail.discount})},toDetail:function(){uni.navigateTo({url:"/pages/member/detail/detail?level="+this.level+"&prop="+this.prop})},toMore:function(e){e>0?uni.navigateTo({url:"/pages/member/upgrade/upgrade?level="+this.level+"&other="+e}):uni.navigateTo({url:"/pages/member/upgrade/upgrade?level="+this.level})},toRules:function(){uni.navigateTo({url:"/pages/rules/index?url=".concat(encodeURIComponent(this.$api.member.index),"&keys=").concat(JSON.stringify(["mall_member","rules"]))})},toRecharge:function(){uni.navigateTo({url:"/pages/balance/recharge"})},getList:function(){var e=this;e.$request({url:e.$api.member.index,method:"get"}).then(function(t){e.$hideLoading(),e.$store.dispatch("user/info"),0==t.code?(e.list=t.data,e.detail=e.list.mall_member,e.goods=e.list.member_goods,e.coupon=e.list.member_coupons,e.nextMember=e.list.next_consume_upgrade_member,e.member_pic_url=e.list.member_pic_url,e.nextList=e.list.next_mall_member,e.recharge&&(e.balance=e.list.user_info.balance),null!=e.detail&&(e.level=e.detail.level),e.nextMember&&(e.prop=e.list.consumption_money/e.nextMember.money*100,e.prop>100&&(e.prop=100)),null==e.detail&&e.nextList&&e.nextList.length>0&&(e.detail=e.nextList[0])):uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(t){e.$hideLoading(),e.$event.on(e.$const.EVENT_USER_LOGIN).then(function(){e.getList()})})}},onLoad:function(){var e=this;e.$showLoading({type:"global",text:"加载中..."}),e.$request({url:e.$api.recharge.setting,method:"get"}).then(function(t){0==t.code?1==t.data.setting.status&&(e.recharge=!0):uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(t){e.$hideLoading()})},onShow:function(){var e=this;e.getList()}};t.default=s}}]);