(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-submit-order-submit"],{"0818":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("2f62");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(i,!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r={name:"app-submit-goods",props:{list:{type:Object},plugin:{type:String},index:{type:Number},theme:String},data:function(){return{}},computed:s({},(0,a.mapState)({appImg:function(t){return t.mallConfig.__wxapp_img}}),{themeTextClass:function(){return this.theme&&this.theme.indexOf("gift")>0?"".concat(this.theme," ").concat(this.theme,"-color"):"".concat(this.theme," ").concat(this.theme,"-m-text")}}),methods:{priceFormat:function(t){return isNaN(t)?t:parseFloat(t).toFixed(2)}}};e.default=r},"0c80":function(t,e,i){var a=i("a3cf");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("336a0fd8",a,!0,{sourceMap:!1,shadowMode:!1})},"1b05":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("2f62");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(i,!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r={name:"app-submit-checkbox",props:{value:{default:!0},activeValue:{default:!0},inactiveValue:{default:!1},width:{default:40},height:{default:40},sign:{default:null},borderColor:{default:"#cccccc"},round:{default:!1},theme:{default:null}},data:function(){return{iValue:this.value,iTheme:this.theme}},computed:s({},(0,a.mapGetters)("mallConfig",{defaultTheme:"getTheme"}),{cTheme:function(){return this.iTheme?this.iTheme:this.defaultTheme},themeBgClass:function(){return this.cTheme.indexOf("gift")>=0?"".concat(this.cTheme," ").concat(this.cTheme,"-background"):"".concat(this.cTheme," ").concat(this.cTheme,"-m-back")},themeBorderClass:function(){return this.cTheme.indexOf("gift")>=0?"".concat(this.cTheme," ").concat(this.cTheme,"-background"):"".concat(this.cTheme," ").concat(this.cTheme,"-m-back")}}),watch:{value:function(t){this.iValue=t},theme:function(t){this.iTheme=t}},methods:{handleClick:function(){this.iValue=this.iValue===this.activeValue?this.inactiveValue:this.activeValue,this.$emit("input",{v:this.iValue,index:this.sign}),this.$emit("change",this.iValue,this.sign)}}};e.default=r},"1c54":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("2f62"),o=u(i("7d93")),s=u(i("92a5")),n=u(i("3a57")),r=u(i("94219")),c=u(i("e047")),l=u(i("4e22")),d=u(i("f0dd"));function u(t){return t&&t.__esModule?t:{default:t}}function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(i,!0).forEach(function(e){f(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var h={name:"order-submit",components:{AppSubmitCheckbox:l.default,AppAddressBar:c.default,AppBottomModal:r.default,AppCouponPick:n.default,AppDiyForm:o.default,appSubmitGoods:s.default,AppClose:d.default},data:function(){return{totalTitle:"合计",check:!1,previewData:{mch_list:[],total_price:0,vip_card_discount_total_price:null,custom_currency_all:[]},getLocationFail:!1,previewUrl:null,submitUrl:null,plugin:null,orderPageUrl:null,submitLock:!1,getPayDataTimer:null,userTheme:null,payDataUrl:null,showPayResult:!0,payCancelUrl:null,loadingPreviewData:!0,showClose:!1,is_open:!1,mchList:"",p_pay_id:""}},computed:p({},(0,a.mapState)({appImg:function(t){return t.mallConfig.__wxapp_img}}),{theme:function(){return this.userTheme?this.userTheme:this.getTheme}},(0,a.mapGetters)("mallConfig",{getTheme:"getTheme"}),{themeBgClass:function(){return this.theme.indexOf("gift")>=0?"".concat(this.theme," ").concat(this.theme,"-background"):"".concat(this.theme," ").concat(this.theme,"-m-back")},themeTextClass:function(){return this.theme.indexOf("gift")>=0?"".concat(this.theme," ").concat(this.theme,"-color"):"".concat(this.theme," ").concat(this.theme,"-m-text")}}),onLoad:function(t){var e=this,i=JSON.parse(t.mch_list),a=[],o=!0,s=!1,n=void 0;try{for(var r,c=i[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var l=r.value;l.mch_id>0&&a.push(l.mch_id)}}catch(v){s=!0,n=v}finally{try{o||null==c.return||c.return()}finally{if(s)throw n}}if(this.mchList=JSON.stringify(a),!this.submitLock){this.setFormData(t),this.$event.on(this.$const.EVENT_USER_LOGIN).then(function(){e.loadPreviewData()});var d=window.location.hash;if(d.indexOf("pay_id_weChart")>0&&d.indexOf("isWechat=true")>0){var u=this;uni.showModal({content:"确定已完成支付？",confirmText:"确定",cancelText:"返回支付",success:function(t){t.confirm?u.weChartPay(d.indexOf("pay_id_weChart")):t.cancel&&uni.redirectTo({url:"/pages/order/index/index"})},fail:function(){}})}}},onShow:function(){var t=this;this.showClose=!1,setTimeout(function(){t.showClose=!0})},onUnload:function(){this.getPayDataTimer&&clearTimeout(this.getPayDataTimer)},watch:{"previewData.address.name":{handler:function(){this.changeZitiAddress()}},"previewData.address.mobile":{handler:function(){this.changeZitiAddress()}}},methods:{getMall:function(t){if(this.is_open=1==t.is_open,this.is_open){if(this.submitLock)return;this.loadPreviewData()}},noCouponStatus:function(t){var e=this.$store.getters["orderSubmit/getMchNoCouponStatusList"];return!!e[t]},navigateVipCardPrivilege:function(){uni.navigateTo({url:"/plugins/vip_card/rights/rights?id=1"})},showCouponPicker:function(t){this.previewData.mch_list[t].showCouponPicker=!0},reversalShowInsertRows:function(t){this.previewData.mch_list[t].showInsertRows=!this.previewData.mch_list[t].showInsertRows},updateList:function(t,e){this.previewData.mch_list[e]=t,this.$forceUpdate()},setParams:function(t){t.total_title&&(this.totalTitle=t.total_title)},handleOrderFormInput:function(t){var e=t.data,i=t.sign,a=[];for(var o in e)a[o]={key:e[o].key,label:e[o].name,value:e[o].value,required:e[o].is_required};var s=this.$store.state.orderSubmit.formData;s.list[i].order_form=a,this.$store.commit("orderSubmit/mutSetFormData",s)},handleOrderFormValidate:function(t){var e=t.result,i=t.sign,a=this.$store.state.orderSubmit.formData;a.list[i].order_form_validate_result=e,this.$store.commit("orderSubmit/mutSetFormData",a)},setFormData:function(t){this.previewUrl=decodeURIComponent(t.preview_url||this.$api.order.preview),this.submitUrl=decodeURIComponent(t.submit_url||this.$api.order.submit),this.plugin=t.plugin||null,this.orderPageUrl=decodeURIComponent(t.order_page_url||"/pages/order/index/index?status=0"),this.userTheme=t.theme||null,this.payDataUrl=decodeURIComponent(t.pay_data_url||this.$api.order.pay_data),this.payCancelUrl=t.pay_cancel_url?decodeURIComponent(t.pay_cancel_url):null,this.showPayResult=t.show_pay_result||!0,"true"===this.showPayResult&&(this.showPayResult=!0),"false"===this.showPayResult&&(this.showPayResult=!1);var e=JSON.parse(t.mch_list);for(var i in e)if(0===parseInt(e[i].mch_id)){var a=e[i];e.splice(i,1),e.unshift(a);break}for(var o in e){for(var s in e[o].distance=0,e[o].remark="",e[o].order_form=[],e[o].use_integral=0,e[o].user_coupon_id=0,e[o].goods_list)e[o].goods_list[s].cart_id=e[o].goods_list[s].cart_id||0;if("booking"===this.plugin){var n=this.bookStorage("get");e[o]["store_id"]=n||""}}this.$store.commit("orderSubmit/mutSetFormData",{list:e,address_id:0})},bookStorage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="_book_storage_order_preview";if("get"===t)return uni.getStorageSync(i);"save"===t&&uni.setStorageSync(i,e||0)},loadPreviewData:function(){var t=this;this.loadingPreviewData=!0,uni.showLoading({mask:!0,title:"加载中"}),this.$request({url:this.previewUrl,method:"post",data:{form_data:JSON.stringify(this.$store.state.orderSubmit.formData)}}).then(function(e){if(t.loadingPreviewData=!1,uni.hideLoading(),0===e.code){for(var i in e.data.allZiti&&!e.data.address&&(e.data.address={name:"",mobile:""}),e.data.mch_list)e.data.mch_list[i].showCouponPicker=!1,e.data.mch_list[i].noCoupons=!1,e.data.mch_list[i].showInsertRows=!1;t.previewData=e.data,t.setDiyFormScrollStatus(),t.checkCouponError(),t.updateStoreDistance(),t.updateGoodsCount()}else uni.showModal({title:"提示",content:e.msg,showCancel:!1,success:function(){uni.navigateBack()}})}).catch(function(){t.loadingPreviewData=!1,uni.hideLoading()})},navigateStore:function(t){if(0==this.previewData.mch_list[t].mch.id){var e="";"booking"===this.plugin&&(e=this.previewData.mch_list[0].goods_list[0].id);var i=this.plugin||"";uni.navigateTo({url:"/pages/order-submit/store-pick?mchIndex=".concat(t,"&plugin=").concat(i,"&firstGoodsId=").concat(e)})}},navigateCoupon:function(t){uni.navigateTo({url:"/pages/order-submit/coupon-pick?mchIndex=".concat(t)})},navigateSvip:function(t){uni.navigateTo({url:"/pages/order-submit/vip-card?mchIndex=".concat(t)})},changeZitiAddress:function(){var t=this.$store.state.orderSubmit.formData;t.address={name:this.previewData.address?this.previewData.address.name:"",mobile:this.previewData.address?this.previewData.address.mobile:""},this.$store.commit("orderSubmit/mutSetFormData",t)},changeSendType:function(t,e){if(this.previewData.mch_list[t].delivery.send_type!=e){var i=this.$store.state.orderSubmit.formData;i.list[t].send_type=e,this.$store.commit("orderSubmit/mutSetFormData",i),this.previewData.mch_list[t].delivery.send_type=e,this.loadPreviewData()}},updateStoreDistance:function(){var t=this;this.previewData&&(this.previewData.has_ziti||"booking"==this.plugin)&&(this.$jwx.isWechat()?this.$jwx.getLocation({success:function(e){for(var i in t.previewData.mch_list)if(t.previewData.mch_list[i].store&&(!t.previewData.mch_list[i].store.distance||"-m"==t.previewData.mch_list[i].store.distance)&&""!=t.previewData.mch_list[i].store.latitude&&""!=t.previewData.mch_list[i].store.longitude&&!isNaN(t.previewData.mch_list[i].store.latitude)&&!isNaN(t.previewData.mch_list[i].store.longitude)){var a=t.$utils.earthDistance({lat:e.latitude,lng:e.longitude},{lat:t.previewData.mch_list[i].store.latitude,lng:t.previewData.mch_list[i].store.longitude}),o="-m";o=a>1e3?(a/1e3).toFixed(2)+"km":a.toFixed(0)+"m",t.previewData.mch_list[i].store.distance=o}},fail:function(){t.getLocationFail=!0}}):uni.getLocation({success:function(e){for(var i in t.previewData.mch_list)if(t.previewData.mch_list[i].store&&(!t.previewData.mch_list[i].store.distance||"-m"==t.previewData.mch_list[i].store.distance)&&""!=t.previewData.mch_list[i].store.latitude&&""!=t.previewData.mch_list[i].store.longitude&&!isNaN(t.previewData.mch_list[i].store.latitude)&&!isNaN(t.previewData.mch_list[i].store.longitude)){var a=t.$utils.earthDistance({lat:e.latitude,lng:e.longitude},{lat:t.previewData.mch_list[i].store.latitude,lng:t.previewData.mch_list[i].store.longitude}),o="-m";o=a>1e3?(a/1e3).toFixed(2)+"km":a.toFixed(0)+"m",t.previewData.mch_list[i].store.distance=o}},fail:function(){t.getLocationFail=!0}}))},openLocationSetting:function(){this.getLocationFail=!1,uni.openSetting({})},showIntegralTip:function(){uni.showModal({title:"积分抵扣说明",content:this.$store.state.mallConfig.mall.setting.member_integral_rule,showCancel:!1})},changeIntegral:function(t){var e=this.$store.state.orderSubmit.formData,i=!this.previewData.mch_list[t].integral.use;e.list[t].use_integral=i?1:0,this.previewData.mch_list[t].integral.use=i,this.loadPreviewData()},inputRemark:function(t){var e=this.$store.state.orderSubmit.formData;e.list[t].remark=this.previewData.mch_list[t].remark,this.$store.commit("orderSubmit/mutSetFormData",e)},submit:function(){var t=this;uni.showLoading({mask:!0,title:"提交中"}),this.$request({url:this.submitUrl,method:"post",data:{form_data:JSON.stringify(this.$store.state.orderSubmit.formData)}}).then(function(e){0===e.code?t.getPayOrderId(e.data.queue_id,e.data.token):(t.submitLock=!1,uni.hideLoading(),uni.showModal({title:"",content:e.msg,showCancel:!1}))}).catch(function(e){t.submitLock=!1,uni.hideLoading(),uni.showModal({title:"提示",content:e.errMsg,showCancel:!1})})},getPayOrderId:function(t,e){var i=this;this.$request({url:this.payDataUrl,method:"post",data:{queue_id:t,token:e}}).then(function(a){0===a.code?a.data.retry&&1===a.data.retry?i.getPayDataTimer=setTimeout(function(){i.getPayOrderId(t,e)},1e3):(uni.hideLoading(),i.pay(a.data)):(i.submitLock=!1,uni.hideLoading(),uni.showModal({title:"提示",content:a.msg,showCancel:!1}))}).catch(function(t){i.submitLock=!1,uni.hideLoading(),uni.showModal({title:"提示",content:t.errMsg,showCancel:!1})})},pay:function(t){var e=this;this.p_pay_id=t.id,this.$payment.pay(t.id).then(function(i){if(e.showPayResult)uni.redirectTo({url:"/pages/order-submit/pay-result?payment_order_union_id=".concat(t.id,"&order_page_url=").concat(encodeURIComponent(e.orderPageUrl))});else{var a=e.orderPageUrl;-1===a.indexOf("?")?a+="?":a+="&",delete t.id,a+="pay_data=".concat(JSON.stringify(t)),uni.redirectTo({url:a})}}).catch(function(i){if(e.payCancelUrl){var a=e.payCancelUrl;-1===a.indexOf("?")?a+="?":a+="&",a+="pay_data=".concat(JSON.stringify(t)),uni.redirectTo({url:a})}else"5b03b6e009796c698d132908cb635fca"===i.errMsg?e.submitLock=!1:uni.showModal({title:"提交失败",content:i.errMsg,showCancel:!1,success:function(){uni.redirectTo({url:e.orderPageUrl})}})})},jump:function(){uni.navigateTo({url:"/pages/order-submit/map"})},checkCouponError:function(){for(var t in this.previewData.mch_list)if(this.previewData.mch_list[t].coupon&&this.previewData.mch_list[t].coupon.coupon_error)return void uni.showModal({title:"",content:this.previewData.mch_list[t].coupon.coupon_error,showCancel:!1})},setDiyFormScrollStatus:function(){for(var t in this.previewData.mch_list){var e=this.previewData.mch_list[t].order_form;e&&(e.value&&e.value.length&&e.value.length>=5?e.show_scroll=!0:e.show_scroll=!1)}},subscribe:function(){var t=this;if(this.p_pay_id)return this.pay({id:this.p_pay_id}),!0;for(var e in this.p_pay_id="",this.$store.state.orderSubmit.formData.list){var i=this.$store.state.orderSubmit.formData.list[e];if(i.order_form_validate_result&&i.order_form_validate_result.hasError)return void uni.showModal({title:"提示",content:i.order_form_validate_result.errors[0].msg,showCancel:!1})}for(var a in this.$store.state.orderSubmit.formData.list){for(var o in this.$store.state.orderSubmit.formData.list[a].goods_list){var s=this.$store.state.orderSubmit.formData.list[a].goods_list[o];if(s.goods_form_validate_result&&s.goods_form_validate_result.hasError)return void uni.showModal({title:"提示",content:s.goods_form_validate_result.errors[0].msg,showCancel:!1})}"booking"===this.plugin&&this.$store.state.orderSubmit.formData.list[a]&&this.bookStorage("save",this.$store.state.orderSubmit.formData.list[a].store_id)}this.submitLock||(this.submitLock=!0,this.$subscribe(this.previewData.template_message_list).then(function(e){t.submit()}).catch(function(){t.submit()}))},handleGoodsFormInput:function(t){var e=t.data,i=t.sign,a=i.split(","),o=parseInt(a[0]),s=parseInt(a[1]),n=[];for(var r in e)n[r]={key:e[r].key,label:e[r].name,value:e[r].value,required:e[r].is_required};var c=this.$store.state.orderSubmit.formData;c.list[o].goods_list[s].form_data=n,this.$store.commit("orderSubmit/mutSetFormData",c)},handleGoodsFormValidate:function(t){var e=t.result,i=t.sign;if(i){var a=i.split(","),o=parseInt(a[0]),s=parseInt(a[1]),n=this.$store.state.orderSubmit.formData;n.list[o].goods_list[s].goods_form_validate_result=e,this.$store.commit("orderSubmit/mutSetFormData",n)}},updateGoodsCount:function(){for(var t in this.previewData.mch_list){var e=0;for(var i in this.previewData.mch_list[t].goods_list)e+=parseInt(this.previewData.mch_list[t].goods_list[i].num);this.previewData.mch_list[t].goods_count=e}},handleAddressInput:function(t){"undefined"!==typeof t.name&&(this.previewData.address.name=t.name),"undefined"!==typeof t.mobile&&(this.previewData.address.mobile=t.mobile)},weChartPay:function(t){var e=this;this.$request({url:this.$api.registered.pay,method:"get",data:{payment_order_union_id:t}}).then(function(i){0===i.code&&(1===i.data.status?uni.redirectTo({url:"/pages/order-submit/pay-result?payment_order_union_id=".concat(t,"&order_page_url=").concat(encodeURIComponent(e.orderPageUrl))}):e.orderPageUrl?uni.redirectTo({url:e.orderPageUrl}):uni.redirectTo({url:"/pages/order/index/index"}))})}}};e.default=h},2361:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.modal?i("u-mask",{attrs:{show:2==t.mallStatus.is_open,zIndex:"3000",maskClickAble:!1,zoom:!1}},[i("v-uni-view",{staticClass:"main-center cross-center",staticStyle:{height:"100%",width:"100%"}},[i("v-uni-view",{staticClass:"open-dialog"},[i("v-uni-view",{staticClass:"open-dialog-title"},[t._v("商家已打烊")]),i("v-uni-view",{staticClass:"open-dialog-content"},[t.list.length>0&&"商城"!=t.list?i("v-uni-view",[t._v(t._s(t.list)+"已经打烊")]):t._e(),t.list?t._e():i("v-uni-view",[t._v("您访问的商家已经打烊")]),t.mallStatus.auto_open_text.length>0?i("v-uni-view",[t._v(t._s(t.mallStatus.auto_open_text))]):t._e()],1),i("v-uni-view",{staticClass:"dialog-button",class:t.getTheme+"-m-text "+t.getTheme,on:{click:function(e){e=t.$handleEvent(e),t.toIndex(e)}}},[t._v("继续浏览")])],1)],1)],1):i("v-uni-view",[2==t.mallStatus.is_open?i("v-uni-view",{staticClass:"dir-left-nowrap cross-center close-tip"},[i("v-uni-image",{attrs:{src:"/static/image/icon/be-close.png"}}),i("v-uni-view",{staticClass:"dir-top-nowrap main-center"},[i("v-uni-view",[t._v("商家已打烊")]),t.mallStatus.auto_open_text.length>0?i("v-uni-view",{staticClass:"close-content"},[t._v(t._s(t.mallStatus.auto_open_text))]):t._e()],1)],1):t._e()],1)],1)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},"2e07":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("2f62"),o=s(i("6244"));function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(i,!0).forEach(function(e){c(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l={name:"app-close",components:{uMask:o.default},props:{modal:{type:Boolean,default:function(){return!0}},toBack:{type:Boolean,default:function(){return!1}},mch_id:{type:[Number,String],default:function(){return 0}},mch_list:{type:String,default:function(){return""}}},data:function(){return{mallStatus:{is_open:0,auto_open_text:""},isMall:!0,list:""}},created:function(){var t=this,e={},i="";this.mch_list&&(i=JSON.parse(this.mch_list),i.length>0&&(e.mch_id_list=i,-1==i.indexOf(0)&&(this.isMall=!1))),this.mch_id>0&&(e.mch_id_list=JSON.stringify([this.mch_id]),this.isMall=!1),this.$request({url:this.$api.index.status,data:e}).then(function(e){e.data;if(t.isMall||e.data.shift(),t.mallStatus=e.data[0],t.mch_id>0){var a=!0,o=!1,s=void 0;try{for(var n,r=e.data[Symbol.iterator]();!(a=(n=r.next()).done);a=!0){var c=n.value;c.mch_id==t.mch_id&&(t.mallStatus=c)}}catch(h){o=!0,s=h}finally{try{a||null==r.return||r.return()}finally{if(o)throw s}}}if(i.length>0){t.list="";var l=!0,d=!1,u=void 0;try{for(var v,p=e.data[Symbol.iterator]();!(l=(v=p.next()).done);l=!0){var f=v.value;2==f.is_open&&(t.mallStatus.auto_open_text||(t.mallStatus.auto_open_text=f.auto_open_text),t.mallStatus.is_open=f.is_open,t.list.length>0&&(t.list+="、"),t.list+=f.name)}}catch(h){d=!0,u=h}finally{try{l||null==p.return||p.return()}finally{if(d)throw u}}t.$emit("update",t.mallStatus)}else t.$emit("update",t.mallStatus)})},computed:r({},(0,a.mapGetters)("mallConfig",{getTheme:"getTheme"}),{},(0,a.mapState)({mall:function(t){return t.mallConfig.mall},userInfo:function(t){return t.user.info}})),methods:{toIndex:function(){this.toBack?uni.navigateBack():uni.redirectTo({url:"/pages/index/index"})}}};e.default=l},"32af":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'.text-center[data-v-4f192bc0]{text-align:center}.font-weight[data-v-4f192bc0]{font-weight:700}.page-width[data-v-4f192bc0]{width:100%}.goods-hover-class[data-v-4f192bc0]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-4f192bc0]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-4f192bc0]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-4f192bc0]{width:100%}.u-hover-class[data-v-4f192bc0]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-4f192bc0]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.page[data-v-4f192bc0]{padding-bottom:%?110?%;font-size:%?28?%;line-height:1;color:#353535}.u-submit-bar-height[data-v-4f192bc0]{height:%?82?%}.group[data-v-4f192bc0]{margin:%?20?% %?26?%;background:#fff;border-radius:%?16?%;overflow:hidden;-webkit-box-shadow:0 0 %?5?% rgba(0,0,0,.025);box-shadow:0 0 %?5?% rgba(0,0,0,.025)}.row[data-v-4f192bc0]{padding:%?12?% %?32?%}.row.no-px[data-v-4f192bc0]{padding-left:0;padding-right:0}.line[data-v-4f192bc0]{height:0;width:100%;background:#e2e2e2;border-bottom:%?1?% solid #e2e2e2}.font-bold[data-v-4f192bc0]{font-weight:700}.font-small[data-v-4f192bc0]{font-size:%?24?%}.font-gray[data-v-4f192bc0]{color:#999}.title-icon[data-v-4f192bc0]{width:%?28?%;height:%?25?%;display:block}.mr-12[data-v-4f192bc0]{margin-right:%?12?%}.ellipsis-1[data-v-4f192bc0]{white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden}.ellipsis-2[data-v-4f192bc0]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden}.send-type[data-v-4f192bc0]{display:inline-block;padding:0 0;height:%?56?%;line-height:%?56?%;width:%?190?%;text-align:center;border-radius:%?100?%;margin:0 %?32?% 0 0;font-size:%?28?%}.send-type[data-v-4f192bc0]:last-child{margin-right:0}.delivery-coverage-btn[data-v-4f192bc0]{display:inline-block;padding:0 %?20?%;height:%?56?%;line-height:%?56?%;text-align:center;border-radius:%?100?%;font-size:%?24?%;border:%?1?% solid #e5e5e5;color:#666}.more-discount-info[data-v-4f192bc0]{background:#f7f7f7;padding:%?6?% %?14?%;position:relative;border-radius:%?8?%}.more-discount-info[data-v-4f192bc0]:before{display:block;content:" ";width:0;height:0;position:absolute;right:%?30?%;top:%?-39?%;border:%?20?% solid rgba(0,0,0,0);border-bottom-color:#f7f7f7}.insert-rows[data-v-4f192bc0]{height:0;overflow:hidden;-webkit-transition:.2s;-o-transition:.2s;transition:.2s;padding:0 0;visibility:hidden}.insert-rows uni-view[data-v-4f192bc0]{font-size:%?24?%}.show .insert-rows[data-v-4f192bc0]{height:auto;padding:%?24?% 0;visibility:visible}.bottom-icon.show[data-v-4f192bc0],.show .bottom-icon[data-v-4f192bc0]{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);-webkit-transition:.2s;-o-transition:.2s;transition:.2s}.svip[data-v-4f192bc0]{height:%?120?%;background-size:100% 100%;background-color:#3c352e;padding-left:%?110?%;border-radius:%?12?%}.svip uni-view[data-v-4f192bc0]{color:#e4cdbb}.svip .vip-card-name[data-v-4f192bc0]{max-width:%?90?%;overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;font-size:%?24?%;color:#f3be94}.goods-form .goods-list[data-v-4f192bc0]{padding-top:%?12?%;padding-bottom:%?12?%}.goods-form .goods-item[data-v-4f192bc0]{margin:%?12?% 0}.goods-form .goods-image[data-v-4f192bc0]{width:%?200?%;height:%?200?%;margin-right:%?24?%}.goods-form .goods-name[data-v-4f192bc0]{line-height:%?35?%;height:%?70?%;margin-bottom:%?32?%}.submit-bar .price-info[data-v-4f192bc0]{padding:0 0}.submit-bar .price-info>uni-view[data-v-4f192bc0]{margin:%?16?% 0}.submit-bar .submit-btn[data-v-4f192bc0]{width:%?240?%;text-align:center;border-radius:%?41?%}.submit-bar .submit-btn[data-v-4f192bc0]:active{-webkit-box-shadow:inset 0 0 %?500?% rgba(0,0,0,.15);box-shadow:inset 0 0 %?500?% rgba(0,0,0,.15)}.submit-bar .submit-btn.lock[data-v-4f192bc0]{-webkit-box-shadow:inset 0 0 %?500?% hsla(0,0%,100%,.35);box-shadow:inset 0 0 %?500?% hsla(0,0%,100%,.35)}.submit-bar .submit-btn.disabled[data-v-4f192bc0]{background:#999}.theme-color[data-v-4f192bc0]{color:#fff}.u-bottom-fixed[data-v-4f192bc0]{position:fixed;bottom:0;left:0;width:100%;z-index:1500;background-color:#fff;-webkit-box-shadow:0 %?-1?% %?20?% %?-15?% #353535;box-shadow:0 %?-1?% %?20?% %?-15?% #353535}.bd-bottom[data-v-4f192bc0]{width:%?750?%;height:%?110?%;padding:%?14?% %?24?%}body.?%PAGE?%[data-v-4f192bc0]{background:#f7f7f7}',""])},"35ab":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"app-address-bar"},[t.allZiti?i("v-uni-view",{staticClass:"group"},[i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"box-grow-1"},[i("app-input",{attrs:{placeholder:"请填写联系人",height:"100","padding-left":"36"},on:{input:function(e){e=t.$handleEvent(e),t.handleAddressInput(e)}},model:{value:t.address.name,callback:function(e){t.$set(t.address,"name",e)},expression:"address.name"}})],1),i("v-uni-view",{staticClass:"box-grow-1",staticStyle:{"padding-right":"36rpx"}},[i("app-input",{attrs:{placeholder:"请填写手机号",height:"100"},on:{input:function(e){e=t.$handleEvent(e),t.handleAddressInput(e)}},model:{value:t.address.mobile,callback:function(e){t.$set(t.address,"mobile",e)},expression:"address.mobile"}})],1)],1)],1):i("v-uni-view",{staticClass:"group dir-left-nowrap cross-center",staticStyle:{padding:"25rpx 32rpx"},on:{click:function(e){e=t.$handleEvent(e),t.navigateAddress(e)}}},[i("v-uni-view",{staticClass:"box-grow-1"},[t.address?[i("v-uni-view",{staticClass:"dir-left-nowrap",staticStyle:{padding:"11rpx 0"}},[i("v-uni-view",{staticClass:"box-grow-1"},[t._v("收货人："+t._s(t.address.name))]),i("v-uni-view",{staticClass:"box-grow-0"},[t._v(t._s(t.address.mobile))])],1),i("v-uni-view",{staticStyle:{padding:"9rpx 0","line-height":"1.25","text-align":"justify"}},[t._v("收货地址："),t.hasCity?[t._v(t._s(t.address.location))]:[t._v(t._s(t.address.province)+"\n                        "+t._s(t.address.city)+"\n                        "+t._s(t.address.district))],t._v(t._s(t.address.detail))],2)]:i("v-uni-view",{staticStyle:{padding:"11rpx 0"}},[(t.hasCity,[t._v("请选择收货地址")])],2),t.hasZiti?i("v-uni-view",{class:[""+t.theme,t.theme+"-m-text"],staticStyle:{padding:"11rpx 0"}},[t._v("(收货地址中的手机号码将用于自提信息)")]):t._e(),t.address&&t.hasCity?i("v-uni-view",{staticStyle:{padding:"11rpx 0"}},[t._v("该地址在配送范围内")]):t._e()],2),i("v-uni-view",{staticClass:"box-grow-0",staticStyle:{"padding-left":"24rpx"}},[i("v-uni-image",{staticStyle:{width:"12rpx",height:"22rpx"},attrs:{src:"/static/image/icon/right.png"}})],1)],1)],1)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},"39fe":function(t,e,i){"use strict";i.r(e);var a=i("7fea"),o=i("c0e3");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("444c");var n=i("2877"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"4f192bc0",null);e["default"]=r.exports},"3a57":function(t,e,i){"use strict";i.r(e);var a=i("cb28"),o=i("8942");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("de73");var n=i("2877"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"838eb44a",null);e["default"]=r.exports},"444c":function(t,e,i){"use strict";var a=i("ca99"),o=i.n(a);o.a},4819:function(t,e,i){var a=i("84e8");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("1bcfc32c",a,!0,{sourceMap:!1,shadowMode:!1})},"48f4":function(t,e,i){"use strict";var a=i("c360"),o=i.n(a);o.a},"4e22":function(t,e,i){"use strict";i.r(e);var a=i("51b4"),o=i("ae80");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("5b98");var n=i("2877"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"4def2e1e",null);e["default"]=r.exports},"519e":function(t,e,i){var a=i("9106");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("fe7dd8e0",a,!0,{sourceMap:!1,shadowMode:!1})},"51b4":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"app-submit-checkbox",class:[{round:t.round},t.iValue===t.activeValue?"active":"inactive",t.iValue===t.activeValue?t.themeBgClass:""],style:{width:t.width+"rpx",height:t.height+"rpx",borderColor:t.borderColor},on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.handleClick(e)}}})},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},"5a20":function(t,e,i){"use strict";i.r(e);var a=i("2e07"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},"5b98":function(t,e,i){"use strict";var a=i("bb32"),o=i.n(a);o.a},"5c1a":function(t,e,i){"use strict";i.r(e);var a=i("d240"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},"6f76":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".text-center[data-v-1c640c31]{text-align:center}.font-weight[data-v-1c640c31]{font-weight:700}.page-width[data-v-1c640c31]{width:100%}.goods-hover-class[data-v-1c640c31]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-1c640c31]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-1c640c31]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-1c640c31]{width:100%}.u-hover-class[data-v-1c640c31]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-1c640c31]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-submit-goods .composition .composition-item[data-v-1c640c31]{margin-top:%?24?%}.app-submit-goods .composition .composition-item .composition-open[data-v-1c640c31]{text-align:center;background-color:#fff;height:%?84?%}.app-submit-goods .composition .composition-item .composition-open .composition-btn[data-v-1c640c31]{display:inline-block;border:%?2?% solid #bbb;font-size:%?24?%;color:#999;padding:0 %?24?%;margin:%?12?% 0 %?16?%;height:%?56?%;line-height:%?54?%;border-radius:%?28?%}.app-submit-goods .composition .composition-item .composition-open .composition-btn uni-image[data-v-1c640c31]{width:%?22?%;height:%?12?%;margin-left:%?16?%}.app-submit-goods .composition .composition-item .composition-info[data-v-1c640c31]{background-color:#fff;font-size:%?28?%;text-align:right;padding:%?24?%}.app-submit-goods .composition .composition-item .composition-info .composition-discount[data-v-1c640c31]{font-size:%?24?%}.app-submit-goods .goods-item[data-v-1c640c31]{background:#fff;padding:%?28?% %?32?%;border-bottom:%?1?% solid #e2e2e2;font-size:%?28?%}.app-submit-goods .goods-item .address-disabled[data-v-1c640c31]{background:#ffecec;color:#ff4544;position:absolute;bottom:0;left:0;right:%?22?%;padding:%?12?% 0;text-align:center;font-size:%?20?%}.app-submit-goods .goods-item .goods-image[data-v-1c640c31]{width:%?156?%;height:%?156?%;display:block;margin-right:%?24?%;font-size:%?24?%}.app-submit-goods .goods-item .goods-name[data-v-1c640c31]{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;line-height:1.25}.app-submit-goods .goods-item .attr-list[data-v-1c640c31]{margin-bottom:%?12?%}.app-submit-goods .goods-item .attr-list[data-v-1c640c31],.app-submit-goods .goods-item .goods-num[data-v-1c640c31]{font-size:%?24?%;color:#999}.app-submit-goods .goods-item .goods-other[data-v-1c640c31]{margin-top:%?16?%}.app-submit-goods .goods-item .attr-item[data-v-1c640c31]{margin-right:%?24?%}.app-submit-goods .goods-item .attr-item[data-v-1c640c31]:last-child{margin-right:0}.app-submit-goods .goods-item .goods-price-info[data-v-1c640c31]{text-align:right}.app-submit-goods .goods-item[data-v-1c640c31]:last-child{border-bottom:none}body.?%PAGE?%[data-v-1c640c31]{background:#f7f7f7}",""])},"7fea":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[i("v-uni-view",{staticClass:"safe-area-inset-bottom"},[t.previewData?i("v-uni-view",{staticClass:"page"},[!t.previewData.hasCity&&!1!==t.previewData.show_address&&t.previewData.hasRecipient?i("v-uni-view",{staticClass:"group"},[i("app-address-bar",{attrs:{address:t.previewData.address,"has-ziti":t.previewData.has_ziti,"all-ziti":t.previewData.allZiti},on:{"address-input":function(e){e=t.$handleEvent(e),t.handleAddressInput(e)}}})],1):t._e(),t._l(t.previewData.mch_list,function(e,a){return[t.previewData.hasCity&&0===a?i("v-uni-view",{staticClass:"group"},[i("app-address-bar",{attrs:{address:e.city.error?null:e.address,"has-city":!0,city:e.city}})],1):t._e(),t.previewData.hasCity&&1===a?i("v-uni-view",{staticClass:"group"},[i("app-address-bar",{attrs:{address:t.previewData.address,"has-ziti":t.previewData.has_ziti,"all-ziti":t.previewData.allZiti,city:e.city}})],1):t._e(),i("v-uni-view",{key:a,staticClass:"group"},[i("v-uni-view",{staticStyle:{padding:"26rpx 32rpx"}},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center",staticStyle:{padding:"10rpx 0"}},[i("v-uni-view",{staticClass:"box-grow-0"},[i("v-uni-image",{staticClass:"title-icon mr-12",attrs:{src:"/static/image/icon/store-black.png"}})],1),i("v-uni-view",{staticClass:"box-grow-1 font-bold ellipsis-1"},[t._v(t._s(e.mch.name))]),e.mch.id>0&&e.delivery&&"offline"===e.delivery.send_type&&e.store&&"-m"!=e.store.distance?i("v-uni-view",{staticClass:"box-grow-0 dir-left-nowrap cross-center"},[i("v-uni-image",{staticClass:"mr-12",staticStyle:{display:"block",width:"22rpx",height:"26rpx"},attrs:{src:"/static/image/icon/location.png"}}),i("v-uni-view",[t._v("距您"+t._s(e.store.distance))])],1):t._e()],1),e.delivery&&"offline"===e.delivery.send_type?[e.no_store&&!0===e.no_store?i("v-uni-view",{class:[t.themeTextClass],staticStyle:{padding:"10rpx 0"}},[t._v("暂无门店，请选择其他配送方式")]):[e.store?[0==e.mch.id?i("v-uni-view",{staticClass:"dir-left-nowrap",staticStyle:{padding:"10rpx 0"}},[i("v-uni-view",{staticClass:"box-grow-1 dir-left-nowrap cross-center",on:{click:function(e){e=t.$handleEvent(e),t.navigateStore(a)}}},[i("v-uni-view",[i("v-uni-image",{staticClass:"title-icon mr-12",attrs:{src:"/static/image/icon/navigation-black.png"}})],1),i("v-uni-view",{staticClass:"font-bold ellipsis-1 mr-12"},[t._v(t._s(e.store.name))]),i("v-uni-view",{staticClass:"mr-12"},[i("v-uni-image",{staticClass:"mr-12",staticStyle:{width:"12rpx",height:"22rpx"},attrs:{src:"/static/image/icon/right.png"}})],1)],1),"-m"!=e.store.distance||t.getLocationFail?i("v-uni-view",{staticClass:"box-grow-0 dir-left-nowrap cross-center"},[i("v-uni-view",[i("v-uni-image",{staticClass:"mr-12",staticStyle:{display:"block",width:"22rpx",height:"26rpx"},attrs:{src:"/static/image/icon/location.png"}})],1),t.getLocationFail?i("v-uni-view",{class:[t.theme+"-color",t.theme+"-border"],on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.openLocationSetting(e)}}},[t._v("获取位置")]):"-m"!=e.store.distance?i("v-uni-view",[t._v("距您"+t._s(e.store.distance))]):t._e()],1):t._e()],1):t._e(),i("v-uni-view",{staticStyle:{padding:"10rpx 0"}},[i("v-uni-view",{staticClass:"font-gray ellipsis-2",staticStyle:{"line-height":"30rpx","max-height":"60rpx"}},[t._v(t._s(e.store.address))])],1)]:i("v-uni-view",{staticClass:"dir-left-nowrap cross-center",staticStyle:{padding:"10rpx 0"},on:{click:function(e){e=t.$handleEvent(e),t.navigateStore(a)}}},[i("v-uni-view",{staticClass:"box-grow-1 dir-left-nowrap"},[i("v-uni-image",{staticClass:"title-icon mr-12",attrs:{src:"/static/image/icon/navigation-black.png"}}),i("v-uni-view",{staticClass:"mr-12 font-bold"},[t._v("选择门店")])],1),i("v-uni-view",{staticClass:"box-grow-0 dir-left-nowrap cross-center"},[i("v-uni-view",{staticClass:"mr-12 font-gray"},[t._v("请选择门店")]),i("v-uni-image",{staticClass:"mr-12",staticStyle:{width:"12rpx",height:"22rpx"},attrs:{src:"/static/image/icon/arrow-right.png"}})],1)],1)]]:t._e()],2),i("v-uni-view",{staticClass:"line"}),!1!==e.show_delivery?i("v-uni-view",{staticStyle:{padding:"18rpx 32rpx"}},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center",staticStyle:{padding:"18rpx 0"}},[i("v-uni-view",{staticClass:"box-grow-0"},[i("v-uni-image",{staticClass:"title-icon mr-12",attrs:{src:"/static/image/icon/delivery.png"}})],1),i("v-uni-view",{staticClass:"box-grow-1 font-bold"},[t._v("配送方式")])],1),i("v-uni-view",{staticClass:"dir-left-nowrap",staticStyle:{padding:"18rpx 0"}},t._l(e.delivery.send_type_list,function(o,s){return i("v-uni-view",{key:s,staticClass:"send-type",class:o.value==e.delivery.send_type&&t.userTheme?t.theme+"-background theme-color":o.value!=e.delivery.send_type||t.userTheme?"app-light-gray-back":t.theme+"-m-back theme-color "+t.theme,on:{click:function(e){e=t.$handleEvent(e),t.changeSendType(a,o.value)}}},[t._v(t._s(o.name))])}),1)],1):t._e(),e.delivery&&"city"===e.delivery.send_type&&e.city?[i("v-uni-view",{staticClass:"line"}),e.city.error?i("v-uni-view",{staticClass:"dir-left-nowrap cross-center",staticStyle:{padding:"36rpx 32rpx"}},[i("v-uni-view",{staticClass:"box-grow-1"},[t._v(t._s(e.city.error))]),i("v-uni-view",{staticClass:"box-grow-0 dir-left-nowrap delivery-coverage-btn",staticStyle:{margin:"-12rpx 0"},on:{click:function(e){e=t.$handleEvent(e),t.jump(a)}}},[t._v("查看配送范围")])],1):i("v-uni-view",{staticStyle:{padding:"36rpx 32rpx"}},[i("v-uni-view",{staticStyle:{padding:"10rpx 0"}},[t._v("发货地址："+t._s(e.city.address))]),i("v-uni-view",{staticClass:"dir-left-nowrap cross-center",staticStyle:{padding:"10rpx 0"}},[i("v-uni-view",{staticClass:"box-grow-1"},[e.city.explain?i("v-uni-view",[t._v(t._s(e.city.explain))]):t._e()],1),i("v-uni-view",{staticClass:"box-grow-0 dir-left-nowrap delivery-coverage-btn",on:{click:function(e){e=t.$handleEvent(e),t.jump(a)}}},[t._v("查看配送范围")])],1)],1)]:t._e(),i("v-uni-view",{staticClass:"line"}),e.pick_up_enable?t._e():i("v-uni-view",{staticStyle:{height:"80rpx","line-height":"80rpx",background:"#fff4f3",padding:"0 24rpx"}},[i("v-uni-view",[t._v("以下商品满"+t._s(e.pick_up_price)+"元起送")])],1),i("app-submit-goods",{attrs:{theme:t.theme,index:a,plugin:t.plugin,list:e},on:{updateList:function(e){e=t.$handleEvent(e),t.updateList(e)}}}),i("v-uni-view",{staticClass:"line"}),e.coupon&&e.coupon.enabled||e.member_discount>0||e.member_discount<0||e.integral&&e.integral.can_use||e.temp_vip_discount||e.insert_rows&&e.insert_rows.length||e.full_reduce_discount>0||e.full_reduce_discount<0?[i("v-uni-view",{staticStyle:{padding:"20rpx 32rpx"}},[e.coupon&&e.coupon.enabled?[i("v-uni-view",{staticStyle:{padding:"16rpx 0"},on:{click:function(e){e=t.$handleEvent(e),t.showCouponPicker(a)}}},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center"},[i("v-uni-view",{staticClass:"box-grow-1"},[t._v("优惠券")]),e.coupon.use?i("v-uni-view",{staticClass:"box-grow-0 mr-12",class:[t.themeTextClass]},[t._v("-¥"+t._s(e.coupon.coupon_discount))]):t.noCouponStatus(a)?i("v-uni-view",{staticClass:"box-grow-0 mr-12 font-gray"},[t._v("暂无优惠券可用")]):i("v-uni-view",{staticClass:"box-grow-0 mr-12 font-gray"},[t._v("选择优惠券")]),i("v-uni-view",{staticClass:"box-grow-0"},[i("v-uni-image",{staticStyle:{width:"12rpx",height:"22rpx","margin-bottom":"-2rpx"},attrs:{src:"/static/image/icon/arrow-right.png"}})],1)],1)],1),i("app-bottom-modal",{attrs:{visible:e.showCouponPicker,title:"优惠券"},on:{"update:visible":function(i){i=t.$handleEvent(i),t.$set(e,"showCouponPicker",i)}}},[i("app-coupon-pick",{attrs:{plugin:t.plugin,"mch-index":a,"no-coupons":e.noCoupons,theme:t.theme},on:{change:function(e){e=t.$handleEvent(e),t.loadPreviewData(e)},"update:noCoupons":function(i){i=t.$handleEvent(i),t.$set(e,"noCoupons",i)},"update:no-coupons":function(i){i=t.$handleEvent(i),t.$set(e,"noCoupons",i)}}})],1)]:t._e(),e.member_discount>0||e.member_discount<0?i("v-uni-view",{staticClass:"dir-left-nowrap",staticStyle:{padding:"16rpx 0"}},[i("v-uni-view",{staticClass:"box-grow-1"},[t._v("会员价总优惠")]),i("v-uni-view",{staticClass:"box-grow-0",class:[t.themeTextClass]},[e.member_discount>0?[t._v("-¥"+t._s(e.member_discount))]:e.member_discount<0?[t._v("+¥"+t._s(0-e.member_discount))]:[t._v("¥0.00")]],2)],1):t._e(),e.full_reduce_discount>0||e.full_reduce_discount<0?i("v-uni-view",{staticClass:"dir-left-nowrap",staticStyle:{padding:"16rpx 0"}},[i("v-uni-view",{staticClass:"box-grow-1"},[t._v("满减总优惠")]),i("v-uni-view",{staticClass:"box-grow-0",class:[t.themeTextClass]},[e.full_reduce_discount>0?[t._v("-¥"+t._s(e.full_reduce_discount))]:e.full_reduce_discount<0?[t._v("+¥"+t._s(0-e.full_reduce_discount))]:t._e()],2)],1):t._e(),e.integral&&e.integral.can_use?i("v-uni-view",{staticClass:"dir-left-nowrap",staticStyle:{padding:"16rpx 0"}},[i("v-uni-view",{staticClass:"box-grow-1 dir-left-nowrap cross-center"},[t._v("积分抵扣（使用 "+t._s(e.integral.use_num)+"积分）"),i("v-uni-image",{staticStyle:{width:"36rpx",height:"36rpx",margin:"-12rpx 0"},attrs:{src:"/static/image/icon/warning.png"},on:{click:function(e){e=t.$handleEvent(e),t.showIntegralTip(e)}}})],1),i("v-uni-view",{staticClass:"box-grow-0 dir-left-nowrap cross-center"},[i("v-uni-view",{staticClass:"mr-12",class:[t.themeTextClass]},[t._v("-¥"+t._s(e.integral.deduction_price))]),i("v-uni-view",{staticStyle:{margin:"-6rpx 0"}},[i("app-submit-checkbox",{attrs:{round:!0,theme:t.theme,value:e.integral.use,"border-color":"#999999"},on:{input:function(e){e=t.$handleEvent(e),t.changeIntegral(a)}}})],1)],1)],1):t._e(),e.temp_vip_discount?i("v-uni-view",{staticStyle:{padding:"16rpx 0"}},[i("v-uni-view",{staticClass:"svip dir-left-nowrap cross-center",style:{backgroundImage:"url("+t.appImg.order_submit.svip_bg+")"}},[i("v-uni-view",{staticClass:"box-grow-1"},[e.vip_card_detail?i("v-uni-view",[t._v("SVIP用户，本单优惠"),i("v-uni-text",{staticStyle:{color:"#ff4544"}},[t._v(t._s(e.temp_vip_discount))]),t._v("元")],1):[i("v-uni-view",{staticStyle:{"margin-bottom":"10rpx"}},[t._v("现在开卡，本单立减"),i("v-uni-text",{staticStyle:{color:"#ff4544"}},[t._v(t._s(e.temp_vip_discount))]),t._v("元")],1),i("v-uni-view",{staticClass:"dir-left-nowrap cross-center",on:{click:function(e){e=t.$handleEvent(e),t.navigateVipCardPrivilege(e)}}},[i("v-uni-view",{staticStyle:{"margin-right":"10rpx","font-size":"22rpx"}},[t._v("查看权益")]),i("v-uni-image",{staticStyle:{width:"12rpx",height:"22rpx",display:"block"},attrs:{src:"/static/image/icon/order-submit/arrow-right-b.png"}})],1)]],2),i("v-uni-view",{staticClass:"box-grow-0 dir-left-nowrap cross-center",staticStyle:{padding:"12rpx 22rpx 12rpx 0"},on:{click:function(e){e=t.$handleEvent(e),t.navigateSvip(a)}}},[i("v-uni-view",{staticClass:"vip-card-name",staticStyle:{"margin-right":"10rpx","line-height":"1.05"}},[e.vip_card_detail?[t._v(t._s(e.vip_card_detail.name))]:[t._v("请选择")]],2),i("v-uni-image",{staticStyle:{width:"12rpx",height:"22rpx",display:"block"},attrs:{src:"/static/image/icon/order-submit/arrow-right-a.png"}})],1)],1)],1):t._e(),e.insert_rows&&e.insert_rows.length?i("v-uni-view",{class:[e.showInsertRows?"show":""]},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center",staticStyle:{padding:"16rpx 0"},on:{click:function(e){e=t.$handleEvent(e),t.reversalShowInsertRows(a)}}},[i("v-uni-view",{staticClass:"box-grow-1 dir-left-nowrap cross-center"},[i("v-uni-view",{staticClass:"mr-12"},[t._v("活动优惠")]),i("v-uni-image",{staticClass:"bottom-icon",staticStyle:{width:"22rpx",height:"12rpx"},attrs:{src:"/static/image/icon/bottom.png"}})],1),i("v-uni-view",{staticClass:"box-grow-0",class:[t.themeTextClass]},[t._v(t._s(e.insert_total_discount))])],1),i("v-uni-view",{staticClass:"insert-rows"},[i("v-uni-view",{staticClass:"font-small more-discount-info"},t._l(e.insert_rows,function(e,a){return i("v-uni-view",{key:a,staticClass:"row dir-left-nowrap no-px"},[i("v-uni-view",{staticClass:"box-grow-1",staticStyle:{color:"#999"}},[t._v(t._s(e.title))]),i("v-uni-view",{staticClass:"box-grow-0",class:[t.themeTextClass]},[t._v(t._s(e.value))])],1)}),1)],1)],1):t._e()],2),i("v-uni-view",{staticClass:"line"})]:t._e(),!1!==e.show_express_price?[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center",staticStyle:{height:"84rpx",padding:"0 32rpx"}},[i("v-uni-view",{staticClass:"box-grow-1"},[t._v("运费")]),i("v-uni-view",{staticClass:"box-grow-0",class:[t.themeTextClass],staticStyle:{"text-align":"right"}},[e.express_price_origin&&e.express_price_desc?[i("v-uni-view",{class:t.theme+"-m-text "+t.theme},[t._v("￥"+t._s(e.express_price_origin))]),i("v-uni-view",{staticClass:"express-price-desc",class:t.theme+"-m-text "+t.theme},[t._v(t._s(e.express_price_desc))])]:[t._v("￥"+t._s(e.express_price))]],2)],1)]:t._e(),e.order_form&&"1"==e.order_form.status||!1===e.show_remark||!0===e.has_goods_form?t._e():[i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"row",staticStyle:{"padding-top":"0","padding-bottom":"0"}},[i("app-input",{attrs:{placeholder:"买家留言","padding-left":"0",height:"100"},on:{input:function(e){e=t.$handleEvent(e),t.inputRemark(a)}},model:{value:e.remark,callback:function(i){t.$set(e,"remark",i)},expression:"mch.remark"}})],1)],i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"dir-right-nowrap cross-center",staticStyle:{height:"84rpx",padding:"0 32rpx"}},[i("v-uni-view",{staticClass:"box-grow-0 dir-left-nowrap"},[i("v-uni-view",[t._v("小计：")]),i("v-uni-view",{class:[t.themeTextClass]},[t._v("¥"+t._s(e.total_price))])],1),i("v-uni-view",{staticClass:"box-grow-0 font-gray mr-12"},[t._v("共"+t._s(e.goods_count)+"件")])],1)],2)]}),t._l(t.previewData.mch_list,function(e,a){return i("v-uni-view",{key:a},[e.order_form&&"1"==e.order_form.status?i("v-uni-view",{staticClass:"group"},[i("v-uni-view",{staticStyle:{padding:"0 12rpx"}},[i("app-diy-form",{attrs:{title:e.order_form.name,list:e.order_form.value,sign:a,"label-position":"top","show-scroll-btn":e.order_form.show_scroll},on:{input:function(e){e=t.$handleEvent(e),t.handleOrderFormInput(e)},validate:function(e){e=t.$handleEvent(e),t.handleOrderFormValidate(e)}}})],1)],1):t._e(),e.has_goods_form?t._l(e.goods_list,function(o,s){return o.form&&!o.form.same_form?i("v-uni-view",{key:s,staticClass:"group goods-form"},[i("v-uni-view",{staticClass:"font-bold",staticStyle:{padding:"36rpx 32rpx"}},[t._v(t._s(o.form.name))]),i("v-uni-view",{staticClass:"line"}),1!==e.diff_goods_form_count||t.previewData.mch_list.length>1?i("v-uni-view",{staticClass:"row goods-list"},t._l(e.goods_list,function(e,a){return e.form&&e.form.id==o.form.id?i("v-uni-view",{key:a,staticClass:"dir-left-nowrap goods-item"},[i("v-uni-view",{staticClass:"box-grow-0"},[i("v-uni-image",{staticClass:"goods-image",attrs:{src:e.goods_attr.pic_url?e.goods_attr.pic_url:e.cover_pic}})],1),i("v-uni-view",{staticClass:"box-grow-1"},[i("v-uni-view",{staticClass:"goods-name ellipsis-2"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"dir-left-wrap"},t._l(e.attr_list,function(e,a){return i("v-uni-view",{key:a,staticClass:"mr-12 font-gray font-small"},[t._v(t._s(e.attr_group_name)+":"+t._s(e.attr_name))])}),1),i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"box-grow-1 font-gray font-small"},[t._v("×"+t._s(e.num))]),i("v-uni-view",{staticClass:"box-grow-0"},[i("v-uni-view",{staticClass:"font-small",class:t.theme+"-m-text "+t.theme,staticStyle:{"text-align":"right"}},[t._l(e.custom_currency,function(e,a){return i("v-uni-text",{key:a},[t._v(t._s(e)+"+")])}),t._v("￥"+t._s(e.total_original_price))],2),t._l(e.discounts,function(e,a){return i("v-uni-view",{key:a,class:t.theme+"-m-text "+t.theme,staticStyle:{"text-align":"right"}},[t._v(t._s(e.name)+": "+t._s(e.value))])})],2)],1)],1)],1):t._e()}),1):t._e(),i("v-uni-view",{staticStyle:{padding:"0 12rpx"}},[i("app-diy-form",{attrs:{showRequiredIcon:!0,list:o.form.value,"label-position":"top","label-fs28":!0,sign:a+","+s+","+o.form.id},on:{input:function(e){e=t.$handleEvent(e),t.handleGoodsFormInput(e)},validate:function(e){e=t.$handleEvent(e),t.handleGoodsFormValidate(e)}}})],1)],1):t._e()}):t._e()],2)})],2):t._e()],1),t.previewData?i("v-uni-view",{staticClass:"submit-bar u-bottom-fixed dir-left-nowrap safe-area-inset-bottom"},[i("v-uni-view",{staticClass:"bd-bottom dir-left-nowrap"},[i("v-uni-view",{staticClass:"box-grow-1 cross-center u-submit-bar-height"},[i("v-uni-view",{staticClass:"price-info"},[i("v-uni-view",{class:[t.themeTextClass],staticStyle:{"font-size":"26rpx"}},[t._v(t._s(t.totalTitle)+":"),t._l(t.previewData.custom_currency_all,function(e,a){return i("v-uni-text",{key:a},[t._v(t._s(e)+"+")])}),t.previewData.vip_card_discount_total_price?[t._v("￥"+t._s(t.previewData.vip_card_discount_total_price))]:[t._v("￥"+t._s(t.previewData.total_price))]],2),t.previewData.vip_card_price>0?i("v-uni-view",{class:[t.themeTextClass],staticStyle:{"font-size":"20rpx"}},[t._v("包含SVIP费用:\n                        ¥"+t._s(t.previewData.vip_card_price))]):t._e()],1)],1),t.previewData.address_enable&&t.previewData.price_enable?[i("v-uni-view",{staticClass:"submit-btn u-submit-bar-height box-grow-0 main-center cross-center",class:[t.submitLock?" lock":"",t.themeBgClass],on:{click:function(e){e=t.$handleEvent(e),t.subscribe(e)}}},[i("v-uni-view",{staticStyle:{"background-color":"transparent",color:"#ffffff","text-align":"center"}},[t._v("提交订单")])],1)]:[i("v-uni-view",{staticClass:"submit-btn u-submit-bar-height box-grow-0 main-center cross-center disabled",class:[t.themeBgClass]},[i("v-uni-view",{staticStyle:{"background-color":"transparent",color:"#ffffff","text-align":"center"}},[t._v("提交订单")])],1)]],2)],1):t._e(),t.showClose&&t.mchList.length>0?i("app-close",{attrs:{toBack:!0,mch_list:t.mchList},on:{update:function(e){e=t.$handleEvent(e),t.getMall(e)}}}):t._e()],1)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},8160:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"app-submit-goods"},["composition"!==t.plugin?i("v-uni-view",{staticClass:"app-submit-goods-item"},t._l(t.list.goods_list,function(e,a){return i("v-uni-view",{key:a,staticClass:"goods-item"},[i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"box-grow-0",staticStyle:{position:"relative"}},[!0===e.address_disabled?i("v-uni-view",{staticClass:"address-disabled"},[t._v("不在配送范围内")]):t._e(),i("v-uni-image",{staticClass:"goods-image",attrs:{src:e.goods_attr.pic_url?e.goods_attr.pic_url:e.cover_pic}})],1),i("v-uni-view",{staticClass:"box-grow-1 dir-top-nowrap"},[i("v-uni-view",{staticClass:"goods-name box-grow-1"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"box-grow-0"},[i("v-uni-view",{staticClass:"dir-left-wrap attr-list"},t._l(e.attr_list,function(e,a){return i("v-uni-view",{key:a,staticClass:"attr-item"},[t._v(t._s(e.attr_group_name)+"："+t._s(e.attr_name))])}),1),i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"box-grow-1 goods-num"},[t._v("×"+t._s(e.num))]),i("v-uni-view",{staticClass:"box-grow-0 goods-price-info"},[i("v-uni-view",[t._l(e.custom_currency,function(e,a){return i("v-uni-text",{key:a},[t._v(t._s(e)+"+")])}),i("v-uni-text",{staticClass:"goods-price-unit"},[t._v("￥")]),i("v-uni-text",[t._v(t._s(e.total_original_price))])],2)],1)],1)],1)],1)],1),t._l(e.discounts,function(e,a){return i("v-uni-view",{key:a,class:[t.themeTextClass],staticStyle:{"text-align":"right","padding-top":"12rpx","font-size":"24rpx"}},[i("v-uni-view",{staticStyle:{display:"inline-block","margin-right":"6rpx"}},[t._v(t._s(e.name))]),e.value<0?[t._v("-¥"+t._s(t.priceFormat(0-e.value)))]:e.value>0?[t._v("+¥"+t._s(t.priceFormat(e.value)))]:[t._v("¥0.00")]],2)})],2)}),1):i("v-uni-view",{staticClass:"composition"},t._l(t.list.composition_list,function(e,a){return i("v-uni-view",{key:a,staticClass:"composition-item"},[t._l(e.goods_list,function(a,o){return i("v-uni-view",{key:o,staticClass:"goods-item"},[i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"box-grow-0",staticStyle:{position:"relative"}},[!0===a.address_disabled?i("v-uni-view",{staticClass:"address-disabled"},[t._v("不在配送范围内")]):t._e(),i("v-uni-image",{staticClass:"goods-image",attrs:{src:a.goods_attr.pic_url?a.goods_attr.pic_url:a.cover_pic}})],1),i("v-uni-view",{staticClass:"box-grow-1 dir-top-nowrap"},[i("v-uni-view",{staticClass:"goods-name box-grow-1"},[t._v(t._s(a.name))]),i("v-uni-view",{staticClass:"box-grow-0"},[i("v-uni-view",{staticClass:"dir-left-wrap attr-list"},t._l(a.attr_list,function(e,a){return i("v-uni-view",{key:a,staticClass:"attr-item"},[t._v(t._s(e.attr_group_name)+"："+t._s(e.attr_name))])}),1),i("v-uni-view",{staticClass:"dir-left-nowrap goods-other"},[i("v-uni-view",{staticClass:"box-grow-1 goods-num"},[t._v("×"+t._s(a.num))]),2==e.type?i("v-uni-view",{staticClass:"box-grow-0 goods-price-info"},[i("v-uni-view",[t._l(a.custom_currency,function(e,a){return i("v-uni-text",{key:a},[t._v(t._s(e)+"+")])}),i("v-uni-text",{staticClass:"goods-price-unit"},[t._v("￥")]),i("v-uni-text",[t._v(t._s(a.total_price))])],2)],1):t._e()],1)],1)],1)],1),t._l(a.discounts,function(e,a){return i("v-uni-view",{key:a,class:[t.themeTextClass],staticStyle:{"text-align":"right","padding-top":"12rpx","font-size":"24rpx"}},[i("v-uni-view",{staticStyle:{display:"inline-block","margin-right":"6rpx"}},[t._v(t._s(e.name))]),e.value<0?[t._v("-¥"+t._s(t.priceFormat(0-e.value)))]:e.value>0?[t._v("+¥"+t._s(t.priceFormat(e.value)))]:[t._v("¥0.00")]],2)})],2)}),i("v-uni-view",{staticClass:"composition-info",class:[t.themeTextClass]},[i("v-uni-view",{staticStyle:{"margin-bottom":"8rpx"}},[t._v(t._s(1==e.type?"固定套餐":"搭配套餐")+"\n                    ￥"+t._s(e.total_price))]),i("v-uni-view",{staticClass:"composition-discount"},[t._v("已省 ￥"+t._s(e.composition_price))])],1)],2)}),1)],1)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},"84e8":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".text-center[data-v-838eb44a]{text-align:center}.font-weight[data-v-838eb44a]{font-weight:700}.page-width[data-v-838eb44a]{width:100%}.goods-hover-class[data-v-838eb44a]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-838eb44a]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-838eb44a]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-838eb44a]{width:100%}.u-hover-class[data-v-838eb44a]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-838eb44a]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-coupon-pick .mr-32[data-v-838eb44a]{margin-right:%?32?%}.app-coupon-pick .btn[data-v-838eb44a]{height:%?56?%;line-height:%?56?%;padding:0 %?32?%;border-radius:%?1000?%;background:#fff;text-align:center;border:%?1?% solid}.app-coupon-pick .btn[data-v-838eb44a]:active{-webkit-box-shadow:0 0 %?100?% rgba(0,0,0,.05) inset;box-shadow:0 0 %?100?% rgba(0,0,0,.05) inset}.app-coupon-pick .btn.use[data-v-838eb44a]{color:#c5a977;border-color:rgba(0,0,0,0)}.app-coupon-pick .btn.dont-use[data-v-838eb44a]{height:%?80?%;line-height:%?80?%}.app-coupon-pick .coupon-tab[data-v-838eb44a]{border-bottom:%?1?% solid #ddd}.app-coupon-pick .coupon-tab>uni-view[data-v-838eb44a]{text-align:center;padding:%?32?%;position:relative}.app-coupon-pick .coupon-tab .active-block[data-v-838eb44a]{position:absolute;bottom:0;left:50%;height:%?4?%;width:%?110?%;margin-left:%?-60?%;display:none}.app-coupon-pick .coupon-tab .active .active-block[data-v-838eb44a]{display:block}.app-coupon-pick .coupon-tab .split[data-v-838eb44a]{width:%?1?%;height:%?28?%;background:#ddd;padding:0}.app-coupon-pick .list-scroll[data-v-838eb44a]{overflow:hidden;background:#f7f7f7;height:%?913?%}.app-coupon-pick .coupon-list[data-v-838eb44a]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:%?32?%}.app-coupon-pick .coupon-list .item[data-v-838eb44a]{margin:%?32?% 0;background:#fff;border-radius:%?16?%;-webkit-box-shadow:0 0 %?10?% rgba(0,0,0,.05);box-shadow:0 0 %?10?% rgba(0,0,0,.05);overflow:hidden}.app-coupon-pick .coupon-list .item .top[data-v-838eb44a]{padding:%?40?% %?24?%;color:#fff;background-size:100% 100%}.app-coupon-pick .coupon-list .item .top .desc-row[data-v-838eb44a]{margin:%?6?% 0;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.app-coupon-pick .coupon-list .item .bottom[data-v-838eb44a]{padding:%?24?% %?24?%;font-size:%?24?%}body.?%PAGE?%[data-v-838eb44a]{background:#f7f7f7}",""])},8942:function(t,e,i){"use strict";i.r(e);var a=i("f624"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},9106:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".text-center[data-v-7badd980]{text-align:center}.font-weight[data-v-7badd980]{font-weight:700}.page-width[data-v-7badd980]{width:100%}.goods-hover-class[data-v-7badd980]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-7badd980]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-7badd980]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-7badd980]{width:100%}.u-hover-class[data-v-7badd980]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-7badd980]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.order-submit-picker[data-v-7badd980]{background:rgba(0,0,0,.25);position:fixed;z-index:1501;top:0;left:0;width:100%;height:100%;opacity:0;visibility:hidden;-webkit-transition:.3s;-o-transition:.3s;transition:.3s}.order-submit-picker .container[data-v-7badd980]{background:#fff;position:relative;top:100%;-webkit-transition:.3s;-o-transition:.3s;transition:.3s;-webkit-transition-timing-function:ease;-o-transition-timing-function:ease;transition-timing-function:ease;border-radius:%?16?% %?16?% 0 0;-webkit-box-shadow:0 0 %?24?% rgba(0,0,0,.1);box-shadow:0 0 %?24?% rgba(0,0,0,.1)}.order-submit-picker .container .title[data-v-7badd980]{padding:%?28?% %?32?%;font-weight:700;font-size:%?36?%}.order-submit-picker.show[data-v-7badd980]{opacity:1;visibility:visible}.order-submit-picker.show .container[data-v-7badd980]{top:0}body.?%PAGE?%[data-v-7badd980]{background:#f7f7f7}",""])},"92a5":function(t,e,i){"use strict";i.r(e);var a=i("8160"),o=i("bf44");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("48f4");var n=i("2877"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"1c640c31",null);e["default"]=r.exports},"937c":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"app-bottom-modal"},[i("v-uni-view",{staticClass:"order-submit-picker dir-top-nowrap",class:t.iVisible?"show":""},[i("v-uni-view",{staticClass:"box-grow-1 close",on:{click:function(e){e=t.$handleEvent(e),t.close(e)},touchmove:function(e){e.stopPropagation(),e=t.$handleEvent(e),(!0)(e)}}}),i("v-uni-view",{staticClass:"box-grow-0 container"},[i("v-uni-view",{staticClass:"title dir-left-nowrap",on:{touchmove:function(e){e.stopPropagation(),e=t.$handleEvent(e),(!0)(e)}}},[i("v-uni-view",{staticClass:"box-grow-1"},[t._v(t._s(t.title))]),i("v-uni-view",{staticClass:"box-grow-0",on:{click:function(e){e=t.$handleEvent(e),t.close(e)}}},[i("v-uni-image",{staticStyle:{width:"30rpx",height:"30rpx"},attrs:{src:"/static/image/icon/icon-close.png"}})],1)],1),i("v-uni-view",{staticClass:"body"},[t._t("default")],2)],1)],1)],1)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},94219:function(t,e,i){"use strict";i.r(e);var a=i("937c"),o=i("5c1a");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("9e83");var n=i("2877"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"7badd980",null);e["default"]=r.exports},"9e83":function(t,e,i){"use strict";var a=i("519e"),o=i.n(a);o.a},a060:function(t,e,i){"use strict";i.r(e);var a=i("bbba"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},a3cf:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".text-center[data-v-26e8708a]{text-align:center}.font-weight[data-v-26e8708a]{font-weight:700}.page-width[data-v-26e8708a]{width:100%}.goods-hover-class[data-v-26e8708a]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-26e8708a]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-26e8708a]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-26e8708a]{width:100%}.u-hover-class[data-v-26e8708a]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-26e8708a]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.close-tip[data-v-26e8708a]{position:fixed;bottom:0;left:0;height:%?130?%;width:100%;z-index:20;font-size:%?30?%;color:#353535;background-color:#fff7d7}.close-tip uni-image[data-v-26e8708a]{width:%?70?%;height:%?70?%;margin:0 %?24?%}.close-tip .close-content[data-v-26e8708a]{padding-top:%?10?%;font-size:%?24?%;color:#999}.open-dialog[data-v-26e8708a]{width:%?620?%;border-radius:%?16?%;background-color:#fff;position:relative;padding-top:%?40?%;padding-bottom:%?105?%;font-size:%?32?%;color:#353535;text-align:center}.open-dialog .open-dialog-content[data-v-26e8708a]{padding:%?25?% 0;font-size:%?26?%;color:#666}.open-dialog .open-dialog-content uni-view[data-v-26e8708a]{margin:%?5?% 0}.open-dialog .dialog-button[data-v-26e8708a]{font-size:%?30?%;position:absolute;bottom:0;left:0;border-top:%?2?% solid #e2e2e2;height:%?90?%;line-height:%?90?%;width:100%}body.?%PAGE?%[data-v-26e8708a]{background:#f7f7f7}",""])},ae80:function(t,e,i){"use strict";i.r(e);var a=i("1b05"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},afd5:function(t,e,i){"use strict";var a=i("0c80"),o=i.n(a);o.a},bb32:function(t,e,i){var a=i("f0bc");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("069a677b",a,!0,{sourceMap:!1,shadowMode:!1})},bbba:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("2f62");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(i,!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r={name:"app-address-bar",props:{address:{default:null},allZiti:{default:!1},hasZiti:{default:!1},hasCity:{default:!1},city:{default:null}},computed:s({},(0,a.mapGetters)("mallConfig",{theme:"getTheme"})),methods:{navigateAddress:function(){this.city&&1===this.city.errorCode?uni.showModal({content:this.city.error,showCancel:!1}):uni.navigateTo({url:"/pages/order-submit/address-pick?hasCity="+this.hasCity})},handleAddressInput:function(){this.$emit("addressInput",this.address)}}};e.default=r},bf44:function(t,e,i){"use strict";i.r(e);var a=i("0818"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},c0e3:function(t,e,i){"use strict";i.r(e);var a=i("1c54"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},c360:function(t,e,i){var a=i("6f76");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("5ef13cb6",a,!0,{sourceMap:!1,shadowMode:!1})},ca99:function(t,e,i){var a=i("32af");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("5a98c4e8",a,!0,{sourceMap:!1,shadowMode:!1})},cb28:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"app-coupon-pick"},[i("v-uni-view",{staticClass:"coupon-tab dir-left-nowrap cross-center",on:{touchmove:function(e){e.stopPropagation(),e=t.$handleEvent(e),(!0)(e)}}},[i("v-uni-view",{staticClass:"box-grow-1",class:[1==t.couponType?"active "+t.themeTextClass:""],on:{click:function(e){e=t.$handleEvent(e),t.couponType=1}}},[t._v("可用优惠券"),t.list?[t._v("("+t._s(t.list.length)+")")]:t._e(),i("v-uni-view",{staticClass:"active-block",class:[t.themeBgClass]})],2),i("v-uni-view",{staticClass:"box-grow-0 split"}),i("v-uni-view",{staticClass:"box-grow-1",class:[0==t.couponType?"active "+t.themeTextClass:""],on:{click:function(e){e=t.$handleEvent(e),t.couponType=0}}},[t._v("不可用优惠券"),t.cantUseList?[t._v("("+t._s(t.cantUseList.length)+")")]:t._e(),i("v-uni-view",{staticClass:"active-block",class:[t.themeBgClass]})],2)],1),i("v-uni-scroll-view",{staticClass:"list-scroll",attrs:{"scroll-y":"true"}},[1==t.couponType?i("v-uni-view",{staticClass:"coupon-list"},[null===t.list?i("v-uni-view",{staticStyle:{padding:"50rpx","text-align":"center",color:"#999"}},[t._v("加载中")]):[t.list.length?t._l(t.list,function(e,a){return i("v-uni-view",{key:a,staticClass:"item"},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center top",style:{backgroundImage:"url("+t.appImg.order_submit.coupon_bg+")"}},[i("v-uni-view",{staticClass:"box-grow-0 mr-32"},[1==e.type?i("v-uni-view",{staticClass:"dir-left-nowrap cross-bottom"},[i("v-uni-view",{staticStyle:{"font-size":"72rpx","line-height":"1"}},[t._v(t._s(e.discount))]),i("v-uni-view",{staticStyle:{"line-height":"1.75"}},[t._v("折")])],1):i("v-uni-view",{staticClass:"dir-left-nowrap cross-bottom"},[i("v-uni-view",{staticStyle:{"line-height":"1.75"}},[t._v("￥")]),i("v-uni-view",{staticStyle:{"font-size":"72rpx","line-height":"1"}},[t._v(t._s(e.sub_price))])],1)],1),i("v-uni-view",{staticClass:"box-grow-1",staticStyle:{"font-size":"24rpx"}},[i("v-uni-view",{staticClass:"desc-row"},[t._v(t._s(e.coupon_data.name))]),i("v-uni-view",{staticClass:"desc-row"},[t._v("满"+t._s(e.coupon_min_price)+"元可用")]),e.discount_limit?i("v-uni-view",{staticClass:"desc-row"},[t._v("优惠上限:￥"+t._s(e.discount_limit))]):t._e()],1),i("app-submit-checkbox",{attrs:{round:!0,theme:t.theme,"border-color":"#999999",sign:a},on:{input:function(e){e=t.$handleEvent(e),t.handleCouponChange(e)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}})],1),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticStyle:{"margin-bottom":"12rpx"}},[t._v("有效日期："+t._s(e.start_time)+"-"+t._s(e.end_time))]),i("v-uni-view",[t._v("适用范围："+t._s(3==e.coupon_data.appoint_type?"全场通用":5==e.coupon_data.appoint_type?"礼品卡":"限品类"))])],1)],1)}):i("v-uni-view",{staticStyle:{padding:"128rpx","text-align":"center"}},[i("v-uni-image",{staticStyle:{width:"240rpx",height:"240rpx","margin-bottom":"36rpx"},attrs:{src:"/static/image/no-goods.png"}}),i("v-uni-view",{staticStyle:{color:"#999999"}},[t._v("暂无可用优惠券")])],1)]],2):i("v-uni-view",{staticClass:"coupon-list"},[null===t.cantUseList?i("v-uni-view",{staticStyle:{padding:"50rpx","text-align":"center",color:"#999"}},[t._v("加载中")]):[t.cantUseList.length?t._l(t.cantUseList,function(e,a){return i("v-uni-view",{key:a,staticClass:"item"},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center top",style:{backgroundImage:"url("+t.appImg.order_submit.coupon_bg_disable+")"}},[i("v-uni-view",{staticClass:"box-grow-0 mr-32"},[1==e.type?i("v-uni-view",{staticClass:"dir-left-nowrap cross-bottom"},[i("v-uni-view",{staticStyle:{"font-size":"72rpx","line-height":"1"}},[t._v(t._s(e.discount))]),i("v-uni-view",{staticStyle:{"line-height":"1.75"}},[t._v("折")])],1):i("v-uni-view",{staticClass:"dir-left-nowrap cross-bottom"},[i("v-uni-view",{staticStyle:{"line-height":"1.75"}},[t._v("￥")]),i("v-uni-view",{staticStyle:{"font-size":"72rpx","line-height":"1"}},[t._v(t._s(e.sub_price))])],1)],1),i("v-uni-view",{staticClass:"box-grow-1",staticStyle:{"font-size":"24rpx"}},[i("v-uni-view",{staticClass:"desc-row"},[t._v(t._s(e.coupon_data.name))]),i("v-uni-view",{staticClass:"desc-row"},[t._v("满"+t._s(e.coupon_min_price)+"元可用")]),e.discount_limit?i("v-uni-view",{staticClass:"desc-row"},[t._v("优惠上限:￥"+t._s(e.discount_limit))]):t._e()],1)],1),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticStyle:{"margin-bottom":"12rpx"}},[t._v("有效日期："+t._s(e.start_time)+"-"+t._s(e.end_time))]),i("v-uni-view",[t._v("适用范围："+t._s(3==e.coupon_data.appoint_type?"全场通用":"限品类"))])],1)],1)}):i("v-uni-view",{staticStyle:{"padding-top":"128rpx","text-align":"center"}},[i("v-uni-image",{staticStyle:{width:"240rpx",height:"240rpx","margin-bottom":"36rpx"},attrs:{src:"/static/image/no-goods.png"}}),i("v-uni-view",{staticStyle:{color:"#999999"}},[t._v("暂无不可用优惠券")])],1)]],2)],1)],1)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},d240:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"app-bottom-modal",props:{title:{type:String,default:""},sign:{default:null},visible:{type:Boolean,default:!1}},data:function(){return{iVisible:this.visible}},watch:{visible:function(t){this.iVisible=t}},methods:{close:function(){this.iVisible=!1,this.$emit("update:visible",this.iVisible)}}};e.default=a},de73:function(t,e,i){"use strict";var a=i("4819"),o=i.n(a);o.a},e047:function(t,e,i){"use strict";i.r(e);var a=i("35ab"),o=i("a060");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);var n=i("2877"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,null,null);e["default"]=r.exports},f0bc:function(t,e,i){var a=i("b041");e=t.exports=i("2350")(!1),e.push([t.i,".text-center[data-v-4def2e1e]{text-align:center}.font-weight[data-v-4def2e1e]{font-weight:700}.page-width[data-v-4def2e1e]{width:100%}.goods-hover-class[data-v-4def2e1e]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-4def2e1e]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-4def2e1e]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-4def2e1e]{width:100%}.u-hover-class[data-v-4def2e1e]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-4def2e1e]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-submit-checkbox[data-v-4def2e1e]{border:%?1?% solid;display:inline-block}.app-submit-checkbox.inactive[data-v-4def2e1e]{background:#fff}.app-submit-checkbox.round[data-v-4def2e1e]{border-radius:%?10000?%}.app-submit-checkbox.active[data-v-4def2e1e]{border:none;background-image:url("+a(i("d9d4"))+");background-size:100% 100%}body.?%PAGE?%[data-v-4def2e1e]{background:#f7f7f7}",""])},f0dd:function(t,e,i){"use strict";i.r(e);var a=i("2361"),o=i("5a20");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("afd5");var n=i("2877"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"26e8708a",null);e["default"]=r.exports},f624:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("2f62"),o=s(i("4e22"));function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(i,!0).forEach(function(e){c(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l={name:"app-coupon-pick",components:{AppSubmitCheckbox:o.default},props:{theme:{type:String,default:"a"},plugin:String,mchIndex:{type:Number,default:0},noCoupons:{type:Boolean,default:!1}},data:function(){return{couponType:1,loading:!1,list:null,cantUseList:null}},computed:r({},(0,a.mapState)({appImg:function(t){return t.mallConfig.__wxapp_img}}),{themeBgClass:function(){return this.theme.indexOf("gift")>=0?"".concat(this.theme," ").concat(this.theme,"-background"):"".concat(this.theme," ").concat(this.theme,"-m-back")},themeTextClass:function(){return this.theme.indexOf("gift")>=0?"".concat(this.theme," ").concat(this.theme,"-color"):"".concat(this.theme," ").concat(this.theme,"-m-text")}}),created:function(){this.$store.commit("orderSubmit/mutSetMchNoCouponStatusList",[]),this.loadData(),this.loadData(!0)},methods:{loadData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,this.$request({url:this.$api.order.usable_coupon_list,method:"post",data:{form_data:JSON.stringify(this.$store.state.orderSubmit.formData.list[this.mchIndex]),is_cant_use_list:e?1:0,sign:this.plugin}}).then(function(i){if(t.loading=!1,0===i.code)if(e)t.cantUseList=i.data.list;else{for(var a in i.data.list)i.data.list[a].checked=!1;t.list=i.data.list;var o=t.$store.getters["orderSubmit/getMchNoCouponStatusList"],s=t.$validation.isEmpty(t.list);t.$emit("update:noCoupons",s),o[t.mchIndex]=s,t.$store.commit("orderSubmit/mutSetMchNoCouponStatusList",o)}}).catch(function(){t.loading=!1})},handleCouponChange:function(t){var e=t.v,i=t.index;e?this.setData(this.list[i].id,i):this.setData(0,i)},setData:function(t,e){if(0===parseInt(t))this.list[e].checked=!1;else for(var i in this.list)this.list[i].checked=parseInt(e)===parseInt(i);var a=this.$store.state.orderSubmit.formData;a.list[this.mchIndex].user_coupon_id=t,this.$store.commit("orderSubmit/mutSetFormData",a),this.$emit("change")}}};e.default=l}}]);