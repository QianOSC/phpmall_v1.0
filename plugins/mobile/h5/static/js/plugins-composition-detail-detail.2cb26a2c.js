(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-composition-detail-detail"],{"05b0":function(t,i,o){i=t.exports=o("2350")(!1),i.push([t.i,".text-center[data-v-46318571]{text-align:center}.font-weight[data-v-46318571]{font-weight:700}.page-width[data-v-46318571]{width:100%}.goods-hover-class[data-v-46318571]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-46318571]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-46318571]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-46318571]{width:100%}.u-hover-class[data-v-46318571]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-46318571]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-composition .app-composition-goods[data-v-46318571]{width:%?288?%;height:%?140?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:%?24?%;position:relative}.app-composition .app-composition-goods.two uni-image[data-v-46318571]{position:absolute;width:%?140?%;height:%?140?%;border-radius:%?8?%;top:0}.app-composition .app-composition-goods.two uni-image[data-v-46318571]:first-of-type{left:0}.app-composition .app-composition-goods.two uni-image[data-v-46318571]:last-of-type{right:0}.app-composition .app-composition-goods.three uni-image[data-v-46318571]{position:absolute;width:%?140?%;height:%?66?%;border-radius:%?8?%}.app-composition .app-composition-goods.three uni-image[data-v-46318571]:first-of-type{left:0;top:0;height:%?140?%;width:%?140?%}.app-composition .app-composition-goods.three uni-image[data-v-46318571]:nth-child(2){top:0;right:0}.app-composition .app-composition-goods.three uni-image[data-v-46318571]:last-of-type{bottom:0;right:0}.app-composition .app-composition-goods.four uni-image[data-v-46318571]{position:absolute;width:%?66?%;height:%?66?%;border-radius:%?8?%}.app-composition .app-composition-goods.four uni-image[data-v-46318571]:first-of-type{left:0;top:0;height:%?140?%;width:%?140?%}.app-composition .app-composition-goods.four uni-image[data-v-46318571]:nth-child(2){top:0;right:0;width:%?140?%}.app-composition .app-composition-goods.four uni-image[data-v-46318571]:nth-child(3){right:%?74?%;bottom:0}.app-composition .app-composition-goods.four uni-image[data-v-46318571]:last-of-type{right:0;bottom:0}.app-composition .app-composition-goods.five uni-image[data-v-46318571]{position:absolute;width:%?66?%;height:%?66?%;border-radius:%?8?%}.app-composition .app-composition-goods.five uni-image[data-v-46318571]:first-of-type{left:0;top:0;height:%?140?%;width:%?140?%}.app-composition .app-composition-goods.five uni-image[data-v-46318571]:nth-child(2){top:0;right:%?74?%}.app-composition .app-composition-goods.five uni-image[data-v-46318571]:nth-child(3){right:0;top:0}.app-composition .app-composition-goods.five uni-image[data-v-46318571]:nth-child(4){right:%?74?%;bottom:0}.app-composition .app-composition-goods.five uni-image[data-v-46318571]:last-of-type{right:0;bottom:0}.app-composition .app-composition-right[data-v-46318571]{width:%?342?%}.app-composition .app-composition-info[data-v-46318571]{height:%?44?%;width:%?342?%}.app-composition .app-composition-info .app-composition-type[data-v-46318571]{font-size:%?22?%;display:block;margin:0 %?16?% 0 0}.app-composition .app-composition-info .app-composition-name[data-v-46318571]{height:%?44?%;line-height:%?44?%;width:%?260?%;font-size:%?28?%;color:#353535}.app-composition .app-composition-info .app-composition-name.long-name[data-v-46318571]{width:%?342?%}.app-composition .app-composition-type[data-v-46318571]{padding:%?2?% %?12?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border:%?2?% solid;border-radius:%?20?%;margin:%?14?% 0 0;font-size:%?22?%;display:inline-block}.app-composition .app-composition-price[data-v-46318571]{color:#999;font-size:%?24?%;margin:%?14?% 0 %?10?%}.app-composition .app-composition-price uni-text[data-v-46318571]{font-size:%?28?%}.app-composition .app-composition-discount[data-v-46318571]{color:#999;font-size:%?24?%}body.?%PAGE?%[data-v-46318571]{background:#f7f7f7}",""])},"0d11":function(t,i,o){"use strict";var e=o("740c"),s=o.n(e);s.a},1069:function(t,i,o){i=t.exports=o("2350")(!1),i.push([t.i,".text-center[data-v-55e3fda3]{text-align:center}.font-weight[data-v-55e3fda3]{font-weight:700}.page-width[data-v-55e3fda3]{width:100%}.goods-hover-class[data-v-55e3fda3]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-55e3fda3]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-55e3fda3]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-55e3fda3]{width:100%}.u-hover-class[data-v-55e3fda3]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-55e3fda3]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-list .app-item[data-v-55e3fda3]{background-color:#fff;margin:%?10?% %?24?%;border-radius:%?16?%;padding:%?24?%;padding-top:0;padding-left:0}.app-list .app-item .app-price[data-v-55e3fda3]{line-height:%?74?%;height:%?74?%;text-align:right;color:#353535;font-size:%?28?%}.app-list .app-item .app-price .max-discount[data-v-55e3fda3]{font-size:%?24?%;color:#f39800;margin-left:%?16?%}.app-list .app-item .app-item-title[data-v-55e3fda3]{padding-right:%?24?%;height:%?64?%;font-size:%?28?%;color:#353535;font-weight:700}.app-list .app-item .app-item-title .check-icon[data-v-55e3fda3]{padding:%?28?% %?20?% 0 %?24?%;width:%?72?%;height:%?64?%}.app-list .app-item .app-item-title .check-icon uni-image[data-v-55e3fda3]{height:%?32?%;width:%?32?%;border-radius:%?16?%;display:block}.app-list .app-item .app-item-title .item-type[data-v-55e3fda3]{margin-top:%?24?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:%?40?%;line-height:%?38?%;padding:0 %?12?%;border-radius:%?20?%;margin-right:%?16?%;border:%?2?% solid;font-weight:400}.app-list .app-item .app-item-title .item-name[data-v-55e3fda3]{margin-top:%?24?%;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.app-list .app-item .item-goods[data-v-55e3fda3]{margin-top:%?28?%;margin-left:%?76?%;padding-bottom:%?28?%;border-bottom:%?2?% solid #e2e2e2;position:relative}.app-list .app-item .item-goods .out-dialog[data-v-55e3fda3]{width:%?180?%;height:%?180?%;border-radius:%?16?%;position:absolute;top:0;left:0;z-index:10;background-color:rgba(0,0,0,.5)}.app-list .app-item .item-goods .out-dialog uni-image[data-v-55e3fda3]{width:%?180?%;height:%?180?%;border-radius:%?16?%}.app-list .app-item .item-goods .check-icon[data-v-55e3fda3]{position:absolute;left:%?-76?%;top:50%;margin-top:%?-52?%;padding:%?24?%;width:%?80?%;height:%?80?%}.app-list .app-item .item-goods .check-icon uni-image[data-v-55e3fda3]{height:%?32?%;width:%?32?%;border-radius:%?16?%;display:block}.app-list .app-item .item-goods .goods-img[data-v-55e3fda3]{height:%?180?%;width:%?180?%;border-radius:%?8?%;margin-right:%?24?%;position:relative}.app-list .app-item .item-goods .goods-info[data-v-55e3fda3]{font-size:%?28?%;color:#353535;position:relative}.app-list .app-item .item-goods .goods-info .item-good-name[data-v-55e3fda3]{width:%?336?%;max-height:%?90?%;line-height:%?42?%;word-break:break-all;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.app-list .app-item .item-goods .goods-info .item-good-num[data-v-55e3fda3]{position:absolute;right:0;top:0}.app-list .app-item .item-goods .goods-info .choose_price[data-v-55e3fda3]{font-size:%?28?%;margin-top:%?20?%}.app-list .app-item .item-goods .goods-info .item-good-attr[data-v-55e3fda3]{margin-top:%?20?%;background-color:#f7f7f7;width:%?398?%;display:inline-block;padding:%?8?% %?16?%;border-radius:%?8?%;position:relative}.app-list .app-item .item-goods .goods-info .item-good-attr .item-good-attr-text[data-v-55e3fda3]{width:%?314?%;line-height:%?32?%;max-height:%?62?%;color:#999}.app-list .app-item .item-goods .goods-info .item-good-attr .item-good-attr-arrow[data-v-55e3fda3]{position:absolute;right:%?16?%;top:50%;margin-top:%?-6?%;height:%?12?%;width:%?22?%}.app-list .app-item .item-goods[data-v-55e3fda3]:last-of-type{border-bottom:0}body.?%PAGE?%[data-v-55e3fda3]{background:#f7f7f7}",""])},1267:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAABlBMVEX09PTV1dUeYHV3AAAAFElEQVQoz2MY2aD+//8H+BgjGgAAMQANdT7AwNcAAAAASUVORK5CYII="},"1a19":function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=o("2f62"),s=a(o("b4bc"));function a(t){return t&&t.__esModule?t:{default:t}}function n(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),o.push.apply(o,e)}return o}function r(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?n(o,!0).forEach(function(i){c(t,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(o).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))})}return t}function c(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}var l={name:"app-index",props:{list:{type:Array},top:{type:Number,default:function(){return 388}},search:{type:Boolean,default:function(){return!1}},allCount:{type:Boolean,default:function(){return!1}},hidden:{type:Boolean,default:function(){return!0}},theme:String},data:function(){return{attrShow:0,goods:null,cartShow:!1,buyBool:!0,max_discount:"0.00",noAttrList:[],checked:null,total:0}},computed:r({themeObject:function(){return{back:this.theme+"-m-back "+this.theme,theme:this.theme,color:this.theme+"-m-text "+this.theme,mBtn:this.theme+"-m-gradient-btn "+this.theme,sBack:this.theme+"-s-back "+this.theme}}},(0,e.mapState)({appImg:function(t){return t.mallConfig.__wxapp_img.mall},appSetting:function(t){return t.mallConfig.mall.setting}})),components:{"u-attr":s.default},methods:{check:function(t){var i=t.item;this.checked=i},toDetail:function(t){uni.navigateTo({url:"/pages/goods/goods?id="+t})},buyClick:function(){var t=this,i=this.checked;t.list[t.index].goods_list.forEach(function(o){if(o.id==t.goods.id){for(var e in o.choose_attr=i,o.detail.selectAttr=i,i.attr_list)for(var s in o.attr_groups)if(o.attr_groups[s].attr_group_id==i.attr_list[e].attr_group_id)for(var a in o.attr_groups[s].attr_list)o.attr_groups[s].attr_list[a].checked=!1,o.attr_groups[s].attr_list[a].attr_id==i.attr_list[e].attr_id&&o.attr_groups[s].attr_list[a].attr_name==i.attr_list[e].attr_name&&(o.attr_groups[s].attr_list[a].checked=!0);2==t.list[t.index].type&&(o.choose_goods=!0,t.list[t.index].host_list[0].choose_goods=!0,t.list[t.index].host_list[0].opacity=.3),t.count(),t.$forceUpdate()}}),t.list[t.index].host_list.forEach(function(o){if(o.id==t.goods.id){for(var e in i.attr_list)for(var s in o.attr_groups)if(o.attr_groups[s].attr_group_id==i.attr_list[e].attr_group_id)for(var a in o.attr_groups[s].attr_list)o.attr_groups[s].attr_list[a].checked=!1,o.attr_groups[s].attr_list[a].attr_id==i.attr_list[e].attr_id&&o.attr_groups[s].attr_list[a].attr_name==i.attr_list[e].attr_name&&(o.attr_groups[s].attr_list[a].checked=!0);if(o.choose_attr=i,o.detail.selectAttr=i,o.choose_goods=!0,t.count(),t.$forceUpdate(),t.search)return t.$emit("search",o,1),!1}}),t.goods=null,t.checked=null},chooseAttr:function(t,i,o){console.log(t),this.goods=t,this.index=i,this.attrShow=Math.random()},choose:function(t,i){if(2==this.list[t].type){for(var o in this.list[t].choose=!this.list[t].choose,this.list[t].goods_list)this.list[t].goods_list[o].choose_goods=this.list[t].choose;this.count(),this.$forceUpdate(),this.search&&this.$emit("search",i)}},chooseGoods:function(t,i,o){this.list[i].goods_list[t].choose_goods=!this.list[i].goods_list[t].choose_goods;var e=!0;for(var s in this.list[i].goods_list)this.list[i].goods_list[s].choose_goods||(e=!1);this.list[i].choose=e,this.$forceUpdate(),this.$emit("updateList",this.list),this.count(),this.search&&this.$emit("search",o,1)},count:function(){var t=this;t.total=0,t.noAttrList=[],t.max_discount=0;var i=0;if(1==t.list[i].type){t.list[i].total_price=0;var o=!0;for(var e in t.list[i].goods_list)t.list[i].goods_list[e].choose_attr?t.list[i].goods_list[e].choose_attr.price>0&&(t.list[i].total_price+=+t.list[i].goods_list[e].choose_attr.price):o=!1,t.list[i].choose&&null==t.list[i].goods_list[e].choose_attr&&t.noAttrList.push(t.list[i].goods_list[e]);t.list[i].total_price<0&&(t.list[i].total_price=0),t.list[i].total_price=+t.list[i].total_price-+t.list[i].price,t.list[i].total_price<0&&(t.list[i].total_price=0),t.list[i].choose?t.list[i].total_price=t.list[i].total_price.toFixed(2):delete t.list[i].total_price,t.list[i].choose&&o&&(t.total+=+t.list[i].total_price)}else if(2==t.list[i].type){for(var s in t.list[i].total_price=0,t.list[i].host_list[0].choose_attr?(t.list[i].total_price=+t.list[i].host_list[0].choose_attr.price-+t.list[i].host_list[0].price,t.list[i].host_list[0].total_price=+t.list[i].host_list[0].choose_attr.price-+t.list[i].host_list[0].price,t.max_discount+=+t.list[i].host_list[0].price,t.list[i].host_list[0].total_price<0?t.list[i].host_list[0].total_price=0:t.list[i].host_list[0].total_price=+t.list[i].host_list[0].total_price.toFixed(2),t.total+=+t.list[i].host_list[0].total_price):t.noAttrList.push(t.list[i].host_list[0]),t.list[i].goods_list)t.list[i].goods_list[s].choose_goods&&t.list[i].goods_list[s].choose_attr&&(t.list[i].goods_list[s].total_price=+t.list[i].goods_list[s].choose_attr.price-+t.list[i].goods_list[s].price,t.max_discount+=+t.list[i].goods_list[s].price,t.list[i].goods_list[s].total_price<0?t.list[i].goods_list[s].total_price=0:t.list[i].goods_list[s].total_price=+t.list[i].goods_list[s].total_price.toFixed(2),t.total+=+t.list[i].goods_list[s].total_price,t.list[i].total_price>0&&(t.list[i].total_price+=+t.list[i].goods_list[s].total_price)),t.list[i].goods_list[s].choose_goods&&null==t.list[i].goods_list[s].choose_attr&&t.noAttrList.push(t.list[i].goods_list[s]);t.list[i].total_price<0&&(t.list[i].total_price=0),t.list[i].total_price=+t.list[i].total_price.toFixed(2),t.max_discount=+t.max_discount.toFixed(2)}t.total=t.total.toFixed(2),t.$emit("updateList",t.list),t.$emit("change",{total:t.total,max_discount:t.max_discount}),t.$emit("update",t.noAttrList)}},mounted:function(){var t=this,i=setInterval(function(){t.list.length>0&&(clearInterval(i),t.count())},500)}};i.default=l},"1c50":function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;o("2f62");var e={name:"app-composition",props:{item:{type:Object},large:Boolean,theme:String},data:function(){return{}},created:function(){},methods:{open:function(t){this.$emit("click",t)},toDetail:function(t){this.$emit("look",t)}}};i.default=e},"207b":function(t,i,o){var e=o("a80f");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=o("4f06").default;s("d5b25f82",e,!0,{sourceMap:!1,shadowMode:!1})},"21d3":function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=o("2f62"),s=n(o("8e53")),a=n(o("9495"));function n(t){return t&&t.__esModule?t:{default:t}}function r(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),o.push.apply(o,e)}return o}function c(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?r(o,!0).forEach(function(i){l(t,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(o).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))})}return t}function l(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}var d={data:function(){return{list:[],other:[],total:0,showNoAttr:!1,noAttrList:[],goods_id:"",max_discount:"0.00",page:2,hidden:!1,iphone_x:!1,noMore:!1,composition_id:"",loading:!1}},components:{"app-list":s.default,"app-composition":a.default},computed:c({},(0,e.mapGetters)("mallConfig",{getTheme:"getTheme"})),methods:{choose:function(t){this.composition_id=t.id,this.total="0.00",this.max_discount="0.00",this.getDetail()},toComposition:function(){uni.redirectTo({url:"/plugins/composition/index/index"})},toBuy:function(){var t=this,i=[],o=[{mch_id:0,composition_list:[]}];if(t.noAttrList.length>0)t.showNoAttr=!0;else{for(var e in t.list)if(i=[],t.list[e].choose){var s={composition_id:t.list[e].id,goods_list:[]};if(t.list[e].host_list.length>0){for(var a in t.list[e].host_list[0].choose_attr.attr_list)i.push({attr_id:t.list[e].host_list[0].choose_attr.attr_list[a].attr_id,attr_group_id:t.list[e].host_list[0].choose_attr.attr_list[a].attr_group_id});s.goods_list.push({id:t.list[e].host_list[0].goods_id,num:1,goods_attr_id:t.list[e].host_list[0].choose_attr.goods_attr_id,attr:[]})}for(var n in t.list[e].goods_list)if(t.list[e].goods_list[n].choose_attr&&t.list[e].goods_list[n].choose_attr.attr_list.length>0){for(var r in t.list[e].goods_list[n].choose_attr.attr_list)i.push({attr_id:t.list[e].goods_list[n].choose_attr.attr_list[r].attr_id,attr_group_id:t.list[e].goods_list[n].choose_attr.attr_list[r].attr_group_id});s.goods_list.push({id:t.list[e].goods_list[n].goods_id,num:1,goods_attr_id:t.list[e].goods_list[n].choose_attr.goods_attr_id,attr:i})}o[0].composition_list.push(s)}else{var c={composition_id:t.list[e].id,goods_list:[]};if(t.list[e].host_list.length>0&&t.list[e].host_list[0].choose_goods){for(var l in t.list[e].host_list[0].choose_attr.attr_list)i.push({attr_id:t.list[e].host_list[0].choose_attr.attr_list[l].attr_id,attr_group_id:t.list[e].host_list[0].choose_attr.attr_list[l].attr_group_id});c.goods_list.push({id:t.list[e].host_list[0].goods_id,num:1,goods_attr_id:t.list[e].host_list[0].choose_attr.goods_attr_id,attr:i})}for(var d in t.list[e].goods_list)if(t.list[e].goods_list[d].choose_goods&&t.list[e].goods_list[d].choose_attr.attr_list){for(var u in!1,t.list[e].goods_list[d].choose_attr.attr_list)i.push({attr_id:t.list[e].goods_list[d].choose_attr.attr_list[u].attr_id,attr_group_id:t.list[e].goods_list[d].choose_attr.attr_list[u].attr_group_id});c.goods_list.push({id:t.list[e].goods_list[d].goods_id,num:1,goods_attr_id:t.list[e].goods_list[d].choose_attr.goods_attr_id,attr:i})}c.goods_list.length>0&&o[0].composition_list.push(c)}if(0==o[0].composition_list.length)uni.showToast({title:"请选择套餐",icon:"none",duration:1e3});else{for(var p in o[0].composition_list)1==o[0].composition_list[p].goods_list.length&&o[0].composition_list.splice(p,1);if(0==o[0].composition_list.length)uni.showToast({title:"请选择搭配商品",icon:"none",duration:1e3});else{for(var h in o[0].goods_list=[],o[0].composition_list)for(var g in o[0].composition_list[h].goods_list)o[0].composition_list[h].goods_list[g].cart_id=0,o[0].goods_list.push(o[0].composition_list[h].goods_list[g]);var f="/pages/order-submit/order-submit?mch_list=".concat(JSON.stringify(o));f+="&preview_url=".concat(encodeURIComponent(this.$api.composition.order_preview),"&submit_url=").concat(encodeURIComponent(this.$api.composition.order_submit),"&plugin=composition"),this.$jump({open_type:"navigate",url:f})}}}},close:function(){this.showNoAttr=!1},updateList:function(t){this.list=t},update:function(t){this.noAttrList=t},getTotal:function(t){this.total=t.total,t.max_discount&&(this.max_discount=t.max_discount.toFixed(2))},getDetail:function(){var t=this;t.loading=!1,uni.showLoading({mask:!0,title:"加载中..."});var i={composition_id:t.composition_id};t.goods_id>0&&(i.goods_id=t.goods_id),t.$request({url:t.goods_id>0?t.$api.composition.detail:t.$api.composition.composition_detail,data:i}).then(function(i){if(t.loading=!0,uni.hideLoading(),0==i.code){for(var o in t.goods_id>0?(t.list=i.data.other_list,t.other=i.data.list):(t.list=[],t.list[0]=i.data.composition),t.other.length<4&&(t.noMore=!0),t.list)for(var e in t.list[o].choose=!1,t.list[o].goods_list)t.list[o].goods_list[e].choose_attr=null,1==t.list[o].goods_list[e].goods_attr.length&&(t.list[o].goods_list[e].choose_attr=t.list[o].goods_list[e].goods_attr[0],t.list[o].goods_list[e].choose_attr.number=1,t.list[o].goods_list[e].total_price=(+t.list[o].goods_list[e].choose_attr.price-+t.list[o].goods_list[e].price).toFixed(2)),2==t.list[o].type&&(t.list[o].host_list[0].choose_attr=null,1==t.list[o].host_list[0].goods_attr.length&&(t.list[o].host_list[0].choose_attr=t.list[o].host_list[0].goods_attr[0],t.list[o].host_list[0].choose_attr.number=1,t.list[o].host_list[0].total_price=(+t.list[o].host_list[0].choose_attr.price-+t.list[o].host_list[0].price).toFixed(2)),t.list[o].goods_list[e].choose_goods=!1,t.list[o].host_list[0].choose_goods=!0,t.list[o].host_list[0].opacity=.3);1==t.list[0].type&&(t.list[0].choose=!0,t.max_discount=t.list[0].max_discount)}else uni.hideLoading(),uni.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(i){t.loading=!0,uni.hideLoading(),t.$hideLoading()})},getMore:function(){var t=this,i=this;uni.showLoading({mask:!0,title:"加载中"}),i.$request({url:i.$api.composition.detail,data:{goods_id:i.goods_id,composition_id:i.composition_id,page:i.page}}).then(function(o){if(uni.hideLoading(),0==o.code){if(0==o.data.list.length)return t.noMore=!0,!1;for(var e in i.page++,i.other=i.other.concat(o.data.list),i.list)for(var s in i.list[e].choose=!1,i.list[e].goods_list)i.list[e].goods_list[s].choose_attr=null,2==i.list[e].type&&(i.list[e].host_list[0].choose_attr=null,i.list[e].host_list[0].opacity=1,i.list[e].goods_list[s].choose_goods=!1,i.list[e].host_list[0].choose_goods=!1)}else uni.hideLoading(),uni.showToast({title:o.msg,icon:"none",duration:1e3})}).catch(function(t){i.$hideLoading()})}},onReachBottom:function(){this.noMore||this.getMore()},onLoad:function(t){var i=this;uni.getSystemInfo({success:function(t){(t.model.indexOf("iPhone X")>-1||t.model.indexOf("iPhone 11")>-1||t.model.indexOf("iPhone11")>-1||t.model.indexOf("iPhone12")>-1||t.model.indexOf("Unknown Device")>-1)&&(i.iphone_x=!0)}}),this.goods_id=t.goods_id>0?t.goods_id:"",this.composition_id=t.composition_id,i.getDetail()}};i.default=d},"26e3":function(t,i,o){"use strict";var e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("v-uni-view",{staticClass:"u-attr"},[o("v-uni-view",{on:{click:function(i){i=t.$handleEvent(i),t.turnOn(i)}}},[t._t("btn")],2),o("u-popup",{attrs:{mode:"bottom","border-radius":"14",safeAreaInsetBottom:!0},on:{close:function(i){i=t.$handleEvent(i),t.close(i)}},model:{value:t.newValue,callback:function(i){t.newValue=i},expression:"newValue"}},[o("v-uni-view",{staticClass:"u-model",on:{touchmove:function(i){i.stopPropagation(),i.preventDefault(),i=t.$handleEvent(i)}}},[o("v-uni-view",{staticClass:"u-top dir-left-nowrap u-border-box"},[o("v-uni-view",{staticClass:"u-pic u-border-box",on:{click:function(i){i=t.$handleEvent(i),t.clickImg(t.imgUrl)}}},[o("v-uni-image",{staticClass:"u-img",attrs:{src:t.imgUrl}})],1),o("v-uni-view",{staticClass:"u-info"},[o("v-uni-view",{class:["cross-center","dir-left-nowrap",t.themeObject.color]},[o("v-uni-view",{staticClass:"dir-left-nowrap"},[t._t("priceBefore"),o("v-uni-view",{staticClass:"u-price"},[t.is_show_price?o("app-price",{attrs:{theme:t.themeObject.theme,userTheme:t.themeObject.userTheme,sign:t.sign,price:t.sellPrice,"default-price":t.goods.price}}):t._e()],1)],2),1===t.goods.level_show?o("app-member-mark",{attrs:{theme:t.themeObject}}):t._e()],1),o("v-uni-view",{staticClass:"u-stock"},[t._v("库存："+t._s(t.stock))])],1),o("v-uni-view",{staticClass:"u-close-image",on:{click:function(i){i=t.$handleEvent(i),t.close(i)}}},[o("v-uni-image",{staticClass:"bd-close-image u-border-box",attrs:{src:"/static/image/icon/icon-close.png"}})],1)],1),o("v-uni-view",{staticClass:"u-center"},[o("v-uni-scroll-view",{staticClass:"u-scroll-view",attrs:{"scroll-y":"true"}},[t._t("extra"),t._l(t.newGroup,function(i,e){return"goods"===t.goods.type?o("v-uni-view",{key:e,staticClass:"u-attr-group u-border-box"},[o("v-uni-view",{staticClass:"u-group-name u-text"},[t._v(t._s(i.attr_group_name))]),o("v-uni-view",{staticClass:"dir-left-wrap"},t._l(i.attr_list,function(e,s){return o("v-uni-view",{key:s,class:["u-group-item",e.select?"u-checked "+t.themeObject.back:"u-unchecked",e.num_0?"u-attr_num_0":""],on:{click:function(o){o=t.$handleEvent(o),t.storeAttr(e.attr_id,i.attr_group_id,e.num_0)}}},[t._v(t._s(e.attr_name))])}),1)],1):t._e()}),t.is_choose_number?o("v-uni-view",{staticClass:"u-number dir-left-nowrap main-between cross-center"},[o("v-uni-view",{staticClass:"u-text"},[t._v("数量")]),o("v-uni-view",{staticClass:"dir-left-nowrap u-input-box"},[o("v-uni-view",{class:[t.number<=1?"u-reduced-1":"u-reduced-0","u-number-btn"],on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.numberSub(i)}}}),o("v-uni-input",{staticClass:"u-input",attrs:{type:"number"},on:{blur:function(i){i=t.$handleEvent(i),t.numberBlur(i)}},model:{value:t.number,callback:function(i){t.number=i},expression:"number"}}),o("v-uni-view",{staticClass:"u-number-btn u-added-1",on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.numberAdd(i)}}})],1)],1):t._e()],2)],1),o("v-uni-view",{staticClass:"u-bottom dir-left-nowrap"},[t.is_show_left&&("goods"===t.goods.type||t.is_must_left)?o("v-uni-view",{staticClass:"box-grow-1",class:[t.cartClass,t.is_show_right?"bd-btn-left":""],on:{click:function(i){i=t.$handleEvent(i),t.leftSubmit(i)}}},[t._t("left_slot"),t.$slots.left_slot?t._e():[t._v(t._s(t.leftText))]],2):t._e(),t.is_show_right?o("v-uni-view",{staticClass:"box-grow-1",class:[t.$slots.right_slot?"":t.themeObject.mBtn+" u-btn u-btn-color",!t.is_show_left||"goods"!==t.goods.type&&!t.is_must_left?"":"bd-btn-right"],on:{click:function(i){i=t.$handleEvent(i),t.rightSubmit(i)}}},[t._t("right_slot"),t.$slots.right_slot?t._e():[t._v(t._s(t.rightText))]],2):t._e(),t.$slots.right?[t._t("right")]:t._e()],2)],1)],1)],1)},s=[];o.d(i,"a",function(){return e}),o.d(i,"b",function(){return s})},"2db6":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAABlBMVEX39/eZmZmXx6vxAAAAFElEQVQoz2MY2aD+//8H+BgjGgAAMQANdT7AwNcAAAAASUVORK5CYII="},3213:function(t,i,o){"use strict";var e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("v-uni-view",{staticClass:"app-composition dir-left-nowrap"},[o("v-uni-view",{on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.open(i)}}},[1==t.item.type?o("v-uni-view",{staticClass:"app-composition-goods",class:2==t.item.goods_list.length?"two":3==t.item.goods_list.length?"three":4==t.item.goods_list.length?"four":"five"},t._l(t.item.goods_list,function(t){return o("v-uni-image",{key:t.id,attrs:{mode:"aspectFill",src:t.cover_pic}})}),1):t._e(),2==t.item.type?o("v-uni-view",{staticClass:"app-composition-goods",class:1==t.item.goods_list.length?"two":2==t.item.goods_list.length?"three":3==t.item.goods_list.length?"four":"five"},[t._l(t.item.host_list,function(t){return o("v-uni-image",{key:t.id,attrs:{mode:"aspectFill",src:t.cover_pic}})}),t._l(t.item.goods_list,function(t){return o("v-uni-image",{key:t.id,attrs:{mode:"aspectFill",src:t.cover_pic}})})],2):t._e(),t._t("default")],2),o("v-uni-view",{staticClass:"app-composition-right",on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.toDetail(i)}}},[o("v-uni-view",{staticClass:"dir-left-nowrap cross-center app-composition-info"},[1!=t.item.type||t.large?t._e():o("v-uni-view",{staticClass:"app-composition-type",class:t.theme+"-m-text "+t.theme},[t._v("固定")]),2!=t.item.type||t.large?t._e():o("v-uni-view",{staticClass:"app-composition-type",class:t.theme+"-m-text "+t.theme},[t._v("搭配")]),o("v-uni-view",{staticClass:"app-composition-name t-omit",class:t.large?"long-name":""},[t._v(t._s(t.item.name))])],1),1==t.item.type&&t.large?o("v-uni-view",{staticClass:"app-composition-type",class:t.theme+"-m-text "+t.theme},[t._v("固定套餐")]):t._e(),2==t.item.type&&t.large?o("v-uni-view",{staticClass:"app-composition-type",class:t.theme+"-m-text "+t.theme},[t._v("搭配套餐")]):t._e(),o("v-uni-view",{staticClass:"app-composition-price"},[t._v("套餐价"),o("v-uni-text",{class:t.theme+"-m-text "+t.theme},[t._v("￥"+t._s(t.item.min_composition_price))])],1),o("v-uni-view",{staticClass:"app-composition-discount"},[t._v("最多可省"),o("v-uni-text",[t._v("￥"+t._s(t.item.max_discount))])],1)],1)],1)},s=[];o.d(i,"a",function(){return e}),o.d(i,"b",function(){return s})},"381c":function(t,i,o){"use strict";o.r(i);var e=o("c83f"),s=o("af59");for(var a in s)"default"!==a&&function(t){o.d(i,t,function(){return s[t]})}(a);o("0d11");var n=o("2877"),r=Object(n["a"])(s["default"],e["a"],e["b"],!1,null,"45f5c799",null);i["default"]=r.exports},"4781b":function(t,i,o){"use strict";var e=o("47f8"),s=o.n(e);s.a},"47f8":function(t,i,o){var e=o("1069");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=o("4f06").default;s("4b8e1dc4",e,!0,{sourceMap:!1,shadowMode:!1})},"49af":function(t,i,o){"use strict";o.r(i);var e=o("1c50"),s=o.n(e);for(var a in e)"default"!==a&&function(t){o.d(i,t,function(){return e[t]})}(a);i["default"]=s.a},"54f8":function(t,i,o){"use strict";o.r(i);var e=o("1a19"),s=o.n(e);for(var a in e)"default"!==a&&function(t){o.d(i,t,function(){return e[t]})}(a);i["default"]=s.a},"5cc9":function(t,i,o){"use strict";var e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("v-uni-view",[o("v-uni-view",{staticClass:"app-list",style:{"margin-top":t.top+"rpx"}},t._l(t.list,function(i,e){return o("v-uni-view",{key:i.id,staticClass:"app-item"},[o("v-uni-view",{staticClass:"dir-left-nowrap cross-center app-item-title"},[o("v-uni-view",{staticClass:"check-icon",on:{click:function(o){o=t.$handleEvent(o),t.choose(e,i)}}},[i.choose?o("v-uni-image",{class:t.theme+"-m-back "+t.theme,style:{opacity:1==i.type?"0.3":"1"},attrs:{src:"/static/image/icon/icon-checkbox-checked.png"}}):o("v-uni-image",{attrs:{src:"/static/image/icon/icon-uncheck.png"}})],1),o("v-uni-view",{class:t.theme+"-m-text item-type "+t.theme},[t._v(t._s(i.type_text))]),o("v-uni-view",{staticClass:"item-name"},[t._v(t._s(i.name))])],1),t._l(i.host_list,function(s){return o("v-uni-view",{key:s.id,staticClass:"item-goods dir-left-nowrap"},[o("v-uni-view",{staticClass:"check-icon"},[o("v-uni-image",{class:t.theme+"-m-back "+t.theme,style:{opacity:""+s.opacity},attrs:{src:"/static/image/icon/icon-checkbox-checked.png"}})],1),o("v-uni-image",{staticClass:"goods-img",attrs:{src:s.cover_pic},on:{click:function(i){i=t.$handleEvent(i),t.toDetail(s.goods_id)}}}),0==s.stock||0==i.stock?o("v-uni-view",{staticClass:"out-dialog"},[o("v-uni-image",{attrs:{src:"1"==t.appSetting.is_use_stock?t.appImg.plugins_out:t.appSetting.sell_out_pic}})],1):t._e(),o("v-uni-view",{staticClass:"dir-top-nowrap goods-info"},[o("v-uni-view",{staticClass:"item-good-name"},[t._v(t._s(s.name))]),o("v-uni-view",{staticClass:"item-good-num"},[t._v("x1")]),s.choose_attr?o("v-uni-view",{staticClass:"item-good-attr",on:{click:function(i){i=t.$handleEvent(i),t.chooseAttr(s,e)}}},[o("v-uni-view",{staticClass:"item-good-attr-text t-omit-two"},t._l(s.choose_attr.attr_list,function(i){return o("v-uni-text",{key:i.attr_id},[t._v(t._s(i.attr_group_name)+":"+t._s(i.attr_name))])}),1),o("v-uni-image",{staticClass:"item-good-attr-arrow",attrs:{src:"/static/image/icon/bottom.png"}})],1):o("v-uni-view",{staticClass:"item-good-attr",on:{click:function(i){i=t.$handleEvent(i),t.chooseAttr(s,e)}}},[o("v-uni-view",{staticClass:"item-good-attr-text t-omit-two"},[t._v("未选择")]),o("v-uni-image",{staticClass:"item-good-attr-arrow",attrs:{src:"/static/image/icon/bottom.png"}})],1),2==i.type&&s.choose_attr?o("v-uni-view",{class:t.theme+"-m-text choose_price "+t.theme},[t._v("￥"+t._s(s.total_price))]):t._e()],1)],1)}),t._l(i.goods_list,function(s,a){return o("v-uni-view",{key:s.id,staticClass:"item-goods dir-left-nowrap"},[2==i.type?o("v-uni-view",{staticClass:"check-icon",on:{click:function(i){i=t.$handleEvent(i),t.chooseGoods(a,e,s)}}},[s.choose_goods?o("v-uni-image",{class:t.theme+"-m-back "+t.theme,attrs:{src:"/static/image/icon/icon-checkbox-checked.png"}}):o("v-uni-image",{attrs:{src:"/static/image/icon/icon-uncheck.png"}})],1):t._e(),o("v-uni-image",{staticClass:"goods-img",attrs:{src:s.cover_pic},on:{click:function(i){i=t.$handleEvent(i),t.toDetail(s.goods_id)}}}),0==s.stock||0==i.stock?o("v-uni-view",{staticClass:"out-dialog"},[o("v-uni-image",{attrs:{src:"1"==t.appSetting.is_use_stock?t.appImg.plugins_out:t.appSetting.sell_out_pic}})],1):t._e(),o("v-uni-view",{staticClass:"dir-top-nowrap goods-info"},[o("v-uni-view",{staticClass:"item-good-name"},[t._v(t._s(s.name))]),o("v-uni-view",{staticClass:"item-good-num"},[t._v("x1")]),s.choose_attr?o("v-uni-view",{staticClass:"item-good-attr",on:{click:function(i){i=t.$handleEvent(i),t.chooseAttr(s,e)}}},[o("v-uni-view",{staticClass:"item-good-attr-text t-omit-two"},t._l(s.choose_attr.attr_list,function(i,e){return o("v-uni-text",{key:i.attr_id},[e>0?o("v-uni-text",[t._v(",")]):t._e(),o("v-uni-text",[t._v(t._s(i.attr_group_name)+":"+t._s(i.attr_name))])],1)}),1),o("v-uni-image",{staticClass:"item-good-attr-arrow",attrs:{src:"/static/image/icon/bottom.png"}})],1):o("v-uni-view",{staticClass:"item-good-attr",on:{click:function(i){i=t.$handleEvent(i),t.chooseAttr(s,e)}}},[o("v-uni-view",{staticClass:"item-good-attr-text t-omit-two"},[t._v("未选择")]),o("v-uni-image",{staticClass:"item-good-attr-arrow",attrs:{src:"/static/image/icon/bottom.png"}})],1),2==i.type&&s.choose_attr?o("v-uni-view",{class:t.theme+"-m-text choose_price "+t.theme},[t._v("￥"+t._s(s.total_price))]):t._e()],1)],1)}),o("v-uni-view",{staticClass:"app-price"},[i.total_price&&t.hidden?[o("v-uni-text",[t._v("套餐价")]),o("v-uni-text",{class:t.theme+"-m-text "+t.theme},[t._v("￥"+t._s(i.total_price>-.01?i.total_price:"0.00"))])]:t._e()],2)],2)}),1),t.goods?o("u-attr",{attrs:{goods:t.goods,rightText:"确定",is_show_left:t.cartShow,is_choose_number:t.cartShow,"theme-object":t.themeObject,checked:t.checked,"right-func":!0},on:{check:function(i){i=t.$handleEvent(i),t.check(i)},rightFunc:function(i){i=t.$handleEvent(i),t.buyClick(i)}},model:{value:t.attrShow,callback:function(i){t.attrShow=i},expression:"attrShow"}}):t._e()],1)},s=[];o.d(i,"a",function(){return e}),o.d(i,"b",function(){return s})},"62bb":function(t,i,o){var e=o("05b0");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=o("4f06").default;s("121375f0",e,!0,{sourceMap:!1,shadowMode:!1})},"740c":function(t,i,o){var e=o("df2c");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=o("4f06").default;s("a3f45418",e,!0,{sourceMap:!1,shadowMode:!1})},"8e53":function(t,i,o){"use strict";o.r(i);var e=o("5cc9"),s=o("54f8");for(var a in s)"default"!==a&&function(t){o.d(i,t,function(){return s[t]})}(a);o("4781b");var n=o("2877"),r=Object(n["a"])(s["default"],e["a"],e["b"],!1,null,"55e3fda3",null);i["default"]=r.exports},9495:function(t,i,o){"use strict";o.r(i);var e=o("3213"),s=o("49af");for(var a in s)"default"!==a&&function(t){o.d(i,t,function(){return s[t]})}(a);o("bf5a");var n=o("2877"),r=Object(n["a"])(s["default"],e["a"],e["b"],!1,null,"46318571",null);i["default"]=r.exports},a80f:function(t,i,o){var e=o("b041");i=t.exports=o("2350")(!1),i.push([t.i,".u-model[data-v-d14666b4]{width:%?750?%}.u-top[data-v-d14666b4]{margin:0 %?24?%;border-bottom:%?1?% solid #e2e2e2;height:%?140?%}.u-close-image[data-v-d14666b4]{width:%?54?%;height:%?78?%;padding:%?24?% 0 %?24?% %?24?%;margin-left:%?24?%}.bd-close-image[data-v-d14666b4]{width:%?30?%;height:%?30?%}.u-pic[data-v-d14666b4]{width:%?200?%;height:%?200?%;padding:%?4?%;border-radius:%?8?%;position:relative;top:%?-64?%;background-color:#fff}.u-img[data-v-d14666b4]{width:%?192?%;height:%?192?%;background-color:#fff}.u-info[data-v-d14666b4]{width:%?424?%;height:%?136?%;padding:%?45?% 0 0 %?24?%}.u-scroll-view[data-v-d14666b4]{width:100%;max-height:calc(80vh - %?154?%)}.u-attr-group[data-v-d14666b4]{margin:%?24?% %?32?% 0 %?32?%;border-bottom:%?1?% solid #e2e2e2}.u-number[data-v-d14666b4]{height:%?124?%;margin:0 %?32?%}.u-group-name[data-v-d14666b4]{margin-bottom:%?20?%}.u-group-item[data-v-d14666b4]{padding:%?15?% %?24?%;border-radius:%?8?%;margin:0 %?20?% %?20?% 0;font-size:%?26?%}.u-checked[data-v-d14666b4]{color:#fff}.u-unchecked[data-v-d14666b4]{background-color:#f2f2f2;color:#353535}.u-attr_num_0[data-v-d14666b4]{background-color:#f7f7f7;color:#cdcdcd}.u-stock[data-v-d14666b4]{font-size:%?24?%;color:#999}.u-price[data-v-d14666b4]{margin-right:%?12?%}.u-input[data-v-d14666b4]{width:%?88?%;height:%?60?%;background-color:#f7f7f7;font-size:%?20?%;color:#353535;text-align:center}.u-input-box[data-v-d14666b4]{width:%?218?%}.u-number-btn[data-v-d14666b4]{height:%?60?%;width:%?60?%;background-repeat:no-repeat;background-size:100% 100%;background-position:50%}.u-number-btn[data-v-d14666b4]:first-child{margin-right:%?5?%}.u-number-btn[data-v-d14666b4]:last-child{margin-left:%?5?%}.u-reduced-1[data-v-d14666b4]{background-image:url("+e(o("1267"))+")}.u-reduced-0[data-v-d14666b4]{background-image:url("+e(o("2db6"))+")}.u-added-1[data-v-d14666b4]{background-image:url("+e(o("d3fe"))+")}.u-text[data-v-d14666b4]{font-size:%?26?%;color:#666}.u-bottom[data-v-d14666b4]{height:%?110?%;width:%?750?%;padding:%?20?% %?24?%}.u-btn[data-v-d14666b4]{text-align:center;line-height:%?70?%;border-radius:%?35?%;font-size:%?26?%;width:calc(50% - %?10?%)}.bd-btn-left[data-v-d14666b4]{margin-right:%?10?%\n    /*border-top-right-radius: 0;*/\n    /*border-bottom-right-radius: 0;*/}.bd-btn-right[data-v-d14666b4]{margin-left:%?10?%\n    /*border-top-left-radius: 0;*/\n    /*border-bottom-left-radius: 0;*/}.u-btn-color[data-v-d14666b4]{color:#fff}",""])},af59:function(t,i,o){"use strict";o.r(i);var e=o("21d3"),s=o.n(e);for(var a in e)"default"!==a&&function(t){o.d(i,t,function(){return e[t]})}(a);i["default"]=s.a},b4bc:function(t,i,o){"use strict";o.r(i);var e=o("26e3"),s=o("f066");for(var a in s)"default"!==a&&function(t){o.d(i,t,function(){return s[t]})}(a);o("b5b3");var n=o("2877"),r=Object(n["a"])(s["default"],e["a"],e["b"],!1,null,"d14666b4",null);i["default"]=r.exports},b5b3:function(t,i,o){"use strict";var e=o("207b"),s=o.n(e);s.a},bf5a:function(t,i,o){"use strict";var e=o("62bb"),s=o.n(e);s.a},c83f:function(t,i,o){"use strict";var e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("app-layout",[t.loading?o("app-list",{attrs:{hidden:!1,top:0,theme:t.getTheme,list:t.list},on:{update:function(i){i=t.$handleEvent(i),t.update(i)},change:function(i){i=t.$handleEvent(i),t.getTotal(i)},updateList:function(i){i=t.$handleEvent(i),t.updateList(i)}}}):t._e(),t.other.length>0?o("v-uni-view",{staticClass:"list"},[o("v-uni-view",{staticClass:"title"},[t._v("其他套餐")]),t._l(t.other,function(i,e){return o("v-uni-view",{key:e,staticClass:"item dir-left-nowrap"},[o("app-composition",{attrs:{theme:t.getTheme,item:i},on:{click:function(o){o=t.$handleEvent(o),t.choose(i)},look:function(o){o=t.$handleEvent(o),t.choose(i)}}})],1)})],2):t._e(),t.list.length>0?o("v-uni-view",{class:["bottom-space",t.iphone_x?"iphone_x":""]}):t._e(),t.list.length>0?o("v-uni-view",{class:["bottom","main-between","cross-center",t.iphone_x?"iphone_x":""]},[o("v-uni-view",[o("v-uni-view",{staticClass:"dir-left-nowrap cross-center"},[o("v-uni-view",[t._v("总计")]),o("v-uni-view",{staticClass:"total-price",class:t.getTheme+"-m-text "+t.getTheme},[t._v("￥"+t._s(0==t.total?"0.00":t.total))])],1),o("v-uni-view",{staticClass:"discount",class:t.getTheme+"-m-text "+t.getTheme},[t._v("已省￥"+t._s(t.max_discount))])],1),o("v-uni-view",{staticClass:"submit-btn",class:t.getTheme+"-m-back "+t.getTheme,on:{click:function(i){i=t.$handleEvent(i),t.toBuy(i)}}},[t._v("立即购买")])],1):t._e(),t.showNoAttr?o("v-uni-view",{staticClass:"dialog-bg"},[o("v-uni-view",{staticClass:"dialog"},[o("v-uni-view",{staticClass:"dialog-title"},[o("v-uni-view",{staticClass:"dialog-big-title"},[t._v("以下商品未选择规格")]),o("v-uni-view",[t._v("请选择规格后购买")])],1),o("v-uni-view",{class:[t.noAttrList.length>4?"dir-left-wrap":"main-center","dialog-goods-list"]},t._l(t.noAttrList,function(t,i){return o("v-uni-view",{key:i,staticClass:"dialog-goods"},[o("v-uni-image",{attrs:{src:t.cover_pic}})],1)}),1),o("v-uni-view",{staticClass:"dialog-close",class:t.getTheme+"-m-text "+t.getTheme,on:{click:function(i){i=t.$handleEvent(i),t.close(i)}}},[t._v("我知道了")])],1)],1):t._e(),0==t.list.length&&t.loading?o("v-uni-view",{staticClass:"no-tip"},[o("v-uni-image",{attrs:{src:"../image/pull-off.png"}}),o("v-uni-view",[t._v("您选购的套餐已下架")]),o("v-uni-view",{staticClass:"to-composition",class:t.getTheme+"-m-back "+t.getTheme,on:{click:function(i){i=t.$handleEvent(i),t.toComposition(i)}}},[t._v("逛逛套餐专区")])],1):t._e()],1)},s=[];o.d(i,"a",function(){return e}),o.d(i,"b",function(){return s})},d3fe:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAABlBMVEX39/eZmZmXx6vxAAAAGklEQVQoz2MYzICf5oz6//8f4GHQ3hmDGQAAjcAOv+IPUVgAAAAASUVORK5CYII="},df2c:function(t,i,o){i=t.exports=o("2350")(!1),i.push([t.i,".text-center[data-v-45f5c799]{text-align:center}.font-weight[data-v-45f5c799]{font-weight:700}.page-width[data-v-45f5c799]{width:100%}.goods-hover-class[data-v-45f5c799]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-45f5c799]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-45f5c799]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-45f5c799]{width:100%}.u-hover-class[data-v-45f5c799]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-45f5c799]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.no-tip[data-v-45f5c799]{position:fixed;top:%?120?%;left:0;right:0;margin:0 auto;color:#666;font-size:%?24?%;width:%?240?%;text-align:center}.no-tip uni-image[data-v-45f5c799]{height:%?240?%;width:%?240?%;margin-bottom:%?20?%}.no-tip .to-composition[data-v-45f5c799]{border-radius:%?33?%;width:%?246?%;text-align:center;height:%?66?%;line-height:%?66?%;margin-top:%?38?%;color:#fff}.list[data-v-45f5c799]{padding:%?24?%}.list .title[data-v-45f5c799]{font-size:%?28?%;color:#353535}.list .item[data-v-45f5c799]{margin-top:%?20?%;padding:%?24?%;border-radius:%?16?%;background-color:#fff}.dialog-bg[data-v-45f5c799]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);z-index:202}.dialog-bg .dialog[data-v-45f5c799]{width:%?630?%;margin:%?260?% auto 0;background-color:#fff;padding-top:%?40?%;border-radius:%?16?%}.dialog-bg .dialog .dialog-title[data-v-45f5c799]{text-align:center;font-size:%?26?%;color:#999}.dialog-bg .dialog .dialog-title .dialog-big-title[data-v-45f5c799]{font-size:%?32?%;color:#353535;margin-bottom:%?10?%}.dialog-bg .dialog .dialog-goods-list[data-v-45f5c799]{padding:0 %?65?%;margin:%?26?% 0 %?48?%}.dialog-bg .dialog .dialog-goods-list .dialog-goods[data-v-45f5c799]{width:%?80?%;height:%?80?%;border-radius:%?8?%;margin:%?10?%}.dialog-bg .dialog .dialog-goods-list .dialog-goods uni-image[data-v-45f5c799]{border-radius:%?8?%;width:%?80?%;height:%?80?%}.dialog-bg .dialog .dialog-close[data-v-45f5c799]{width:%?630?%;border-top:%?2?% solid #e2e2e2;font-size:%?32?%;text-align:center;padding:%?25?% 0}.bottom[data-v-45f5c799]{width:100%;height:%?120?%;position:fixed;bottom:0;left:0;z-index:30;background-color:#fff;border-top:%?2?% solid #e2e2e2;font-size:%?24?%;color:#353535;padding:0 %?20?%}.bottom.iphone_x[data-v-45f5c799]{height:%?150?%;padding-bottom:%?50?%}.bottom .total-price[data-v-45f5c799]{font-size:%?36?%;margin-left:%?8?%}.bottom .submit-btn[data-v-45f5c799]{width:%?222?%;height:%?78?%;border-radius:%?39?%;color:#fff;font-size:%?32?%;line-height:%?78?%;text-align:center}.bottom .discount[data-v-45f5c799]{font-size:%?24?%}.bottom-space[data-v-45f5c799]{height:%?110?%}.bottom-space.iphone_x[data-v-45f5c799]{height:%?160?%}body.?%PAGE?%[data-v-45f5c799]{background:#f7f7f7}",""])},e40d:function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=r(o("d55a")),s=r(o("6c9f")),a=r(o("1ed7")),n=o("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function c(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),o.push.apply(o,e)}return o}function l(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?c(o,!0).forEach(function(i){d(t,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):c(o).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))})}return t}function d(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}var u={name:"u-attr",props:{value:{type:[Boolean,Number]},goods:{type:Object,default:function(){return{}},required:!0},themeObject:{type:Object},checked:{type:Object},is_show_price:{type:Boolean,default:!0},is_show_left:{type:Boolean,default:!0},is_must_left:{type:Boolean,default:!1},is_show_right:{type:Boolean,default:!0},is_choose_number:{type:Boolean,default:!0},leftText:{type:String,default:"加入购物车"},rightText:{type:String,default:"立即购买"},leftFunc:{type:Boolean},rightFunc:{type:Boolean},sign:{type:String},again:{type:Number},attentionSign:{type:String}},data:function(){return{newValue:!1,picUrl:null,newGroup:[],number:1}},created:function(){"community"==this.sign&&(this.number=1)},methods:{close:function(){this.$emit("input",!1)},turnOn:function(){this.$emit("input",!0)},inArray:function(t,i){return i.some(function(i){return t===i})},identifier:function(t,i,o){var e=this;t.forEach(function(t){t.attr_list.forEach(function(s){var a="".concat(t.attr_group_id,"-").concat(s.attr_id);e.inArray(a,i)&&!e.inArray(a,o)?s.num_0=!0:s.num_0=!1})})},selectCheck:function(t,i,o){var e=this;t.forEach(function(t){var s=[],a=0;t.attr_list.forEach(function(t){var i="".concat(t.attr_group_id,"-").concat(t.attr_id);e.inArray(i,o)||(a+=1,s.push(i))}),0===t.stock&&a<=1&&Array.prototype.push.apply(i,s),0===a&&e.$emit("check",{item:t,number:1})})},storeAttr:function(t,i,o){var e=this;if(!0!==o){var s=this.newGroup,a=this.copyAttr,n=[];s.forEach(function(o,s){var a=o.attr_list;a.forEach(function(a){o.attr_group_id===i&&(a.attr_id===t?!0===a.select?a.select=!1:a.select=!0:a.select=!1),!0===a.select&&(n.push("".concat(o.attr_group_id,"-").concat(a.attr_id)),0===s&&(e.picUrl=a.pic_url))})});var r=[];this.selectCheck(a,r,n),this.$nextTick(function(){e.number>e.stock&&(e.number=e.stock)}),this.identifier(s,r,n),n.length!==s.length&&this.$emit("check",{item:null,number:1})}},firstSelect:function(){var t=this;if(this.copyGroup&&this.copyAttr){var i=this.copyGroup,o=this.copyAttr,e=i.length,s=[];o.forEach(function(o){var a=o.attr_list;a.forEach(function(a){var n=a.attr_group_id;i.forEach(function(r){if(n===r.attr_group_id){var c=r.attr_list;c.forEach(function(n){n.attr_id===a.attr_id&&o.stock>0&&e>0&&(n.select=!0,s.push("".concat(r.attr_group_id,"-").concat(n.attr_id)),e===i.length&&(t.picUrl=n.pic_url),e--)})}})})});var a=[];this.selectCheck(o,a,s),this.identifier(i,a,s),this.newGroup=i}},numberBlur:function(t){var i=parseInt(t.detail.value);i||(i=1),i>this.stock&&(i=this.stock,uni.showToast({title:"库存不足",icon:"none"})),this.number=i},numberSub:function(){var t=this.number;t>1&&(t--,this.number=t)},numberAdd:function(){var t=this.number;t++,t>this.stock&&(t=this.stock,uni.showToast({title:"库存不足",icon:"none"})),this.number=t},leftSubmit:function(){!0===this.leftFunc?this.$emit("leftFunc",this.number):this.cart(),this.close()},rightSubmit:function(){if(!this.checked)return uni.showToast({title:"请先选规格",icon:"none"}),!1;if(!this.$user.isLogin())return this.$user.getInfo();var t=[];this.checked.attr_list.forEach(function(i){t.push({attr_id:i.attr_id,attr_group_id:i.attr_group_id})});var i={mch_id:this.goods.mch_id?this.goods.mch_id:0,goods_list:[{id:this.goods.id,attrs:t,num:this.number,cat_id:0,goods_attr_id:this.checked.id}]};!0===this.rightFunc?this.$emit("rightFunc",i):this.shop(i),this.close()},shop:function(t){uni.navigateTo({url:"/pages/order-submit/order-submit?mch_list=".concat(JSON.stringify([t]))})},cart:function(){var t=this;if(!this.checked)return uni.showToast({title:"请先选规格",icon:"none"}),!1;"ecard"!==this.goods.type&&this.$request({url:this.$api.cart.add,method:"post",data:{goods_id:this.checked.goods_id,attr:this.checked.id,num:this.number}}).then(function(i){0===i.code?(uni.showToast({title:i.msg,icon:"none"}),t.$emit("cart",t.checked,t.number),t.close()):uni.showToast({title:i.msg,icon:"none",duration:2500})})},clickImg:function(t){this.$jwx.previewImage({current:t,urls:[t]})}},components:{uPopup:e.default,appPrice:s.default,appMemberMark:a.default},computed:l({imgUrl:function(){return this.picUrl?this.picUrl:this.goods?this.goods.cover_pic:""},stock:function(){return this.$validation.isEmpty(this.checked)?this.$validation.isEmpty(this.goods)?void 0:this.goods.goods_num:this.checked.stock},sellPrice:function(){return this.$validation.isEmpty(this.checked)?this.$validation.isEmpty(this.goods)?void 0:this.goods.hasOwnProperty("price_min")?this.goods.price_min:this.goods.price:1===this.goods.level_show?this.checked.price_member:this.checked.price},copyGroup:function(){if(this.goods){console.log(this.goods.attr_groups);var t=this.$utils.deepClone(this.goods.attr_groups);console.log(t);for(var i=0;i<t.length;i++)t[i].attr_list.forEach(function(t){t.select=!1,t.num_0=!1});return t}},copyAttr:function(){if(this.goods)return this.$utils.deepClone(this.goods.attr)},cartClass:function(){return"a"===this.themeObject.theme||"b"===this.themeObject.theme||"f"===this.themeObject.theme?this.themeObject.sBtn+" u-btn u-btn-color ":this.themeObject.sBtn+" u-btn  "+this.themeObject.color}},(0,n.mapGetters)({userInfo:"user/info"})),watch:{value:{handler:function(t){this.newValue=t,!1!==t&&this.$validation.isEmpty(this.checked)&&this.$utils.throttle(this.firstSelect,800)},immediate:!0},number:{handler:function(t){this.$emit("check",{item:this.checked,number:t})}},again:{handler:function(){this.firstSelect()}}}};i.default=u},f066:function(t,i,o){"use strict";o.r(i);var e=o("e40d"),s=o.n(e);for(var a in e)"default"!==a&&function(t){o.d(i,t,function(){return e[t]})}(a);i["default"]=s.a}}]);