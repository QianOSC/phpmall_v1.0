(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-composition-index-index"],{"05b0":function(t,i,o){i=t.exports=o("2350")(!1),i.push([t.i,".text-center[data-v-46318571]{text-align:center}.font-weight[data-v-46318571]{font-weight:700}.page-width[data-v-46318571]{width:100%}.goods-hover-class[data-v-46318571]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-46318571]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-46318571]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-46318571]{width:100%}.u-hover-class[data-v-46318571]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-46318571]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-composition .app-composition-goods[data-v-46318571]{width:%?288?%;height:%?140?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:%?24?%;position:relative}.app-composition .app-composition-goods.two uni-image[data-v-46318571]{position:absolute;width:%?140?%;height:%?140?%;border-radius:%?8?%;top:0}.app-composition .app-composition-goods.two uni-image[data-v-46318571]:first-of-type{left:0}.app-composition .app-composition-goods.two uni-image[data-v-46318571]:last-of-type{right:0}.app-composition .app-composition-goods.three uni-image[data-v-46318571]{position:absolute;width:%?140?%;height:%?66?%;border-radius:%?8?%}.app-composition .app-composition-goods.three uni-image[data-v-46318571]:first-of-type{left:0;top:0;height:%?140?%;width:%?140?%}.app-composition .app-composition-goods.three uni-image[data-v-46318571]:nth-child(2){top:0;right:0}.app-composition .app-composition-goods.three uni-image[data-v-46318571]:last-of-type{bottom:0;right:0}.app-composition .app-composition-goods.four uni-image[data-v-46318571]{position:absolute;width:%?66?%;height:%?66?%;border-radius:%?8?%}.app-composition .app-composition-goods.four uni-image[data-v-46318571]:first-of-type{left:0;top:0;height:%?140?%;width:%?140?%}.app-composition .app-composition-goods.four uni-image[data-v-46318571]:nth-child(2){top:0;right:0;width:%?140?%}.app-composition .app-composition-goods.four uni-image[data-v-46318571]:nth-child(3){right:%?74?%;bottom:0}.app-composition .app-composition-goods.four uni-image[data-v-46318571]:last-of-type{right:0;bottom:0}.app-composition .app-composition-goods.five uni-image[data-v-46318571]{position:absolute;width:%?66?%;height:%?66?%;border-radius:%?8?%}.app-composition .app-composition-goods.five uni-image[data-v-46318571]:first-of-type{left:0;top:0;height:%?140?%;width:%?140?%}.app-composition .app-composition-goods.five uni-image[data-v-46318571]:nth-child(2){top:0;right:%?74?%}.app-composition .app-composition-goods.five uni-image[data-v-46318571]:nth-child(3){right:0;top:0}.app-composition .app-composition-goods.five uni-image[data-v-46318571]:nth-child(4){right:%?74?%;bottom:0}.app-composition .app-composition-goods.five uni-image[data-v-46318571]:last-of-type{right:0;bottom:0}.app-composition .app-composition-right[data-v-46318571]{width:%?342?%}.app-composition .app-composition-info[data-v-46318571]{height:%?44?%;width:%?342?%}.app-composition .app-composition-info .app-composition-type[data-v-46318571]{font-size:%?22?%;display:block;margin:0 %?16?% 0 0}.app-composition .app-composition-info .app-composition-name[data-v-46318571]{height:%?44?%;line-height:%?44?%;width:%?260?%;font-size:%?28?%;color:#353535}.app-composition .app-composition-info .app-composition-name.long-name[data-v-46318571]{width:%?342?%}.app-composition .app-composition-type[data-v-46318571]{padding:%?2?% %?12?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border:%?2?% solid;border-radius:%?20?%;margin:%?14?% 0 0;font-size:%?22?%;display:inline-block}.app-composition .app-composition-price[data-v-46318571]{color:#999;font-size:%?24?%;margin:%?14?% 0 %?10?%}.app-composition .app-composition-price uni-text[data-v-46318571]{font-size:%?28?%}.app-composition .app-composition-discount[data-v-46318571]{color:#999;font-size:%?24?%}body.?%PAGE?%[data-v-46318571]{background:#f7f7f7}",""])},"06b9":function(t,i,o){var e=o("5a6f");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var a=o("4f06").default;a("2b331ef2",e,!0,{sourceMap:!1,shadowMode:!1})},"1c50":function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;o("2f62");var e={name:"app-composition",props:{item:{type:Object},large:Boolean,theme:String},data:function(){return{}},created:function(){},methods:{open:function(t){this.$emit("click",t)},toDetail:function(t){this.$emit("look",t)}}};i.default=e},3213:function(t,i,o){"use strict";var e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("v-uni-view",{staticClass:"app-composition dir-left-nowrap"},[o("v-uni-view",{on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.open(i)}}},[1==t.item.type?o("v-uni-view",{staticClass:"app-composition-goods",class:2==t.item.goods_list.length?"two":3==t.item.goods_list.length?"three":4==t.item.goods_list.length?"four":"five"},t._l(t.item.goods_list,function(t){return o("v-uni-image",{key:t.id,attrs:{mode:"aspectFill",src:t.cover_pic}})}),1):t._e(),2==t.item.type?o("v-uni-view",{staticClass:"app-composition-goods",class:1==t.item.goods_list.length?"two":2==t.item.goods_list.length?"three":3==t.item.goods_list.length?"four":"five"},[t._l(t.item.host_list,function(t){return o("v-uni-image",{key:t.id,attrs:{mode:"aspectFill",src:t.cover_pic}})}),t._l(t.item.goods_list,function(t){return o("v-uni-image",{key:t.id,attrs:{mode:"aspectFill",src:t.cover_pic}})})],2):t._e(),t._t("default")],2),o("v-uni-view",{staticClass:"app-composition-right",on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.toDetail(i)}}},[o("v-uni-view",{staticClass:"dir-left-nowrap cross-center app-composition-info"},[1!=t.item.type||t.large?t._e():o("v-uni-view",{staticClass:"app-composition-type",class:t.theme+"-m-text "+t.theme},[t._v("固定")]),2!=t.item.type||t.large?t._e():o("v-uni-view",{staticClass:"app-composition-type",class:t.theme+"-m-text "+t.theme},[t._v("搭配")]),o("v-uni-view",{staticClass:"app-composition-name t-omit",class:t.large?"long-name":""},[t._v(t._s(t.item.name))])],1),1==t.item.type&&t.large?o("v-uni-view",{staticClass:"app-composition-type",class:t.theme+"-m-text "+t.theme},[t._v("固定套餐")]):t._e(),2==t.item.type&&t.large?o("v-uni-view",{staticClass:"app-composition-type",class:t.theme+"-m-text "+t.theme},[t._v("搭配套餐")]):t._e(),o("v-uni-view",{staticClass:"app-composition-price"},[t._v("套餐价"),o("v-uni-text",{class:t.theme+"-m-text "+t.theme},[t._v("￥"+t._s(t.item.min_composition_price))])],1),o("v-uni-view",{staticClass:"app-composition-discount"},[t._v("最多可省"),o("v-uni-text",[t._v("￥"+t._s(t.item.max_discount))])],1)],1)],1)},a=[];o.d(i,"a",function(){return e}),o.d(i,"b",function(){return a})},"49af":function(t,i,o){"use strict";o.r(i);var e=o("1c50"),a=o.n(e);for(var n in e)"default"!==n&&function(t){o.d(i,t,function(){return e[t]})}(n);i["default"]=a.a},"5a6f":function(t,i,o){i=t.exports=o("2350")(!1),i.push([t.i,".text-center[data-v-576d6ce6]{text-align:center}.font-weight[data-v-576d6ce6]{font-weight:700}.page-width[data-v-576d6ce6]{width:100%}.goods-hover-class[data-v-576d6ce6]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-576d6ce6]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-576d6ce6]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-576d6ce6]{width:100%}.u-hover-class[data-v-576d6ce6]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-576d6ce6]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.list .item[data-v-576d6ce6]{margin:0 %?24?% %?20?%;background-color:#fff;border-radius:%?16?%;padding:%?24?%;padding-bottom:%?16?%}.list .item .look-goods[data-v-576d6ce6]{margin-top:%?8?%;border-radius:%?8?%;height:%?48?%;width:%?288?%;font-size:%?24?%;color:#666;background-color:#f7f7f7}.list .item .look-goods uni-image[data-v-576d6ce6]{width:%?18?%;height:%?10?%;margin-left:%?16?%}.no-tip[data-v-576d6ce6]{position:fixed;top:40%;left:0;right:0;margin:0 auto;color:#666;font-size:%?24?%;width:%?240?%;text-align:center}.no-tip uni-image[data-v-576d6ce6]{height:%?240?%;width:%?240?%;margin-bottom:%?20?%}.banner[data-v-576d6ce6]{height:%?280?%;width:100%;position:relative}.banner uni-image[data-v-576d6ce6]{width:100%;height:%?280?%}.banner .rule[data-v-576d6ce6]{position:absolute;right:%?24?%;top:%?24?%;padding:0 %?16?%;border-radius:%?24?%;height:%?48?%;line-height:%?48?%;font-size:%?22?%;color:#fff;background-color:rgba(0,0,0,.4)}.search[data-v-576d6ce6]{width:%?750?%;height:%?88?%;position:-webkit-sticky;position:sticky;top:0;left:0;z-index:100;background-color:#efeff4;padding:%?15?% %?24?%;-webkit-box-sizing:border-box;box-sizing:border-box}.search .search-view[data-v-576d6ce6]{width:%?702?%;height:%?58?%;background-color:#fff;border-radius:%?22?%}.search .search-view .image[data-v-576d6ce6]{width:%?20?%;height:%?20?%;margin-right:%?11?%}.search .search-view .text[data-v-576d6ce6]{font-size:%?26?%;color:#999}.dialog-bg[data-v-576d6ce6]{position:fixed;bottom:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);z-index:202}.dialog-bg .dialog[data-v-576d6ce6]{width:100%;position:fixed;left:0;z-index:210;background-color:#fff;border-top-left-radius:%?16?%;border-top-right-radius:%?16?%}.dialog-bg .dialog.tabbarbool[data-v-576d6ce6]{padding-bottom:%?110?%}.dialog-bg .dialog.tabbarbool.iphone_x[data-v-576d6ce6]{padding-bottom:%?160?%}.dialog-bg .dialog .dialog-title[data-v-576d6ce6]{padding:%?36?% %?24?% %?24?%;font-size:%?32?%;color:#353535}.dialog-bg .dialog .dialog-title .toBuy[data-v-576d6ce6]{font-size:%?28?%}.dialog-bg .dialog .dialog-title .toBuy uni-image[data-v-576d6ce6]{width:%?36?%;height:%?36?%;margin-right:%?12?%;display:block}.dialog-bg .dialog .dialog-title .close uni-image[data-v-576d6ce6]{width:%?36?%;height:%?36?%}.dialog-bg .dialog .dialog-goods-list[data-v-576d6ce6]{padding:0 %?24?%;max-height:%?750?%;overflow-y:auto}.dialog-bg .dialog .dialog-goods-list .dialog-goods[data-v-576d6ce6]{font-size:%?32?%;position:relative;padding:%?28?% 0;border-top:%?2?% solid #e2e2e2}.dialog-bg .dialog .dialog-goods-list .dialog-goods uni-image[data-v-576d6ce6]{width:%?180?%;height:%?180?%;margin-right:%?24?%;border-radius:%?8?%}.dialog-bg .dialog .dialog-goods-list .dialog-goods .goods-name[data-v-576d6ce6]{color:#353535;width:%?498?%}.dialog-bg .dialog .dialog-goods-list .dialog-goods .goods-price[data-v-576d6ce6]{position:absolute;bottom:%?50?%;left:%?204?%}.dialog-bg .dialog .dialog-goods-list .dialog-goods[data-v-576d6ce6]:first-of-type{border-top:0}body.?%PAGE?%[data-v-576d6ce6]{background:#f7f7f7}",""])},"62bb":function(t,i,o){var e=o("05b0");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var a=o("4f06").default;a("121375f0",e,!0,{sourceMap:!1,shadowMode:!1})},"66f5":function(t,i,o){"use strict";var e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("app-layout",{attrs:{overflow:!1}},[o("v-uni-view",{staticClass:"banner"},["statics/img/plugins/composition-banner.png"==t.activityBg?o("v-uni-image",{attrs:{src:t.compositionImg.banner}}):o("v-uni-image",{attrs:{src:t.activityBg}}),o("v-uni-view",{staticClass:"rule",on:{click:function(i){i=t.$handleEvent(i),t.toRule(i)}}},[t._v("活动规则")])],1),o("v-uni-view",{staticClass:"search",on:{click:function(i){i=t.$handleEvent(i),t.toSearch(i)}}},[o("v-uni-view",{staticClass:"search-view dir-left-nowrap main-center cross-center"},[o("v-uni-image",{staticClass:"image",attrs:{src:"/static/image/icon/icon-search.png"}}),o("v-uni-view",{staticClass:"text"},[t._v("请输入商品名称搜索")])],1)],1),0==t.list.length?o("v-uni-view",{staticClass:"no-tip"},[o("v-uni-image",{attrs:{src:"/static/image/no-goods.png"}}),o("v-uni-view",[t._v("没有任何套餐哦~")])],1):o("v-uni-view",{staticClass:"list",style:{position:t.position}},t._l(t.list,function(i){return o("v-uni-view",{key:i.id,staticClass:"item"},[o("app-composition",{attrs:{theme:t.getTheme,item:i,large:!0},on:{click:function(o){o=t.$handleEvent(o),t.show(i)},look:function(o){o=t.$handleEvent(o),t.toDetail(i)}}},[[o("v-uni-view",{staticClass:"look-goods main-center cross-center"},[o("v-uni-view",[t._v("套餐商品")]),o("v-uni-image",{attrs:{src:"/static/image/icon/icon-down.png"}})],1)]],2)],1)}),1),t.showGoods?o("v-uni-view",{staticClass:"dialog-bg",on:{click:function(i){i=t.$handleEvent(i),t.close(i)}}},[o("v-uni-view",{class:["dialog",t.iphone_x?"iphone_x":"",t.tabbarbool?"tabbarbool":""],style:{bottom:t.height+"px"},attrs:{animation:t.animationData},on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i)}}},[o("v-uni-view",{staticClass:"dialog-title main-between cross-center"},[o("v-uni-view",{staticClass:"toBuy dir-left-nowrap cross-center",on:{click:function(i){i=t.$handleEvent(i),t.toDetail(t.detail)}}},[o("v-uni-image",{class:t.getTheme+"-m-back "+t.getTheme,attrs:{src:"/static/image/icon/goods-cart.png"}}),o("v-uni-view",{class:t.getTheme+"-m-text "+t.getTheme},[t._v("去购买套餐")])],1),o("v-uni-view",{staticClass:"close"},[o("v-uni-image",{attrs:{src:"/static/image/icon/close.png"},on:{click:function(i){i=t.$handleEvent(i),t.close(i)}}})],1)],1),o("v-uni-view",{staticClass:"dialog-goods-list"},[t._l(t.detail.host_list,function(i){return o("v-uni-view",{key:i.id,staticClass:"dialog-goods dir-left-nowrap",on:{click:function(o){o.stopPropagation(),o=t.$handleEvent(o),t.toGoods(i.goods_id)}}},[o("v-uni-image",{attrs:{src:i.cover_pic}}),o("v-uni-view",[o("v-uni-view",{staticClass:"t-omit-two goods-name"},[t._v(t._s(i.name))]),o("v-uni-view",{staticClass:"goods-price",class:t.getTheme+"-m-text "+t.getTheme},[t._v("￥"+t._s(i.min_price)+t._s(i.max_price!=i.min_price?"~￥"+i.max_price:""))])],1)],1)}),t._l(t.detail.goods_list,function(i){return o("v-uni-view",{key:i.id,staticClass:"dialog-goods dir-left-nowrap",on:{click:function(o){o.stopPropagation(),o=t.$handleEvent(o),t.toGoods(i.goods_id)}}},[o("v-uni-image",{attrs:{src:i.cover_pic}}),o("v-uni-view",[o("v-uni-view",{staticClass:"t-omit-two goods-name"},[t._v(t._s(i.name))]),o("v-uni-view",{staticClass:"goods-price",class:t.getTheme+"-m-text "+t.getTheme},[t._v("￥"+t._s(i.min_price)+t._s(i.max_price!=i.min_price?"~￥"+i.max_price:""))])],1)],1)})],2)],1)],1):t._e()],1)},a=[];o.d(i,"a",function(){return e}),o.d(i,"b",function(){return a})},7169:function(t,i,o){"use strict";var e=o("06b9"),a=o.n(e);a.a},8312:function(t,i,o){"use strict";o.r(i);var e=o("a77e"),a=o.n(e);for(var n in e)"default"!==n&&function(t){o.d(i,t,function(){return e[t]})}(n);i["default"]=a.a},9495:function(t,i,o){"use strict";o.r(i);var e=o("3213"),a=o("49af");for(var n in a)"default"!==n&&function(t){o.d(i,t,function(){return a[t]})}(n);o("bf5a");var s=o("2877"),c=Object(s["a"])(a["default"],e["a"],e["b"],!1,null,"46318571",null);i["default"]=c.exports},"97b3":function(t,i,o){"use strict";o.r(i);var e=o("66f5"),a=o("8312");for(var n in a)"default"!==n&&function(t){o.d(i,t,function(){return a[t]})}(n);o("7169");var s=o("2877"),c=Object(s["a"])(a["default"],e["a"],e["b"],!1,null,"576d6ce6",null);i["default"]=c.exports},a77e:function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=o("2f62"),a=n(o("9495"));function n(t){return t&&t.__esModule?t:{default:t}}function s(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),o.push.apply(o,e)}return o}function c(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?s(o,!0).forEach(function(i){d(t,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(o).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))})}return t}function d(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}var r={data:function(){return{about:"",list:[],detail:{},position:"static",iphone_x:!1,noMore:!1,showGoods:!1,page:2,height:0,scrollHeight:0,tabbarbool:!1,animationData:{},currentRoute:this.$platDiff.route(),activityBg:""}},components:{"app-composition":a.default},computed:c({},(0,e.mapState)({tabBarNavs:function(t){return t.mallConfig.navbar.navs},compositionImg:function(t){return t.mallConfig.__wxapp_img.composition}}),{},(0,e.mapGetters)("mallConfig",{getTheme:"getTheme"})),watch:{tabBarNavs:{handler:function(){this.b()},immediate:!0}},methods:{b:function(){return this.tabbarbool=!1},show:function(t){var i=this;i.detail=t,i.showGoods=!0,i.position="fixed";var o=uni.createAnimation({duration:1e3,timingFunction:"ease"});i.animationData=o,setTimeout(function(){o.translateY(i.height).step(),i.animationData=o.export()},200)},close:function(){this.detail={},this.showGoods=!1,this.position="static"},toRule:function(){uni.navigateTo({url:"/pages/rules/index?url=".concat(encodeURIComponent(this.$api.composition.config),"&key=rule")})},toDetail:function(t){uni.navigateTo({url:"/plugins/composition/detail/detail?composition_id="+t.id})},toGoods:function(t){uni.navigateTo({url:"/pages/goods/goods?id="+t})},toSearch:function(){uni.navigateTo({url:"/plugins/composition/search/search"})},getSetting:function(){var t=this;t.$showLoading({type:"global",text:"加载中..."}),t.$request({url:t.$api.composition.config}).then(function(i){0==i.code?(t.getList(),t.activityBg=i.data.activityBg):(t.$hideLoading(),uni.showToast({title:i.msg,icon:"none",duration:1e3}))}).catch(function(i){t.$hideLoading()})},getList:function(){var t=this;t.$request({url:t.$api.composition.index}).then(function(i){if(t.$hideLoading(),0==i.code){for(var o in t.list=i.data.list,t.list.length<5&&(t.noMore=!0),t.list)for(var e in t.list[o].choose=!1,t.list[o].goods_list)t.list[o].goods_list[e].choose_attr=null,2==t.list[o].type&&(t.list[o].host_list[0].choose_attr=null,t.list[o].host_list[0].opacity=1,t.list[o].goods_list[e].choose_goods=!1,t.list[o].host_list[0].choose_goods=!1);uni.setStorage({key:"composition",data:t.list})}else t.$hideLoading(),uni.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(i){t.$hideLoading()})},getMore:function(){var t=this,i=this;uni.showLoading({mask:!0,title:"加载中"}),i.$request({url:i.$api.composition.index,data:{page:i.page}}).then(function(o){if(uni.hideLoading(),0==o.code){if(0==o.data.list.length)return t.noMore=!0,!1;i.page++;var e=o.data.list;for(var a in e)for(var n in e[a].choose=!1,e[a].goods_list)e[a].goods_list[n].choose_attr=null,2==e[a].type&&(e[a].host_list[0].choose_attr=null,e[a].host_list[0].opacity=1,e[a].goods_list[n].choose_goods=!1,e[a].host_list[0].choose_goods=!1);i.list=i.list.concat(e),uni.setStorage({key:"composition",data:i.list})}else uni.hideLoading(),uni.showToast({title:o.msg,icon:"none",duration:1e3})}).catch(function(){i.$hideLoading()})}},onLoad:function(){var t=this;uni.getSystemInfo({success:function(i){t.height=-i.screenHeight,(i.model.indexOf("iPhone X")>-1||i.model.indexOf("iPhone 11")>-1||i.model.indexOf("iPhone11")>-1||i.model.indexOf("iPhone12")>-1||i.model.indexOf("Unknown Device")>-1)&&(t.iphone_x=!0)}}),t.getSetting()},onReachBottom:function(){this.noMore||this.getMore()}};i.default=r},bf5a:function(t,i,o){"use strict";var e=o("62bb"),a=o.n(e);a.a}}]);