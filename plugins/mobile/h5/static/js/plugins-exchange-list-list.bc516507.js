(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-exchange-list-list"],{1182:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".text-center[data-v-acd0a202]{text-align:center}.font-weight[data-v-acd0a202]{font-weight:700}.page-width[data-v-acd0a202]{width:100%}.goods-hover-class[data-v-acd0a202]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-acd0a202]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-acd0a202]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-acd0a202]{width:100%}.u-hover-class[data-v-acd0a202]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-acd0a202]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.jump-dialog[data-v-acd0a202]{position:fixed;bottom:%?120?%;right:%?24?%;width:%?100?%;height:%?100?%;border-radius:50%;background-color:rgba(0,0,0,.3);font-size:%?16?%;color:#fff;z-index:100}.jump-dialog.tabbarbool[data-v-acd0a202]{bottom:%?240?%}.jump-dialog uni-image[data-v-acd0a202]{width:%?54?%;height:%?54?%;margin-bottom:%?3?%;display:block}.item[data-v-acd0a202]{margin:%?24?% %?24?% 0;background-color:#fff;border-radius:%?16?%}.item .status[data-v-acd0a202]{padding:%?28?% %?30?%;border-bottom:%?2?% solid #e2e2e2}.item .status .item-cover[data-v-acd0a202]{width:%?140?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:%?30?%}.item .status .item-name[data-v-acd0a202]{font-size:%?28?%;color:#353535}.item .item-time[data-v-acd0a202]{height:%?112?%;font-size:%?28?%;color:#666;padding:0 %?30?%}.item .item-time .rewards-submit[data-v-acd0a202]{height:%?68?%;line-height:%?68?%;text-align:center;padding:0 %?30?%;border-radius:%?40?%;color:#fff;font-size:%?28?%}.item .item-time .rewards-submit.over[data-v-acd0a202]{background-color:#f7f7f7;color:#999}body.?%PAGE?%[data-v-acd0a202]{background:#f7f7f7}",""])},"1c03":function(t,e,a){var i=a("e85f");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("481ee3d8",i,!0,{sourceMap:!1,shadowMode:!1})},"49f4":function(t,e,a){"use strict";var i=a("1c03"),n=a.n(i);n.a},"73d5":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{class:[t.shadow?"main-between app-nav shadow":"main-between app-nav"],style:[{"line-height":(t.setHeight?t.setHeight:90)+"rpx","font-size":(t.fontSize?t.fontSize:28)+"rpx",height:(t.setHeight?t.setHeight:90)+"rpx",top:t.setTop>0?"calc("+t.setTop+"rpx + var(--window-top))":"var(--window-top)",top:t.setTop>0?t.setTop+"rpx":"0",backgroundColor:""+(t.background?t.background:"#fff")}]},t._l(t.tabList,function(e){return a("v-uni-view",{key:e.id,staticClass:"box-grow-1 nav-item",style:[{borderBottom:(t.border?1:0)+"rpx solid #e2e2e2"}],attrs:{"data-id":e.id},on:{click:function(e){e=t.$handleEvent(e),t.handleClick(e)}}},[a("v-uni-text",{class:[e.id==t.activeItem?"active-text "+t.theme+"-m-text "+t.theme:""],style:[{height:(t.setHeight?t.setHeight:90)+"rpx",padding:"0 "+t.padding+"rpx"}]},[t._v(t._s(e.name))])],1)}),1),a("v-uni-view",{style:[{height:(t.placeHeight?t.placeHeight:90)+"rpx"}]})],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"76b6":function(t,e,a){"use strict";a.r(e);var i=a("c4f2"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"7fd0":function(t,e,a){"use strict";a.r(e);var i=a("73d5"),n=a("86a7");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("49f4");var r=a("2877"),s=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"616e7dfe",null);e["default"]=s.exports},8674:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-layout",[a("app-tab-nav",{attrs:{setTop:0,border:!1,shadow:!1,height:100,tabList:t.tabList,padding:0,activeItem:t.activeTab,theme:t.getTheme},on:{click:function(e){e=t.$handleEvent(e),t.tabStatus(e)}}}),"0"==t.activeTab?a("v-uni-view",{staticClass:"goods dir-left-wrap"},[t.list.length>0?a("v-uni-view",{staticStyle:{width:"100%"}},[a("app-product-list",{attrs:{"theme-object":t.themeObject,sign:"exchange",theme:t.getTheme,listStyle:t.listStyle,goods_list:t.list},on:{routeGo:function(e){e=t.$handleEvent(e),t.jump(e)}}})],1):t._e(),0==t.list.length?a("v-uni-view",{staticStyle:{"padding-top":"30%",width:"100%"}},[a("app-no-goods",{attrs:{title:"暂无可购买的礼品卡",background:"#f7f7f7"}})],1):t._e()],1):t._e(),"1"==t.activeTab?a("v-uni-view",[t._l(t.list,function(e,i){return a("v-uni-view",{key:i,staticClass:"item"},[a("v-uni-view",{staticClass:"dir-left-nowrap cross-center status"},[a("v-uni-view",{staticClass:"item-cover"},[a("app-image",{attrs:{"img-src":e.cover_pic,width:"140rpx",height:"140rpx","border-radius":"8rpx 8rpx 0 0"}})],1),a("v-uni-view",{staticClass:"t-omit-two item-name"},[t._v(t._s(e.name))])],1),a("v-uni-view",{staticClass:"item-time main-between cross-center"},[a("v-uni-view",[t._v("购买时间："+t._s(e.created_at))]),"unused"==e.status?a("v-uni-view",{staticClass:"rewards-submit",class:t.getTheme+"-m-back "+t.getTheme,on:{click:function(a){a=t.$handleEvent(a),t.apply(e)}}},[t._v("立即使用")]):"used"==e.status?a("v-uni-view",{staticClass:"rewards-submit over",on:{click:function(a){a=t.$handleEvent(a),t.apply(e)}}},[t._v("已使用")]):a("v-uni-view",{staticClass:"rewards-submit over",on:{click:function(a){a=t.$handleEvent(a),t.apply(e)}}},[t._v("已失效")])],1)],1)}),0==t.list.length?a("v-uni-view",{staticStyle:{"padding-top":"30%"}},[a("app-no-goods",{attrs:{title:"暂无已获得的礼品卡",background:"#f7f7f7"}})],1):t._e()],2):t._e(),1==t.setting.is_to_exchange?a("v-uni-view",{staticClass:"jump-dialog cross-center dir-top-nowrap main-center",class:[t.tabbarbool?"tabbarbool":""],on:{click:function(e){e=t.$handleEvent(e),t.toIndex(e)}}},[a("v-uni-image",{attrs:{src:t.setting.to_exchange_pic}}),a("v-uni-view",[t._v("兑换中心")])],1):t._e()],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"86a7":function(t,e,a){"use strict";a.r(e);var i=a("93b4"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"93b4":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"app-tab-nav",props:{background:String,setTop:{type:[Number,String]},padding:{default:45,type:[Number,String]},setHeight:Number,placeHeight:Number,fontSize:Number,theme:{default:"default",type:String},border:{default:!0,type:Boolean},shadow:{default:!0,type:Boolean},activeItem:{type:[Number,String]},tabList:Array},methods:{handleClick:function(t){this.$emit("click",t)}}};e.default=i},"93f3":function(t,e,a){var i=a("1182");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("36363cce",i,!0,{sourceMap:!1,shadowMode:!1})},c0a1:function(t,e,a){"use strict";a.r(e);var i=a("8674"),n=a("76b6");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("cbc7");var r=a("2877"),s=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"acd0a202",null);e["default"]=s.exports},c4f2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(a("7fd0")),n=c(a("75cc")),o=c(a("6c9f")),r=c(a("8112")),s=c(a("6244")),d=a("2f62");function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(a,!0).forEach(function(e){f(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var g={name:"index",data:function(){return{currentRoute:this.$platDiff.route(),tabbarbool:!1,tabList:[{id:0,name:"购买礼品卡"},{id:1,name:"我的礼品卡"}],code:"",activeTab:"0",list:[],setting:{},listStyle:!1,loading:!1,more:!1,dialog:!1,msg:"",page:1}},computed:l({},(0,d.mapState)({appImg:function(t){return t.mallConfig.__wxapp_img.mall},appSetting:function(t){return t.mallConfig.mall.setting},tabBarNavs:function(t){return t.mallConfig.navbar.navs},platform:function(t){return t.gConfig.systemInfo.platform}}),{},(0,d.mapGetters)("mallConfig",{getTheme:"getTheme"}),{},(0,d.mapGetters)("mallConfig",{getVideo:"getVideo"}),{themeObject:function(){return{back:this.getTheme+"-m-back "+this.getTheme,backP:this.getTheme+"-m-back-p "+this.getTheme,backO:this.getTheme+"-m-back-o "+this.getTheme,theme:this.getTheme,color:this.getTheme+"-m-text "+this.getTheme,sBack:this.getTheme+"-s-back "+this.getTheme,border:this.getTheme+"-m-border "+this.getTheme}}}),components:{"app-tab-nav":i.default,"app-product-list":n.default,appPrice:o.default,appNoGoods:r.default,"u-mask":s.default},watch:{tabBarNavs:{handler:function(){this.b()},immediate:!0}},onLoad:function(t){var e=this;t.tab>0&&(this.activeTab=t.tab.toString()),this.$showLoading({type:"global",text:"加载中..."}),this.$request({url:this.$api.exchange.setting}).then(function(t){0==t.code?(e.setting=t.data,e.getList()):uni.showToast({title:t.msg,icon:"none",duration:1e3})})},onShow:function(){"1"==this.activeTab&&this.getList()},onReachBottom:function(){this.more&&(this.page++,this.getMore())},methods:{b:function(){return this.tabbarbool=!1},toIndex:function(){uni.navigateTo({url:"/plugins/exchange/index/index"})},getMore:function(){var t=this,e=this;if(this.loading)return!1;this.loading=!0,this.more=!1,e.$request({url:"0"==e.activeTab?e.$api.exchange.list:e.$api.exchange.me_list,data:{page:this.page}}).then(function(a){e.$hideLoading(),uni.hideLoading(),t.loading=!1,0==a.code?(e.list=e.list.concat(a.data.list),a.data.list.length==a.data.pagination.pageSize&&(t.more=!0)):uni.showToast({title:a.msg,icon:"none",duration:1e3})}).catch(function(t){e.$hideLoading(),uni.hideLoading()})},jump:function(t){t.video_url&&this.getVideo,uni.navigateTo({url:"/plugins/exchange/goods/goods?goods_id=".concat(t.id)})},apply:function(t){uni.navigateTo({url:"/plugins/exchange/gift/gift?code="+t.code})},tabStatus:function(t){if(this.loading)return!1;this.list=[],this.page=1,this.activeTab=t.currentTarget.dataset.id,uni.showLoading({mask:!0,title:"加载中..."}),this.getList()},getList:function(){var t=this,e=this;if(this.loading)return!1;this.loading=!0,this.page=1,this.more=!1,e.$request({url:"0"==e.activeTab?e.$api.exchange.list:e.$api.exchange.me_list}).then(function(a){e.$hideLoading(),uni.hideLoading(),t.loading=!1,0==a.code?(e.list=a.data.list,e.list.length==a.data.pagination.pageSize&&(t.more=!0)):uni.showToast({title:a.msg,icon:"none",duration:1e3})}).catch(function(t){e.$hideLoading(),uni.hideLoading()})}}};e.default=g},cbc7:function(t,e,a){"use strict";var i=a("93f3"),n=a.n(i);n.a},e85f:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".text-center[data-v-616e7dfe]{text-align:center}.font-weight[data-v-616e7dfe]{font-weight:700}.page-width[data-v-616e7dfe]{width:100%}.goods-hover-class[data-v-616e7dfe]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-616e7dfe]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-616e7dfe]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-616e7dfe]{width:100%}.u-hover-class[data-v-616e7dfe]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-616e7dfe]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-nav[data-v-616e7dfe]{color:#353535;width:100%;position:fixed;left:0;background-color:#fff;z-index:11}.app-nav .nav-item[data-v-616e7dfe]{text-align:center}.app-nav .nav-item uni-text[data-v-616e7dfe]{display:inline-block}.app-nav .active-text[data-v-616e7dfe]{border-bottom:%?4?% solid}.app-nav.shadow[data-v-616e7dfe]{-webkit-box-shadow:0 %?2?% %?10?% rgba(0,0,0,.06);box-shadow:0 %?2?% %?10?% rgba(0,0,0,.06)}.default-m-text[data-v-616e7dfe]{color:#ff4544}.blue-m-text[data-v-616e7dfe]{color:#446dfd}body.?%PAGE?%[data-v-616e7dfe]{background:#f7f7f7}",""])}}]);