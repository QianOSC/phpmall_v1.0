(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-integral_mall-index-index"],{"01db":function(t,i,e){"use strict";var o=e("3d63"),a=e.n(o);a.a},"174c":function(t,i,e){"use strict";var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("app-layout",{attrs:{overflow:!1}},[e("v-uni-view",{staticClass:"nav"},[e("v-uni-image",{staticClass:"nav-bg",attrs:{"load-lazy":"true",src:"./../image/index_BG.png"}}),e("v-uni-view",{staticClass:"nav-title"},[t._v("我的积分")]),e("v-uni-view",{staticClass:"nav-num"},[t._v(t._s(t.userInfo?t.userInfo.integral:0))]),e("v-uni-view",{staticClass:"about",on:{click:function(i){i=t.$handleEvent(i),t.toAbout(i)}}},[e("v-uni-image",{attrs:{"load-lazy":"true",src:"./../image/about.png"}})],1),e("v-uni-view",{staticClass:"exchange",on:{click:function(i){i=t.$handleEvent(i),t.router("/plugins/integral_mall/exchange/exchange")}}},[e("v-uni-image",{attrs:{"load-lazy":"true",src:"/static/image/icon/exchange.png"}}),e("v-uni-text",[t._v("我的兑换")])],1),e("v-uni-view",{staticClass:"log",on:{click:function(i){i=t.$handleEvent(i),t.router("/pages/user-center/integral-detail/integral-detail")}}},[e("v-uni-image",{attrs:{"load-lazy":"true",src:"./../image/log.png"}}),e("v-uni-text",[t._v("积分收支")])],1)],1),e("v-uni-view",{staticClass:"banner",attrs:{"indicator-dots":"true",autoplay:"true"}},[e("v-uni-swiper",{staticClass:"swiper",attrs:{"indicator-dots":"true",autoplay:"true"}},t._l(t.banners,function(t,i){return e("v-uni-swiper-item",{key:i},[e("app-jump-button",{attrs:{open_type:t.open_type,url:t.page_url,params:t.params}},[e("v-uni-image",{attrs:{mode:"aspectFill",src:t.pic_url}})],1)],1)}),1)],1),t.coupon.length>0?e("v-uni-view",{staticClass:"coupon"},[e("v-uni-view",{staticClass:"coupon-title"},[t._v("兑换优惠券")]),e("v-uni-scroll-view",{staticClass:"coupon-list",attrs:{"scroll-x":""}},t._l(t.coupon,function(i){return e("v-uni-view",{key:i.id,staticClass:"coupon-item",on:{click:function(e){e=t.$handleEvent(e),t.router("/plugins/integral_mall/coupon/coupon?id="+i.id)}}},[e("v-uni-image",{attrs:{"load-lazy":"true",src:"./../image/coupon-bg.png"}}),2==i.coupon.type?e("v-uni-view",{staticClass:"coupon-name t-omit"},[t._v("￥"),e("v-uni-text",[t._v(t._s(i.coupon.sub_price))]),t._v("优惠券")],1):e("v-uni-view",{staticClass:"coupon-name discount"},[e("v-uni-text",[t._v(t._s(i.coupon.discount))]),t._v("优惠券")],1),e("v-uni-view",{staticClass:"coupon-user t-omit"},[t._v(t._s(i.integral_num)+"积分"),i.price>0?e("span",[t._v("+"+t._s(i.price)+"元")]):t._e(),t._v("兑换")]),e("v-uni-view",{staticClass:"coupon-exchange"},[e("v-uni-view",[t._v("立即兑换")])],1)],1)}),1)],1):t._e(),e("v-uni-view",{staticClass:"goods"},[e("v-uni-view",{staticClass:"goods-title"},[e("v-uni-view",{staticClass:"coupon-title"},[t._v("优惠购专区")])],1),e("v-uni-scroll-view",{staticClass:"cat-list",attrs:{"scroll-x":""}},[e("v-uni-view",{class:["cat-item","t-omit",0==t._num?t.getTheme+"-m-back active "+t.getTheme:""],on:{click:function(i){i=t.$handleEvent(i),t.tab(0)}}},[t._v("全部")]),t._l(t.cats,function(i){return e("v-uni-view",{key:i.id,class:["cat-item","t-omit",t._num==i.id?t.getTheme+"-m-back active "+t.getTheme:""],on:{click:function(e){e=t.$handleEvent(e),t.tab(i.id)}}},[t._v(t._s(i.name))])})],2),e("v-uni-view",{staticClass:"goods-list dir-left-wrap"},t._l(t.goods,function(i){return e("v-uni-view",{key:i.id,staticClass:"goods-item",attrs:{"open-type":"navigate"},on:{click:function(e){e=t.$handleEvent(e),t.toGoods(i)}}},[e("v-uni-image",{staticClass:"goods-img",attrs:{"load-lazy":"true",mode:"aspectFill",src:i.cover_pic}}),0==i.goods_stock&&"1"==t.appSetting.is_show_stock?e("v-uni-view",{staticClass:"out-dialog"},[e("v-uni-image",{attrs:{src:"1"==t.appSetting.is_use_stock?t.appImg.plugins_out:t.appSetting.sell_out_pic}})],1):t._e(),e("v-uni-view",{staticClass:"goods-name t-omit"},[t._v(t._s(i.name))]),e("v-uni-view",{staticClass:"goods-price",class:t.getTheme+"-m-text "+t.getTheme},[t._v(t._s(i.integralMallGoods.integral_num)+"积分"),i.price>0?e("v-uni-text",[t._v("+￥"+t._s(i.price))]):t._e()],1),e("v-uni-view",{staticClass:"goods-old"},[t._v("￥"+t._s(i.original_price))]),e("v-uni-view",{staticClass:"goods-num"},[t._v("仅剩"+t._s(i.goods_stock)+"件")]),i.goods_stock>0?e("v-uni-button",{staticClass:"goods-exchange",class:t.getTheme+"-m-back "+t.getTheme},[t._v("立即兑换")]):e("v-uni-button",{staticClass:"goods-exchange",staticStyle:{background:"#CDCDCD",color:"#fff"}},[t._v("已售罄")])],1)}),1)],1),t.lose||t.success?e("v-uni-view",{staticClass:"dialog-bg"},[e("v-uni-view",{staticClass:"dialog"},[e("v-uni-view",{on:{click:function(i){i=t.$handleEvent(i),t.close(i)}}},[e("v-uni-image",{staticClass:"close",attrs:{"load-lazy":"true",src:"/static/image/icon/icon-close.png"}})],1),t.lose?e("v-uni-view",{staticClass:"lose"},[e("v-uni-image",{staticClass:"lose-img",attrs:{"load-lazy":"true",src:"./../image/lose.png"}}),e("v-uni-view",{staticClass:"lose-title"},[t._v("兑换失败！")]),e("v-uni-view",[t._v("当前积分不足")])],1):t._e(),t.success?e("v-uni-view",{staticClass:"success"},[e("v-uni-image",{staticClass:"success-head",attrs:{"load-lazy":"true",src:t.integralImg.app_image.success}}),e("v-uni-view",[t._v("恭喜您，兑换成功！")]),e("v-uni-view",{staticClass:"main-between success-btn"},[e("v-uni-view",{on:{click:function(i){i=t.$handleEvent(i),t.toList(i)}}},[e("v-uni-button",{staticClass:"to-card"},[t._v("去卡券包")])],1),e("v-uni-view",{on:{click:function(i){i=t.$handleEvent(i),t.toList(i)}}},[e("v-uni-button",{staticClass:"to-use"},[t._v("立即使用")])],1)],1)],1):t._e()],1)],1):t._e()],1)},a=[];e.d(i,"a",function(){return o}),e.d(i,"b",function(){return a})},3956:function(t,i,e){"use strict";e.r(i);var o=e("9823"),a=e.n(o);for(var n in o)"default"!==n&&function(t){e.d(i,t,function(){return o[t]})}(n);i["default"]=a.a},"3d63":function(t,i,e){var o=e("90455");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=e("4f06").default;a("99b5689a",o,!0,{sourceMap:!1,shadowMode:!1})},"525b":function(t,i,e){"use strict";e.r(i);var o=e("174c"),a=e("3956");for(var n in a)"default"!==n&&function(t){e.d(i,t,function(){return a[t]})}(n);e("01db");var s=e("2877"),r=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,"0ff33250",null);i["default"]=r.exports},90455:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'.text-center[data-v-0ff33250]{text-align:center}.font-weight[data-v-0ff33250]{font-weight:700}.page-width[data-v-0ff33250]{width:100%}.goods-hover-class[data-v-0ff33250]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-0ff33250]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-0ff33250]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-0ff33250]{width:100%}.u-hover-class[data-v-0ff33250]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-0ff33250]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.nav[data-v-0ff33250]{height:%?220?%;width:100%;position:relative}.nav-bg[data-v-0ff33250]{height:%?220?%;width:100%}.nav-title[data-v-0ff33250]{text-align:center;width:100%;position:absolute;top:%?25?%;color:#999;font-size:12px}.nav-num[data-v-0ff33250]{text-align:center;width:100%;position:absolute;top:%?60?%;color:#ecb786;font-size:24px}.exchange[data-v-0ff33250],.log[data-v-0ff33250]{position:absolute;bottom:%?40?%;color:#fff;font-size:15px;height:%?34?%;line-height:%?34?%}.exchange uni-image[data-v-0ff33250],.log uni-image[data-v-0ff33250]{height:%?34?%;width:%?34?%;margin-right:%?16?%;display:block;float:left}.exchange[data-v-0ff33250]{left:%?120?%}.log[data-v-0ff33250]{right:%?120?%}.about[data-v-0ff33250]{height:%?30?%;width:%?30?%;position:absolute;top:%?25?%;right:38%}.about uni-image[data-v-0ff33250]{height:%?30?%;width:%?30?%;display:block}.banner[data-v-0ff33250]{margin:%?20?% 0;height:%?190?%}.banner uni-swiper[data-v-0ff33250]{height:%?190?%}.banner uni-image[data-v-0ff33250]{height:%?190?%;width:100%}.coupon[data-v-0ff33250]{background-color:#fff;padding:%?30?% 0 %?40?% %?25?%}.coupon-title[data-v-0ff33250]{font-size:15px;color:#353535;border-left:%?4?% solid #ff6f28;padding-left:%?16?%;height:%?35?%;line-height:%?35?%;margin-bottom:%?38?%}.coupon-list[data-v-0ff33250]{height:%?220?%;white-space:nowrap;overflow:hidden;width:auto}.coupon-item[data-v-0ff33250]{width:%?330?%;height:%?220?%;position:relative;display:inline-block;font-size:13px;color:#353535;margin-right:%?20?%}.coupon-item uni-image[data-v-0ff33250]{width:%?330?%;height:%?220?%}.coupon-name[data-v-0ff33250]{position:absolute;left:%?24?%;top:%?10?%;width:%?300?%;font-weight:700}.coupon-name.discount uni-text[data-v-0ff33250]:after{content:"\\6298";font-size:50%}.coupon-name uni-text[data-v-0ff33250]{font-size:20px;margin-right:%?12?%}.coupon-user[data-v-0ff33250]{position:absolute;width:%?280?%;left:%?24?%;top:%?70?%}.coupon-exchange[data-v-0ff33250]{position:absolute;bottom:%?22?%;left:0;right:0;text-align:center}.coupon-exchange uni-view[data-v-0ff33250]{display:inline-block;padding:0 %?28?%;text-align:center;height:%?48?%;line-height:%?48?%;border-radius:%?24?%;border:%?2?% solid #353535;margin:0 auto}.goods-title[data-v-0ff33250]{padding-left:%?20?%;height:%?96?%;line-height:%?96?%;padding-top:%?30.5?%;background-color:#fff;margin-top:%?24?%;border-bottom:%?1?% solid #e2e2e2}.cat-list[data-v-0ff33250]{height:%?100?%;background-color:#fff;border-bottom:%?1?% solid #e2e2e2;white-space:nowrap;overflow:hidden;width:auto;position:-webkit-sticky;position:sticky;top:0;z-index:10}.cat-item[data-v-0ff33250]{display:inline-block;margin:%?23?%;text-align:center;width:auto;color:#353535;font-size:12px;height:%?54?%;line-height:%?54?%;padding:0 %?20?%}.cat-item.active[data-v-0ff33250]{border-radius:%?27?%;color:#fff}.goods-list[data-v-0ff33250]{padding-left:%?24?%}.goods-item[data-v-0ff33250]{width:%?344?%;background-color:#fff;font-size:14px;color:#353535;margin:%?14?% %?14?% 0 0;position:relative;display:block;border-radius:%?16?%}.goods-name[data-v-0ff33250]{margin-top:%?16?%;padding-left:%?24?%;font-size:%?26?%;height:%?30?%;line-height:%?30?%}.goods-img[data-v-0ff33250]{height:%?344?%;width:%?344?%;display:block;border-top-left-radius:%?16?%;border-top-right-radius:%?16?%}.out-dialog[data-v-0ff33250]{width:%?344?%;height:%?344?%;position:absolute;top:0;left:0;background-color:rgba(0,0,0,.5)}.out-dialog uni-image[data-v-0ff33250]{width:%?344?%;height:%?344?%}.goods-price[data-v-0ff33250]{margin-top:%?10?%;margin-left:%?24?%;padding-bottom:%?125?%}.goods-old[data-v-0ff33250]{font-size:13px;color:#999;text-decoration:line-through;position:absolute;left:%?24?%;bottom:%?88?%}.goods-num[data-v-0ff33250]{position:absolute;right:%?24?%;bottom:%?88?%;font-size:13px}.goods-exchange[data-v-0ff33250]{height:%?48?%;line-height:%?48?%;border-radius:%?24?%;position:absolute;bottom:%?24?%;left:%?24?%;right:%?24?%;color:#fff;font-size:13px}.goods-exchange[data-v-0ff33250]:after{border:0}.dialog-bg[data-v-0ff33250]{position:fixed;left:0;top:0;height:100%;width:100%;background-color:rgba(0,0,0,.3)}.dialog[data-v-0ff33250]{width:%?574?%;margin:0 auto;background-color:#fff;position:fixed;top:25%;left:0;right:0;border-radius:%?16?%}.close[data-v-0ff33250]{height:%?30?%;width:%?30?%;position:absolute;right:%?22?%;top:%?22?%;z-index:10}.lose[data-v-0ff33250]{padding:%?88?% 0 %?88?% %?90?%;height:%?310?%;font-size:15px;color:#353535}.lose-img[data-v-0ff33250]{height:%?134?%;width:%?124?%;margin-right:%?48?%;display:block;float:left}.lose-title[data-v-0ff33250]{font-size:23px;font-weight:500;margin:%?15?% 0}.success[data-v-0ff33250]{height:%?350?%;background-color:#fff;text-align:center;padding-top:%?150?%;font-size:18px;color:#353535;border-radius:%?16?%}.success-head[data-v-0ff33250]{height:%?332?%;width:%?574?%;position:absolute;top:%?-215?%;left:0}.to-card[data-v-0ff33250],.to-use[data-v-0ff33250]{margin-top:%?44?%;height:%?64?%;border-radius:%?32?%;line-height:%?64?%;width:%?228?%;font-size:16px}.to-card[data-v-0ff33250]:after,.to-use[data-v-0ff33250]:after{border:0}.to-card[data-v-0ff33250]{background-color:#fff;color:#353535;border:%?1?% solid #999}.to-use[data-v-0ff33250]{background-color:#ff4544;color:#fff}.dialog-tip[data-v-0ff33250]{position:fixed;top:%?400?%;left:0;right:0;padding-bottom:%?88?%;width:%?640?%;margin:0 auto;z-index:21;background-color:#fff;border-radius:10px;text-align:center;font-size:%?30?%}.dialog-msg[data-v-0ff33250]{margin:0 %?50?% %?50?%}.dialog-title[data-v-0ff33250]{margin:%?40?% auto %?35?%}.dialog-btn[data-v-0ff33250]{height:%?88?%;width:%?640?%;border-top:%?1?% solid #e2e2e2;line-height:%?88?%;position:absolute;bottom:0;left:0}.dialog-close[data-v-0ff33250],.dialog-submit[data-v-0ff33250]{width:50%}.line[data-v-0ff33250]{height:%?44?%;margin-top:%?22?%;width:%?1?%;background-color:#e2e2e2}.dialog-submit[data-v-0ff33250]{color:#ff4544}.success-btn[data-v-0ff33250]{padding:0 %?39?%}body.?%PAGE?%[data-v-0ff33250]{background:#f7f7f7}',""])},9823:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=e("2f62");function a(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,o)}return e}function n(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?a(e,!0).forEach(function(i){s(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(e).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}return t}function s(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var r={data:function(){return{success:!1,lose:!1,_num:0,more:!1,setting:{},coupon:[],userInfo:{integral:0},choose:{integral:0},banners:[],cats:[],id:0,exchangeCoupon:!1,current:"wechat",goods:[],args:!1,page:1}},computed:n({},(0,o.mapState)({integralImg:function(t){return t.mallConfig.plugin.integral_mall},appSetting:function(t){return t.mallConfig.mall.setting},appImg:function(t){return t.mallConfig.__wxapp_img.mall},platform:function(t){return t.gConfig.systemInfo.platform}}),{},(0,o.mapGetters)("mallConfig",{getVideo:"getVideo",getTheme:"getTheme"})),methods:{close:function(){this.success=!1,this.lose=!1},tab:function(t){this._num=t,this.page=1,this.goods=[],this.getGoods()},toList:function(){this.success=!1,uni.navigateTo({url:"/pages/coupon/index/index"})},toGoods:function(t){t.goodsWarehouse.video_url&&this.getVideo,uni.navigateTo({url:"/plugins/integral_mall/goods/goods?goods_id="+t.id})},toAbout:function(){uni.navigateTo({url:"/pages/rules/index?url=".concat(encodeURIComponent(this.$api.integral_mall.index),"&keys=").concat(JSON.stringify(["setting","rule"]))})},router:function(t){uni.navigateTo({url:t})},getList:function(){var t=this;t.$request({url:t.$api.integral_mall.index}).then(function(i){if(t.$hideLoading(),0===i.code){var e=i.data,o=e.banners,a=e.setting,n=e.userInfo;t.banners=o,t.setting=a,t.userInfo=n}else uni.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getCoupon:function(){var t=this;t.$request({url:t.$api.integral_mall.coupon}).then(function(i){t.$hideLoading(),0===i.code?t.coupon=i.data.list:uni.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getCat:function(){var t=this;t.$request({url:t.$api.integral_mall.cats}).then(function(i){t.$hideLoading(),0===i.code?t.cats=i.data.list:uni.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getGoods:function(){var t=this;t.$request({url:t.$api.integral_mall.goods,data:{cat_id:t._num,page:t.page}}).then(function(i){t.$hideLoading(),0===i.code?(t.more=!1,i.data.list.length==i.data.pagination.pageSize&&(t.page++,t.more=!0),t.page>1?t.goods=t.goods.concat(i.data.list):t.goods=i.data.list):uni.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})}},onReachBottom:function(){this.more&&this.getGoods()},onLoad:function(){var t=this;t._num=0,t.$showLoading({type:"global",text:"加载中..."}),t.getList(),t.getCoupon(),t.getCat(),t.getGoods()}};i.default=r}}]);