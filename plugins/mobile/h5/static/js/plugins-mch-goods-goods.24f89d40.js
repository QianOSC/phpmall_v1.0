(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-mch-goods-goods"],{"11f2":function(t,e,i){"use strict";i.r(e);var o=i("fec9"),n=i("ff65");for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);i("154f");var s=i("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"2b3e7dbb",null);e["default"]=r.exports},1267:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAABlBMVEX09PTV1dUeYHV3AAAAFElEQVQoz2MY2aD+//8H+BgjGgAAMQANdT7AwNcAAAAASUVORK5CYII="},"13bb":function(t,e,i){var o=i("4772");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("6d0270d8",o,!0,{sourceMap:!1,shadowMode:!1})},"154f":function(t,e,i){"use strict";var o=i("13bb"),n=i.n(o);n.a},"207b":function(t,e,i){var o=i("a80f");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("d5b25f82",o,!0,{sourceMap:!1,shadowMode:!1})},"26e3":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-attr"},[i("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.turnOn(e)}}},[t._t("btn")],2),i("u-popup",{attrs:{mode:"bottom","border-radius":"14",safeAreaInsetBottom:!0},on:{close:function(e){e=t.$handleEvent(e),t.close(e)}},model:{value:t.newValue,callback:function(e){t.newValue=e},expression:"newValue"}},[i("v-uni-view",{staticClass:"u-model",on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"u-top dir-left-nowrap u-border-box"},[i("v-uni-view",{staticClass:"u-pic u-border-box",on:{click:function(e){e=t.$handleEvent(e),t.clickImg(t.imgUrl)}}},[i("v-uni-image",{staticClass:"u-img",attrs:{src:t.imgUrl}})],1),i("v-uni-view",{staticClass:"u-info"},[i("v-uni-view",{class:["cross-center","dir-left-nowrap",t.themeObject.color]},[i("v-uni-view",{staticClass:"dir-left-nowrap"},[t._t("priceBefore"),i("v-uni-view",{staticClass:"u-price"},[t.is_show_price?i("app-price",{attrs:{theme:t.themeObject.theme,userTheme:t.themeObject.userTheme,sign:t.sign,price:t.sellPrice,"default-price":t.goods.price}}):t._e()],1)],2),1===t.goods.level_show?i("app-member-mark",{attrs:{theme:t.themeObject}}):t._e()],1),i("v-uni-view",{staticClass:"u-stock"},[t._v("库存："+t._s(t.stock))])],1),i("v-uni-view",{staticClass:"u-close-image",on:{click:function(e){e=t.$handleEvent(e),t.close(e)}}},[i("v-uni-image",{staticClass:"bd-close-image u-border-box",attrs:{src:"/static/image/icon/icon-close.png"}})],1)],1),i("v-uni-view",{staticClass:"u-center"},[i("v-uni-scroll-view",{staticClass:"u-scroll-view",attrs:{"scroll-y":"true"}},[t._t("extra"),t._l(t.newGroup,function(e,o){return"goods"===t.goods.type?i("v-uni-view",{key:o,staticClass:"u-attr-group u-border-box"},[i("v-uni-view",{staticClass:"u-group-name u-text"},[t._v(t._s(e.attr_group_name))]),i("v-uni-view",{staticClass:"dir-left-wrap"},t._l(e.attr_list,function(o,n){return i("v-uni-view",{key:n,class:["u-group-item",o.select?"u-checked "+t.themeObject.back:"u-unchecked",o.num_0?"u-attr_num_0":""],on:{click:function(i){i=t.$handleEvent(i),t.storeAttr(o.attr_id,e.attr_group_id,o.num_0)}}},[t._v(t._s(o.attr_name))])}),1)],1):t._e()}),t.is_choose_number?i("v-uni-view",{staticClass:"u-number dir-left-nowrap main-between cross-center"},[i("v-uni-view",{staticClass:"u-text"},[t._v("数量")]),i("v-uni-view",{staticClass:"dir-left-nowrap u-input-box"},[i("v-uni-view",{class:[t.number<=1?"u-reduced-1":"u-reduced-0","u-number-btn"],on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.numberSub(e)}}}),i("v-uni-input",{staticClass:"u-input",attrs:{type:"number"},on:{blur:function(e){e=t.$handleEvent(e),t.numberBlur(e)}},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}}),i("v-uni-view",{staticClass:"u-number-btn u-added-1",on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.numberAdd(e)}}})],1)],1):t._e()],2)],1),i("v-uni-view",{staticClass:"u-bottom dir-left-nowrap"},[t.is_show_left&&("goods"===t.goods.type||t.is_must_left)?i("v-uni-view",{staticClass:"box-grow-1",class:[t.cartClass,t.is_show_right?"bd-btn-left":""],on:{click:function(e){e=t.$handleEvent(e),t.leftSubmit(e)}}},[t._t("left_slot"),t.$slots.left_slot?t._e():[t._v(t._s(t.leftText))]],2):t._e(),t.is_show_right?i("v-uni-view",{staticClass:"box-grow-1",class:[t.$slots.right_slot?"":t.themeObject.mBtn+" u-btn u-btn-color",!t.is_show_left||"goods"!==t.goods.type&&!t.is_must_left?"":"bd-btn-right"],on:{click:function(e){e=t.$handleEvent(e),t.rightSubmit(e)}}},[t._t("right_slot"),t.$slots.right_slot?t._e():[t._v(t._s(t.rightText))]],2):t._e(),t.$slots.right?[t._t("right")]:t._e()],2)],1)],1)],1)},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},"2db6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAABlBMVEX39/eZmZmXx6vxAAAAFElEQVQoz2MY2aD+//8H+BgjGgAAMQANdT7AwNcAAAAASUVORK5CYII="},4772:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".text-center[data-v-2b3e7dbb]{text-align:center}.font-weight[data-v-2b3e7dbb]{font-weight:700}.page-width[data-v-2b3e7dbb]{width:100%}.goods-hover-class[data-v-2b3e7dbb]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-2b3e7dbb]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-2b3e7dbb]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-2b3e7dbb]{width:100%}.u-hover-class[data-v-2b3e7dbb]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-2b3e7dbb]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.goods-name[data-v-2b3e7dbb]{padding:%?24?%;background-color:#fff;color:#353535}.goods-subtitle[data-v-2b3e7dbb]{padding:%?24?%;padding-top:0;font-size:%?24?%;background-color:#fff;color:#999}.attr[data-v-2b3e7dbb]{padding:%?24?% 0;background-color:#f7f7f7}.recommend .recommend-title[data-v-2b3e7dbb]{margin:%?40?% 0 %?32?% 0;font-size:%?24?%;color:#999}.recommend .recommend-title .border[data-v-2b3e7dbb]{border-top:%?1?% solid #bbb;height:0;width:%?40?%;margin:0 %?24?%}.recommend .recommend-title uni-image[data-v-2b3e7dbb]{width:%?24?%;height:%?24?%;display:block;margin-right:%?12?%}.shop-btn[data-v-2b3e7dbb]{height:%?64?%;border:1px solid #cdcdcd;color:#666;background:#fff;width:%?146?%;line-height:%?64?%;border-radius:%?32?%;text-align:center}.bd-bottom[data-v-2b3e7dbb]{height:%?110?%;width:%?750?%;padding:%?20?% %?24?%}.bd-back[data-v-2b3e7dbb]{width:%?66?%;height:100%;margin-right:%?20?%;font-size:%?20?%;color:#888}.bd-icon[data-v-2b3e7dbb]{width:%?30?%;height:%?30?%}.bd-button[data-v-2b3e7dbb]{text-align:center;line-height:%?70?%;font-size:%?26?%;border-radius:%?35?%;width:50%}.bd-btn-left[data-v-2b3e7dbb]{border-top-right-radius:0;border-bottom-right-radius:0}.bd-btn-right[data-v-2b3e7dbb]{border-top-left-radius:0;border-bottom-left-radius:0;color:#fff}.bd-oversell-btn[data-v-2b3e7dbb]{background-color:#cdcdcd;color:#fff;width:100%;text-align:center;line-height:%?70?%;font-size:%?26?%;border-radius:%?35?%}.comments[data-v-2b3e7dbb]{margin-bottom:%?20?%;background-color:#fff}.detail[data-v-2b3e7dbb]{background-color:#fff}.detail uni-image[data-v-2b3e7dbb]{width:100%;height:%?80?%;display:block}.shop-info-1[data-v-2b3e7dbb]{border-radius:%?15?%}.shop-info-2[data-v-2b3e7dbb]{border-radius:%?15?% %?15?% 0 0}.shop-info[data-v-2b3e7dbb]{height:%?124?%;color:#999;font-size:%?24?%;background:#fff;width:%?702?%;margin:%?24?% %?24?% 0 %?24?%}.shop-info>uni-image[data-v-2b3e7dbb]{border-radius:%?8?%;margin:0 %?20?%;height:%?80?%;width:%?80?%}.shop-info .store-name[data-v-2b3e7dbb]{line-height:1.5em;font-size:%?32?%;color:#353535;margin-bottom:%?16?%}.shop-info .store-num[data-v-2b3e7dbb]{margin-right:%?32?%}.shop-info .contain[data-v-2b3e7dbb]{width:%?152?%;height:100%}.shop-info .contain uni-image[data-v-2b3e7dbb]{height:%?40?%;width:%?40?%;display:block}.shop-info .contain uni-view[data-v-2b3e7dbb]{margin-top:%?8?%}.shop-info .store-btn[data-v-2b3e7dbb]{margin:0 %?20?%}.shop-address[data-v-2b3e7dbb]{width:%?702?%;margin:0 %?24?% %?24?% %?24?%;padding:%?20?%;font-size:%?24?%;background:#fff;border-radius:0 0 %?15?% %?15?%}.shop-address .address[data-v-2b3e7dbb]{color:#666;max-height:%?560?%}.shop-address .km[data-v-2b3e7dbb]{color:#999;margin-top:%?10?%}.shop-address .icon-address[data-v-2b3e7dbb]{width:%?120?%;border-left:1px solid #e2e2e2}.shop-address uni-image[data-v-2b3e7dbb]{height:%?32?%;width:%?32?%;display:block}.text[data-v-2b3e7dbb]{color:#fff}.goods-margin[data-v-2b3e7dbb]{margin-top:%?20?%}.u-bottom-height-0[data-v-2b3e7dbb]{height:%?110?%}.u-bottom-height-1[data-v-2b3e7dbb]{height:%?190?%}.u-bottom-fixed[data-v-2b3e7dbb]{position:fixed;bottom:0;left:0;width:100%;z-index:1602;background-color:#fff;-webkit-box-shadow:0 %?-1?% %?20?% %?-15?% #353535;box-shadow:0 %?-1?% %?20?% %?-15?% #353535}body.?%PAGE?%[data-v-2b3e7dbb]{background:#f7f7f7}",""])},"869d":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i("2f62"),n=f(i("12b6")),a=f(i("6132")),s=f(i("24ba")),r=f(i("b4bc")),c=f(i("0e01")),d=f(i("8639")),u=f(i("4c29")),l=f(i("de37")),h=f(i("3e70")),b=f(i("94701")),g=f(i("f0dd"));function f(t){return t&&t.__esModule?t:{default:t}}function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,o)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(i,!0).forEach(function(e){v(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var _={name:"goods",components:{appGoodsBanner:n.default,uOrdinaryList:s.default,uAttr:r.default,appGoodsFullReduce:a.default,bdInfo:c.default,bdXbc:d.default,bdKb:u.default,bdHc:l.default,bdDetail:h.default,bdComments:b.default,appClose:g.default},data:function(){return{showClose:!1,is_open:0,goods:null,full_reduce:null,selectAttr:null,recommend_list:null,attrShow:!1,id:0,mch_id:0,mch_store:null,mch_setting:null,flash_sale:null,poster:this.$api.mch.poster,poster_config:this.$api.mch.poster_config,poster_generate:this.$api.mch.poster_generate,param_content:[]}},computed:p({},(0,o.mapState)({mall:function(t){return t.mallConfig.mall},themeObject:function(t){var e=t.mallConfig.mall.setting.theme_color;return{back:e+"-m-back "+e,backP:e+"-m-back-p "+e,backO:e+"-m-back-o "+e,theme:e,color:e+"-m-text "+e,sBack:e+"-s-back "+e,border:e+"-m-border "+e,mBtn:e+"-m-gradient-btn "+e,sBtn:e+"-s-gradient-btn "+e}},isListUnderlinePrice:function(t){return t.mallConfig.mall.setting.is_list_underline_price}}),{},(0,o.mapState)("gConfig",{iphone:function(t){return t.iphone},iphoneHeight:function(t){return t.iphoneHeight}}),{},(0,o.mapGetters)("mallConfig",{getTheme:"getTheme"})),onLoad:function(t){var e=[t.mch_id,t.id];this.mch_id=e[0],this.id=e[1],this.getAddress(),this.loadRecommend()},onShow:function(){var t=this;this.showClose=!1,setTimeout(function(){t.showClose=!0})},methods:{hShareAppMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.$shareAppMessage({title:this.goods.app_share_title?this.goods.app_share_title:this.goods.name,imageUrl:this.goods.app_share_pic?this.goods.app_share_pic:this.goods.pic_url[0].pic_url,path:"/plugins/mch/goods/goods",desc:this.goods.subtitle,params:{id:this.id,mch_id:this.mch_id}},t)},getMall:function(t){this.is_open=t.is_open},getAddress:function(){var t=this;uni.getLocation({type:"wgs84",success:function(e){t.getMch(e.latitude,e.longitude)},fail:function(e){t.getMch(0,0)}})},getMch:function(t,e){var i=this;i.$showLoading(),i.$request({url:i.$api.mch.detail,data:{id:i.mch_id,latitude:t,longitude:e}}).then(function(t){if(i.$hideLoading(),0===t.code){var e=[t.data.detail,t.data.mchSetting];i.mch_store=e[0],i.mch_setting=e[1],i.getDetail()}else uni.showModal({title:"提示",content:t.msg,showCancel:!1,success:function(t){t.confirm&&uni.navigateBack({delta:1})}})}).catch(function(){i.$hideLoading()})},getDetail:function(){var t=this;this.$showLoading(),this.$request({url:this.$api.mch.goods_detail,data:{id:this.id,mch_id:this.mch_id}}).then(function(e){if(t.$hideLoading(),0===e.code){var i=e.data.detail.goods_activity;t.goods=e.data.detail,t.hShareAppMessage();var o=e.data.detail.param_content;t.param_content=o,i&&(t.full_reduce=i.full_reduce)}else uni.showModal({title:"提示",content:e.msg,showCancel:!1})}).catch(function(){t.$hideLoading()})},loadRecommend:function(){var t=this,e=this;e.$request({url:e.$api.goods.new_recommend,data:{goods_id:e.id},method:"get"}).then(function(e){0===e.code&&(t.recommend_list=e.data.list)})},navMap:function(){uni.openLocation({latitude:parseFloat(this.mch_store.store.latitude),longitude:parseFloat(this.mch_store.store.longitude),name:this.mch_store.store.name,address:this.mch_store.store.address})},onAttr:function(t){var e=t.item;this.selectAttr=e},navService:function(){uni.navigateTo({url:"/pages/web/web?url="+this.mch_setting.web_service_url})},navShop:function(){uni.redirectTo({url:"/plugins/mch/shop/shop?mch_id="+this.mch_id})},back:function(){uni.redirectTo({url:"/pages/index/index"})},favorite:function(){this.goods.favorite?this.goods.favorite=!1:this.goods.favorite=!0,this.$request({url:this.goods.favorite?this.$api.user.favorite_add:this.$api.user.favorite_remove,data:{goods_id:this.goods.id}}).then(function(t){0!==t.code&&uni.showModal({title:"提示",content:t.msg,showCancel:!1})})},clickAttr:function(){"ecard"!==this.goods.type?this.attrShow=!0:uni.showToast({title:"虚拟商品不允许加入购物车",icon:"none"})}}};e.default=_},a80f:function(t,e,i){var o=i("b041");e=t.exports=i("2350")(!1),e.push([t.i,".u-model[data-v-d14666b4]{width:%?750?%}.u-top[data-v-d14666b4]{margin:0 %?24?%;border-bottom:%?1?% solid #e2e2e2;height:%?140?%}.u-close-image[data-v-d14666b4]{width:%?54?%;height:%?78?%;padding:%?24?% 0 %?24?% %?24?%;margin-left:%?24?%}.bd-close-image[data-v-d14666b4]{width:%?30?%;height:%?30?%}.u-pic[data-v-d14666b4]{width:%?200?%;height:%?200?%;padding:%?4?%;border-radius:%?8?%;position:relative;top:%?-64?%;background-color:#fff}.u-img[data-v-d14666b4]{width:%?192?%;height:%?192?%;background-color:#fff}.u-info[data-v-d14666b4]{width:%?424?%;height:%?136?%;padding:%?45?% 0 0 %?24?%}.u-scroll-view[data-v-d14666b4]{width:100%;max-height:calc(80vh - %?154?%)}.u-attr-group[data-v-d14666b4]{margin:%?24?% %?32?% 0 %?32?%;border-bottom:%?1?% solid #e2e2e2}.u-number[data-v-d14666b4]{height:%?124?%;margin:0 %?32?%}.u-group-name[data-v-d14666b4]{margin-bottom:%?20?%}.u-group-item[data-v-d14666b4]{padding:%?15?% %?24?%;border-radius:%?8?%;margin:0 %?20?% %?20?% 0;font-size:%?26?%}.u-checked[data-v-d14666b4]{color:#fff}.u-unchecked[data-v-d14666b4]{background-color:#f2f2f2;color:#353535}.u-attr_num_0[data-v-d14666b4]{background-color:#f7f7f7;color:#cdcdcd}.u-stock[data-v-d14666b4]{font-size:%?24?%;color:#999}.u-price[data-v-d14666b4]{margin-right:%?12?%}.u-input[data-v-d14666b4]{width:%?88?%;height:%?60?%;background-color:#f7f7f7;font-size:%?20?%;color:#353535;text-align:center}.u-input-box[data-v-d14666b4]{width:%?218?%}.u-number-btn[data-v-d14666b4]{height:%?60?%;width:%?60?%;background-repeat:no-repeat;background-size:100% 100%;background-position:50%}.u-number-btn[data-v-d14666b4]:first-child{margin-right:%?5?%}.u-number-btn[data-v-d14666b4]:last-child{margin-left:%?5?%}.u-reduced-1[data-v-d14666b4]{background-image:url("+o(i("1267"))+")}.u-reduced-0[data-v-d14666b4]{background-image:url("+o(i("2db6"))+")}.u-added-1[data-v-d14666b4]{background-image:url("+o(i("d3fe"))+")}.u-text[data-v-d14666b4]{font-size:%?26?%;color:#666}.u-bottom[data-v-d14666b4]{height:%?110?%;width:%?750?%;padding:%?20?% %?24?%}.u-btn[data-v-d14666b4]{text-align:center;line-height:%?70?%;border-radius:%?35?%;font-size:%?26?%;width:calc(50% - %?10?%)}.bd-btn-left[data-v-d14666b4]{margin-right:%?10?%\n    /*border-top-right-radius: 0;*/\n    /*border-bottom-right-radius: 0;*/}.bd-btn-right[data-v-d14666b4]{margin-left:%?10?%\n    /*border-top-left-radius: 0;*/\n    /*border-bottom-left-radius: 0;*/}.u-btn-color[data-v-d14666b4]{color:#fff}",""])},b4bc:function(t,e,i){"use strict";i.r(e);var o=i("26e3"),n=i("f066");for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);i("b5b3");var s=i("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"d14666b4",null);e["default"]=r.exports},b5b3:function(t,e,i){"use strict";var o=i("207b"),n=i.n(o);n.a},d3fe:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAABlBMVEX39/eZmZmXx6vxAAAAGklEQVQoz2MYzICf5oz6//8f4GHQ3hmDGQAAjcAOv+IPUVgAAAAASUVORK5CYII="},e40d:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(i("d55a")),n=r(i("6c9f")),a=r(i("1ed7")),s=i("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,o)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(i,!0).forEach(function(e){u(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l={name:"u-attr",props:{value:{type:[Boolean,Number]},goods:{type:Object,default:function(){return{}},required:!0},themeObject:{type:Object},checked:{type:Object},is_show_price:{type:Boolean,default:!0},is_show_left:{type:Boolean,default:!0},is_must_left:{type:Boolean,default:!1},is_show_right:{type:Boolean,default:!0},is_choose_number:{type:Boolean,default:!0},leftText:{type:String,default:"加入购物车"},rightText:{type:String,default:"立即购买"},leftFunc:{type:Boolean},rightFunc:{type:Boolean},sign:{type:String},again:{type:Number},attentionSign:{type:String}},data:function(){return{newValue:!1,picUrl:null,newGroup:[],number:1}},created:function(){"community"==this.sign&&(this.number=1)},methods:{close:function(){this.$emit("input",!1)},turnOn:function(){this.$emit("input",!0)},inArray:function(t,e){return e.some(function(e){return t===e})},identifier:function(t,e,i){var o=this;t.forEach(function(t){t.attr_list.forEach(function(n){var a="".concat(t.attr_group_id,"-").concat(n.attr_id);o.inArray(a,e)&&!o.inArray(a,i)?n.num_0=!0:n.num_0=!1})})},selectCheck:function(t,e,i){var o=this;t.forEach(function(t){var n=[],a=0;t.attr_list.forEach(function(t){var e="".concat(t.attr_group_id,"-").concat(t.attr_id);o.inArray(e,i)||(a+=1,n.push(e))}),0===t.stock&&a<=1&&Array.prototype.push.apply(e,n),0===a&&o.$emit("check",{item:t,number:1})})},storeAttr:function(t,e,i){var o=this;if(!0!==i){var n=this.newGroup,a=this.copyAttr,s=[];n.forEach(function(i,n){var a=i.attr_list;a.forEach(function(a){i.attr_group_id===e&&(a.attr_id===t?!0===a.select?a.select=!1:a.select=!0:a.select=!1),!0===a.select&&(s.push("".concat(i.attr_group_id,"-").concat(a.attr_id)),0===n&&(o.picUrl=a.pic_url))})});var r=[];this.selectCheck(a,r,s),this.$nextTick(function(){o.number>o.stock&&(o.number=o.stock)}),this.identifier(n,r,s),s.length!==n.length&&this.$emit("check",{item:null,number:1})}},firstSelect:function(){var t=this;if(this.copyGroup&&this.copyAttr){var e=this.copyGroup,i=this.copyAttr,o=e.length,n=[];i.forEach(function(i){var a=i.attr_list;a.forEach(function(a){var s=a.attr_group_id;e.forEach(function(r){if(s===r.attr_group_id){var c=r.attr_list;c.forEach(function(s){s.attr_id===a.attr_id&&i.stock>0&&o>0&&(s.select=!0,n.push("".concat(r.attr_group_id,"-").concat(s.attr_id)),o===e.length&&(t.picUrl=s.pic_url),o--)})}})})});var a=[];this.selectCheck(i,a,n),this.identifier(e,a,n),this.newGroup=e}},numberBlur:function(t){var e=parseInt(t.detail.value);e||(e=1),e>this.stock&&(e=this.stock,uni.showToast({title:"库存不足",icon:"none"})),this.number=e},numberSub:function(){var t=this.number;t>1&&(t--,this.number=t)},numberAdd:function(){var t=this.number;t++,t>this.stock&&(t=this.stock,uni.showToast({title:"库存不足",icon:"none"})),this.number=t},leftSubmit:function(){!0===this.leftFunc?this.$emit("leftFunc",this.number):this.cart(),this.close()},rightSubmit:function(){if(!this.checked)return uni.showToast({title:"请先选规格",icon:"none"}),!1;if(!this.$user.isLogin())return this.$user.getInfo();var t=[];this.checked.attr_list.forEach(function(e){t.push({attr_id:e.attr_id,attr_group_id:e.attr_group_id})});var e={mch_id:this.goods.mch_id?this.goods.mch_id:0,goods_list:[{id:this.goods.id,attrs:t,num:this.number,cat_id:0,goods_attr_id:this.checked.id}]};!0===this.rightFunc?this.$emit("rightFunc",e):this.shop(e),this.close()},shop:function(t){uni.navigateTo({url:"/pages/order-submit/order-submit?mch_list=".concat(JSON.stringify([t]))})},cart:function(){var t=this;if(!this.checked)return uni.showToast({title:"请先选规格",icon:"none"}),!1;"ecard"!==this.goods.type&&this.$request({url:this.$api.cart.add,method:"post",data:{goods_id:this.checked.goods_id,attr:this.checked.id,num:this.number}}).then(function(e){0===e.code?(uni.showToast({title:e.msg,icon:"none"}),t.$emit("cart",t.checked,t.number),t.close()):uni.showToast({title:e.msg,icon:"none",duration:2500})})},clickImg:function(t){this.$jwx.previewImage({current:t,urls:[t]})}},components:{uPopup:o.default,appPrice:n.default,appMemberMark:a.default},computed:d({imgUrl:function(){return this.picUrl?this.picUrl:this.goods?this.goods.cover_pic:""},stock:function(){return this.$validation.isEmpty(this.checked)?this.$validation.isEmpty(this.goods)?void 0:this.goods.goods_num:this.checked.stock},sellPrice:function(){return this.$validation.isEmpty(this.checked)?this.$validation.isEmpty(this.goods)?void 0:this.goods.hasOwnProperty("price_min")?this.goods.price_min:this.goods.price:1===this.goods.level_show?this.checked.price_member:this.checked.price},copyGroup:function(){if(this.goods){console.log(this.goods.attr_groups);var t=this.$utils.deepClone(this.goods.attr_groups);console.log(t);for(var e=0;e<t.length;e++)t[e].attr_list.forEach(function(t){t.select=!1,t.num_0=!1});return t}},copyAttr:function(){if(this.goods)return this.$utils.deepClone(this.goods.attr)},cartClass:function(){return"a"===this.themeObject.theme||"b"===this.themeObject.theme||"f"===this.themeObject.theme?this.themeObject.sBtn+" u-btn u-btn-color ":this.themeObject.sBtn+" u-btn  "+this.themeObject.color}},(0,s.mapGetters)({userInfo:"user/info"})),watch:{value:{handler:function(t){this.newValue=t,!1!==t&&this.$validation.isEmpty(this.checked)&&this.$utils.throttle(this.firstSelect,800)},immediate:!0},number:{handler:function(t){this.$emit("check",{item:this.checked,number:t})}},again:{handler:function(){this.firstSelect()}}}};e.default=l},f066:function(t,e,i){"use strict";i.r(e);var o=i("e40d"),n=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);e["default"]=n.a},fec9:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[t.goods?t._e():i("v-uni-view",{staticClass:"u-goods-detail"}),t.goods?[i("app-goods-banner",{attrs:{"pic-list":t.goods.pic_url,share:t.goods.share,goods_id:t.id,sign:"mch","video-url":t.goods.video_url}}),i("v-uni-view",[i("bd-info",{attrs:{theme:t.themeObject,name:t.goods.name,subtitle:t.goods.subtitle,"level-show":t.goods.level_show,"flash-sale":t.flash_sale,price:t.goods.price,"original-price":t.goods.original_price,"price-max":t.goods.price_max,"price-min":t.goods.price_min,"price-member-max":t.goods.price_member_max,"price-member-min":t.goods.price_member_min,sales:t.goods.sales,unit:t.goods.unit,"is-sales":t.goods.is_sales,"goods-id":t.goods.id,"extra-quick-share":t.goods.extra_quick_share,"app-share-pic":t.goods.app_share_pic,"app-share-title":t.goods.app_share_title,"poster-config":t.poster_config+"&goods_id="+t.goods.id+"&mch_id="+t.goods.mch_id,"poster-generate":t.poster_generate+"&goods_id="+t.goods.id+"&mch_id="+t.goods.mch_id,"has-poster-nav":!0,"share-url":t.poster+"&goods_id="+t.goods.id+"&mch_id="+t.goods.mch_id,goods:t.goods},on:{share:function(e){e=t.$handleEvent(e),t.hShareAppMessage(e)}}})],1),t.mch_store?[i("v-uni-view",{staticClass:"shop-info dir-left-nowrap cross-center",attrs:{clas:t.mch_store.distance?"shop-info-2":"shop-info-1"}},[i("v-uni-image",{staticClass:"box-grow-0",attrs:{src:t.mch_store.store.cover_url},on:{click:function(e){e=t.$handleEvent(e),t.navShop(e)}}}),i("v-uni-view",{staticClass:"dir-top-nowrap box-grow-1",on:{click:function(e){e=t.$handleEvent(e),t.navShop(e)}}},[i("v-uni-view",{staticClass:"store-name t-omit"},[t._v(t._s(t.mch_store.store.name))]),i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"store-num"},[t._v("商品数量: "+t._s(t.mch_store.goods_count))]),i("v-uni-view",[t._v("已售: "+t._s(t.mch_store.order_goods_count))])],1)],1),i("v-uni-view",{staticClass:"box-grow-0"},[t.mch_setting.is_web_service?i("v-uni-view",{staticClass:"contain main-center cross-center dir-top-nowrap",on:{click:function(e){e=t.$handleEvent(e),t.navService(e)}}},[i("v-uni-image",{staticClass:"store-icon-contain",attrs:{src:t.mch_setting.web_service_pic?t.mch_setting.web_service_pic:"../image/goods-contact.png"}}),i("v-uni-view",{staticClass:"store-contain"},[t._v("客服")])],1):i("v-uni-view",{staticClass:"main-center store-btn"},[i("v-uni-view",{staticClass:"shop-btn",on:{click:function(e){e=t.$handleEvent(e),t.navShop(e)}}},[t._v("进店逛逛")])],1)],1)],1),t.mch_store.distance?i("v-uni-view",{staticClass:"shop-address dir-left-nowrap cross-top"},[i("v-uni-view",{staticClass:"dir-top-nowrap box-grow-1"},[i("v-uni-view",{staticClass:"address"},[t._v(t._s(t.mch_store.store.address))]),i("v-uni-view",{staticClass:"km"},[t._v("距离"+t._s(t.mch_store.distance))])],1),i("v-uni-view",{staticClass:"box-grow-0 icon-address main-center",on:{click:function(e){e=t.$handleEvent(e),t.navMap(e)}}},[i("v-uni-image",{attrs:{src:"../image/summary-address.png"}})],1)],1):t._e()]:t._e(),i("bd-xbc",{attrs:{coAttr:t.is_open,"attr-list":t.selectAttr&&t.selectAttr.attr_list,type:t.goods.type,"guarantee-title":t.goods.guarantee_title,"guarantee-pic":t.goods.guarantee_pic,param_content:t.param_content,param_name:t.goods.param_name,services:t.goods.services,"attr-groups":t.goods.attr_groups,"goods-stock":t.goods.goods_stock},on:{openAttr:function(e){e=t.$handleEvent(e),t.clickAttr()}}}),i("bd-hc",{attrs:{integral:t.goods.goods_marketing_award.integral,coupon:t.goods.goods_marketing_award.coupon,card:t.goods.goods_marketing_award.card,balance:t.goods.goods_marketing_award.balance,theme:t.themeObject}}),i("bd-kb",{attrs:{limit:t.goods.goods_marketing.limit,express:t.goods.express,shipping:t.goods.goods_marketing.shipping,pickup:t.goods.goods_marketing.pickup}}),i("bd-comments",{attrs:{"goods-id":t.goods.id}}),i("bd-detail",{attrs:{detail:t.goods.detail}}),i("v-uni-view",{staticClass:"recommend"},[i("v-uni-view",{staticClass:"recommend-title dir-left-nowrap main-center"},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center"},[i("v-uni-view",{staticClass:"border"}),i("v-uni-image",{attrs:{src:"../../../static/image/icon/icon-favorite.png"}}),i("v-uni-view",{staticStyle:{color:"#353535"}},[t._v("您或许喜欢")]),i("v-uni-view",{staticClass:"border"})],1)],1),i("v-uni-view",{staticClass:"recommend-list"},[i("u-ordinary-list",{attrs:{"is-under-line-price":1==t.isListUnderlinePrice,"theme-object":t.themeObject,isShowAttr:!0,list:t.recommend_list,theme:t.getTheme,"list-style":2}})],1)],1),i("v-uni-view",{staticClass:"safe-area-inset-bottom"},[i("v-uni-view",{staticClass:"u-bottom-height",class:t.full_reduce?"u-bottom-height-1":"u-bottom-height-0"})],1),1==t.is_open?i("v-uni-view",{staticClass:"safe-area-inset-bottom u-bottom-fixed"},[t.full_reduce?i("v-uni-view",[i("app-goods-full-reduce",{attrs:{theme:t.getTheme,full_reduce:t.full_reduce}})],1):t._e(),i("v-uni-view",{staticClass:"bd-bottom dir-left-nowrap"},[i("v-uni-view",{staticClass:"bd-back dir-top-nowrap main-center cross-center box-grow-0",on:{click:function(e){e=t.$handleEvent(e),t.navShop(e)}}},[i("v-uni-image",{staticClass:"bd-icon",attrs:{src:"../../../static/image/icon/icon-mch.png"}}),i("v-uni-text",[t._v("店铺")])],1),i("v-uni-view",{staticClass:"bd-back dir-top-nowrap main-center cross-center box-grow-0",on:{click:function(e){e=t.$handleEvent(e),t.back(e)}}},[i("v-uni-image",{staticClass:"bd-icon",attrs:{src:"../../../static/image/icon/index.png"}}),i("v-uni-text",[t._v("首页")])],1),i("v-uni-view",{staticClass:"bd-back dir-top-nowrap main-center cross-center box-grow-0",on:{click:function(e){e=t.$handleEvent(e),t.favorite(e)}}},[i("v-uni-image",{staticClass:"bd-icon",attrs:{src:t.goods.favorite?"../../../static/image/icon/icon-favorite-active.png":"../../../static/image/icon/icon-favorite.png"}}),i("v-uni-text",[t._v("收藏")])],1),i("v-uni-view",{staticClass:"box-grow-1 dir-left-nowrap"},[t.goods.goods_stock>0?[i("v-uni-view",{staticClass:"bd-button bd-btn-left",class:"a"===t.getTheme||"b"===t.getTheme||"f"===t.getTheme?t.themeObject.sBtn+" text ":t.themeObject.sBtn+" "+t.getTheme+"-m-text "+t.getTheme,on:{click:function(e){e=t.$handleEvent(e),t.clickAttr(e)}}},[t._v("加入购物车")]),i("v-uni-view",{class:[t.themeObject.mBtn,"bd-btn-right","bd-button"],on:{click:function(e){e=t.$handleEvent(e),t.clickAttr(e)}}},[t._v("立即购买")])]:i("v-uni-view",{staticClass:"bd-oversell-btn"},[t._v("已售罄")])],2)],1)],1):t._e(),i("u-attr",{attrs:{goods:t.goods,themeObject:t.themeObject,checked:t.selectAttr},on:{check:function(e){e=t.$handleEvent(e),t.onAttr(e)}},model:{value:t.attrShow,callback:function(e){t.attrShow=e},expression:"attrShow"}})]:t._e(),t.showClose?i("app-close",{attrs:{mch_id:t.mch_id,modal:!1},on:{update:function(e){e=t.$handleEvent(e),t.getMall(e)}}}):t._e()],2)},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},ff65:function(t,e,i){"use strict";i.r(e);var o=i("869d"),n=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);e["default"]=n.a}}]);