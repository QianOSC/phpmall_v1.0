(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-app_admin-add-goods-add-goods"],{"0489":function(e,t,i){var a=i("8e59");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("32211b36",a,!0,{sourceMap:!1,shadowMode:!1})},"1f69":function(e,t,i){"use strict";i.r(t);var a=i("ca7a"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=n.a},"341d":function(e,t,i){"use strict";var a=i("0489"),n=i.n(a);n.a},6683:function(e,t,i){"use strict";i.r(t);var a=i("cf9b"),n=i("1f69");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("341d");var s=i("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"bf4799ac",null);t["default"]=r.exports},"8e59":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".text-center[data-v-bf4799ac]{text-align:center}.font-weight[data-v-bf4799ac]{font-weight:700}.page-width[data-v-bf4799ac]{width:100%}.goods-hover-class[data-v-bf4799ac]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-bf4799ac]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-bf4799ac]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-bf4799ac]{width:100%}.u-hover-class[data-v-bf4799ac]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-bf4799ac]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.title[data-v-bf4799ac]{font-size:%?28?%;color:#999;margin:%?30?% %?24?% %?13?%}.goods-img[data-v-bf4799ac]{background-color:#fff;padding:%?32?% %?24?%}.goods-list[data-v-bf4799ac]{margin-top:%?8?%;margin-left:%?-24?%}.goods-item[data-v-bf4799ac]{position:relative;margin-left:%?24?%;margin-top:%?24?%;height:%?218?%;width:%?218?%}.label[data-v-bf4799ac]{font-size:%?28?%;color:#999}.goods-cover[data-v-bf4799ac]{height:%?218?%;width:%?218?%}.del-btn[data-v-bf4799ac]{height:%?40?%;width:%?40?%;position:absolute;right:%?-8?%;top:%?-16?%}.main-img[data-v-bf4799ac]{height:%?40?%;line-height:%?40?%;width:%?218?%;text-align:center;font-size:%?24?%;color:#fff;background-color:rgba(68,109,253,.5);position:absolute;bottom:0;left:0}.add-goods-img[data-v-bf4799ac]{background-color:#f4f5f9;position:relative;margin-left:%?24?%;margin-top:%?24?%;height:%?218?%;width:%?218?%;font-size:%?24?%;color:#999;z-index:10;text-align:center}.add-goods-img uni-image[data-v-bf4799ac]{height:%?40?%;width:%?40?%;margin:%?70?% auto %?10?%}.goods-info[data-v-bf4799ac]{background-color:#fff;padding:0 %?24?%}.goods-info .info-item[data-v-bf4799ac]:first-of-type{border-top:0}.goods-info .info-item.goods-name[data-v-bf4799ac]{border-top:%?1?% solid #e2e2e2}.form-label[data-v-bf4799ac]{width:%?176?%}.info-item[data-v-bf4799ac]{border-top:%?1?% solid #e2e2e2;height:%?88?%;line-height:%?88?%;font-size:%?28?%;color:#353535}uni-view.input[data-v-bf4799ac]{height:%?80?%;line-height:%?80?%;white-space:nowrap;overflow:auto}uni-view.input.placeholder[data-v-bf4799ac]{color:#cdcdcd}.input[data-v-bf4799ac]{width:%?476?%;background-color:#fff;padding-left:%?25?%;font-size:%?28?%}.input.unit[data-v-bf4799ac]{width:%?396?%}.unit-width[data-v-bf4799ac]{width:%?112?%;text-align:right}.cat-info[data-v-bf4799ac]{width:%?526?%;color:#666}.to-more[data-v-bf4799ac]{height:%?24?%;width:%?12?%;margin-left:%?10?%}.price-input[data-v-bf4799ac]{position:relative;color:#666;height:%?88?%}.money[data-v-bf4799ac]{position:absolute;height:%?88?%;line-height:%?88?%;width:%?20?%;left:0;top:0}.attr-info[data-v-bf4799ac]{background-color:#fff;padding:0 %?24?%;margin-top:%?20?%}.attr-input[data-v-bf4799ac]{width:%?638?%}.attr-input .input[data-v-bf4799ac]{color:#666;width:%?412?%}.attr-input .input.unit[data-v-bf4799ac]{width:%?330?%}.express-setting[data-v-bf4799ac]{height:%?136?%;padding:%?16?% 0 %?20?%;border-top:%?1?% solid #e2e2e2}.express-input[data-v-bf4799ac]{position:relative}.express-input .input-item[data-v-bf4799ac]{font-size:%?28?%;color:#353535}.express-input .input-item .input[data-v-bf4799ac]{width:%?650?%}.express-input .input[data-v-bf4799ac]{width:%?702?%;padding-left:%?216?%}.express-input .integral[data-v-bf4799ac]{position:absolute;left:0;z-index:2}.express-etc[data-v-bf4799ac]{color:#999;font-size:%?24?%;margin-top:%?16?%}.form-button[data-v-bf4799ac]{width:%?656?%;margin:0 auto}.save[data-v-bf4799ac]{height:%?80?%;line-height:%?80?%;text-align:center;width:%?300?%;margin:%?80?% 0;font-size:%?28?%;color:#446dfd;border:%?2?% solid #446dfd;background-color:#fff;border-radius:%?40?%}.send[data-v-bf4799ac]{height:%?80?%;line-height:%?80?%;text-align:center;width:%?300?%;margin:%?80?% %?24?%;font-size:%?28?%;color:#fff;background-color:#446dfd;border-radius:%?40?%}.dialog[data-v-bf4799ac]{position:fixed;height:100%;width:100%;bottom:0;left:0;z-index:10;background-color:rgba(0,0,0,.3)}.dialog.iphone_x .picker-list[data-v-bf4799ac]{padding-bottom:%?50?%}.picker[data-v-bf4799ac]{width:100%;height:%?440?%;color:#999}.dialog.iphone_x .picker[data-v-bf4799ac]{height:%?490?%}.picker-list[data-v-bf4799ac]{background-color:#fff;padding-top:%?20?%;position:fixed;bottom:0;left:0;width:100%}.picker-header[data-v-bf4799ac]{padding:0 %?24?%;color:#446dfd;font-size:%?32?%}.is_cat[data-v-bf4799ac]{padding:%?50?% 0 0 %?24?%;color:#666;font-size:%?28?%;border-bottom:%?1?% solid #e2e2e2}.is_cat uni-text[data-v-bf4799ac]{margin-right:%?48?%;display:inline-block;max-width:%?130?%;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.is_cat uni-text[data-v-bf4799ac]:last-of-type{padding-bottom:%?24?%;color:#446dfd;border-bottom:%?2?% solid #446dfd}.type-list[data-v-bf4799ac]{max-height:%?400?%;overflow:auto}.type-choose[data-v-bf4799ac]{padding:0 %?24?% 0 %?72?%;line-height:%?36?%;color:#353535;font-size:%?32?%;text-align:left;margin:%?35?% 0 %?50?%}.type-choose .active[data-v-bf4799ac]{color:#446dfd}.active-status[data-v-bf4799ac]{width:%?36?%;height:%?36?%;display:block;margin-right:%?24?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.attr-btn-item[data-v-bf4799ac]{padding-left:%?88?%;background-color:#fff}.dialog-item[data-v-bf4799ac]{padding-top:%?20?%;position:fixed;top:25%;left:0;right:0;margin:0 auto;width:%?620?%;border-radius:%?16?%;background-color:#fff}.btn-area[data-v-bf4799ac]{height:%?88?%;position:relative;border-top:%?1?% solid #e2e2e2}.btn-area .line[data-v-bf4799ac]{height:%?32?%;width:%?1?%;background-color:#e2e2e2;position:absolute;top:%?28?%;left:0;right:0;margin:0 auto}.submit-btn[data-v-bf4799ac]{height:%?88?%;line-height:%?88?%;font-size:%?32?%;color:#666;width:%?310?%;text-align:center}.submit-btn.be-submit[data-v-bf4799ac]{color:#446dfd}.dialog-title[data-v-bf4799ac]{text-align:center;margin:%?15?% 0 %?50?%}.img-border[data-v-bf4799ac]{height:%?250?%;width:%?250?%;margin-top:%?-16?%;margin-left:%?-16?%}.screen[data-v-bf4799ac]{height:100%;overflow:hidden}.error-info[data-v-bf4799ac]{text-align:center;margin:%?50?%}.submit-info[data-v-bf4799ac]{text-align:center;margin-bottom:%?60?%}.picker-text[data-v-bf4799ac]{line-height:%?88?%;color:#446dfd;font-size:%?32?%;padding-left:%?24?%}.picker-text.sure-color[data-v-bf4799ac]{color:#446dfd}.picker-text.cardinal-color[data-v-bf4799ac]{color:#999}.picker-text.even-color[data-v-bf4799ac]{color:#cdcdcd}.integral[data-v-bf4799ac]{font-size:%?28?%;color:#353535}.integral-info .express-setting[data-v-bf4799ac]{height:%?164?%}.integral-info .express-setting[data-v-bf4799ac]:first-of-type{border-top:0}.label-info[data-v-bf4799ac]{font-size:%?24?%;color:#999}.goods-type[data-v-bf4799ac]{background-color:#fff;padding:0 %?24?%;margin-bottom:%?18?%}.goods-type .type[data-v-bf4799ac]{border-top:0}.goods-type .select[data-v-bf4799ac]{width:%?408?%}.goods-type .select-label[data-v-bf4799ac]{font-size:%?26?%;margin-left:%?23?%}.service-text[data-v-bf4799ac]{width:%?500?%;text-align:right;overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis}body.?%PAGE?%[data-v-bf4799ac]{background:#f7f7f7}",""])},ca7a:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(i("a34a")),n=i("2f62"),o=s(i("d5ea"));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i,a,n,o,s){try{var r=e[o](s),c=r.value}catch(d){return void i(d)}r.done?t(c):Promise.resolve(c).then(a,n)}function c(e){return function(){var t=this,i=arguments;return new Promise(function(a,n){var o=e.apply(t,i);function s(e){r(o,a,n,s,c,"next",e)}function c(e){r(o,a,n,s,c,"throw",e)}s(void 0)})}}function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(i,!0).forEach(function(t){v(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u={data:function(){return{postageIndex:-1,deliveryIndex:-1,height:0,give_integral:0,forehead_integral:0,windowHeight:0,beSubmit:!1,inputName:!0,form:{cats:[],name:"",cost_price:"",price:"",original_price:"",type:"goods",plugin_data:{ecard:{ecard_id:0}},attr_default_name:"默认规格"},cats:[],forehead:-1,unit:"件",iphone_x:!1,set_attr:!1,is_default_services:!0,modal:!1,error:!1,set_cat:!1,set_postage:!1,set_delivery:!1,set_service:!1,set_card:!1,confine:!1,is_service:!1,goods_card:[],img:[],card:[],goods_detail:[],beMove:!1,service:[],postage:[],delivery:[],bePostage:"",beDelivery:"",beService:[],default_service:[],newIndex:"0",index:"0",attr:!1,have_children:!1,disabled:!0,imgHidden:!0,flag:!1,x:0,y:0,id:0,first_service:!0,choose_list:[],elements:[],img_src:"",dialog:!1,loading:!1,ecard_dialog:!1,is_ecard:0,ecard_api_url:"",ecardBePostage:"",ecard_postage:[],ecard_set_postage:!1,ecard_postageIndex:-1,beginIndex:null,dialogType:""}},computed:l({},(0,n.mapState)({userInfo:function(e){return e.user.info},adminImg:function(e){return e.mallConfig.__wxapp_img.app_admin}})),methods:{changeConfine:function(){this.confine=!this.confine,this.confine&&-1==this.form.confine_count&&(this.form.confine_count="")},money:function(e){var t=e.toString();return 0==t.indexOf(".")&&(t="0"+t),t=t.replace(/[^\d.]/g,""),t=t.replace(/\.{2,}/g,"."),t=t.replace(".","$#$").replace(/\./g,"").replace("$#$","."),t=t.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),t.indexOf(".")<0&&""!=t&&(t=parseFloat(t)),+t},costChange:function(e){this.form.cost_price=this.money(e.detail.value)},originalChange:function(e){this.form.original_price=this.money(e.detail.value)},priceChange:function(e){this.form.price=this.money(e.detail.value)},nameBlur:function(){this.inputName=!this.inputName},catchTouchMove:function(){return!1},toSubmit:function(){var e=this;if(e.loading)return!1;uni.showLoading({mask:!0,title:"提交中..."}),e.loading=!0,e.beSubmit=!1,e.$request({url:e.$api.app_admin.edit,data:{form:JSON.stringify(e.form),attrGroups:JSON.stringify(e.form.attr_groups)},method:"post"}).then(function(t){e.loading=!1,e.$hideLoading(),uni.hideLoading(),e.loading=!1,0==t.code&&0==t.code?(uni.showToast({title:t.msg,duration:1e3}),setTimeout(function(){uni.navigateBack()},500)):uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(t){e.loading=!1,e.$hideLoading(),uni.hideLoading()})},submit:function(e){var t=!1,i=this,a=i.form,n=[];if(!(i.img.length>0))return i.error="请上传商品图片",!1;if(a.pic_url=i.img,!a.name)return i.error="请设置商品名称",!1;if(0==i.cats.length)return i.error="请设置商品分类",!1;for(var o in i.cats)n.push(i.cats[o].value);if(!i.unit)return i.error="请设置商品单位",!1;if(a.unit=i.unit,0!=a.cost_price&&!a.cost_price)return i.error="请设置商品成本价",!1;if(a.cost_price<0)return i.error="成本价不得小于零",!1;if(0!=a.original_price&&!a.original_price)return i.error="请设置商品原价",!1;if(a.original_price<0)return i.error="商品原价不得小于零",!1;if(0!=a.price&&!a.price)return i.error="请设置商品售价",!1;if(i.set_attr){if(a.use_attr=1,a.goods_num=0,!a.attr_groups||0==a.attr_groups.length)return i.error="请设置商品规格",!1;t=!0}else{if(a.use_attr=0,a.attr=[],!a.goods_num)return i.error="商品库存不得为空",!1;if(a.goods_num<0)return i.error="商品库存不得小于零",!1;t=!0}if(a.cards=i.goods_card,a.is_default_services=1,a.services=[],i.confine||(i.form.confine_count=-1),0==i.is_default_services&&(a.is_default_services=0,i.beService.length>0&&(a.services=i.beService)),a.status=e,!(i.goods_detail.length>0))return i.error="请设置图文描述",!1;for(var s in a.detail="",i.goods_detail)"img"==i.goods_detail[s].type?a.detail+='<p><img src="'+i.goods_detail[s].pic_url+'"/></p>':"line"==i.goods_detail[s].type?a.detail+='<p><img src="'+i.adminImg.line+'"/></p>':"text"==i.goods_detail[s].type&&(a.detail+="<p>"+i.goods_detail[s].text+"</p>");a.mchCats||(a.mchCats=[]),i.forehead_integral&&(i.forehead_integral>0?(a.forehead_integral_type=1,a.forehead_integral=i.forehead_integral):(a.forehead_integral_type=2,a.forehead_integral=i.forehead_integral.replace("%",""))),i.give_integral&&(i.give_integral>0?(a.give_integral_type=1,a.give_integral=i.give_integral):(a.give_integral_type=2,a.give_integral=i.give_integral.replace("%",""))),a.virtual_sales||(a.virtual_sales=0),a.cover_pic||(a.cover_pic=""),a.sort||(a.sort=100),a.accumulative||(a.accumulative=1),a.member_price||(a.member_price={}),a.freight_id=i.bePostage.id,a.freight=i.bePostage,a.shipping_id=i.beDelivery.id,a.shipping=i.beDelivery,a.individual_share||(a.individual_share=0),a.is_level||(a.is_level=0),a.individual_share||(a.individual_share=0),a.video_url||(a.video_url=""),t&&(i.form=a,i.form.cats=n,i.id>0&&(i.form.id=i.id),0==e?i.toSubmit():i.beSubmit=!0)},close:function(){this.error=null,this.modal=!1,this.beSubmit=!1},inputAttr:function(e){this.attr[e].attr_list[0].attr_id=(+e+2).toString()},_longtap:function(e,t,i){var a=this,n=uni.createSelectorQuery(),o=n.selectAll(".move-img");o.fields({dataset:!0,rect:!0},function(e){a.elements=e}).exec(),a.img[t].pic_url="",a.x=i.currentTarget.offsetLeft,a.y=i.currentTarget.offsetTop,a.imgHidden=!1,a.flag=!0,a.beMove=!0,a.img_src=e,a.beginIndex=t},touchend:function(e){var t=this;if(t.flag){for(var i=e.changedTouches[0].pageX,a=e.changedTouches[0].pageY,n=t.elements,o=t.img,s=t.beginIndex,r=0;r<n.length;r++){var c=n[r];if(i>c.left&&i<c.right&&a>c.top&&a<c.bottom){var d=c.dataset.index;if(s<d){for(var l=o[s],v=s;v<d;v++)o[v]=o[v+1];o[d]=l}if(s>d){for(var u=o[s],f=s;f>d;f--)o[f]=o[f-1];o[d]=u}o[d].pic_url=t.img_src,t.img=o}}t.img[s].pic_url||(t.img[s].pic_url=t.img_src),t.imgHidden=!0,t.flag=!1,t.beMove=!1,t.beginIndex=null}},touchm:function(e){if(this.flag){var t=e.touches[0].pageX,i=e.touches[0].pageY;this.x=t-60,this.y=i-189}},cancelService:function(){var e=this.beService,t=this.service;e.length>0?t.forEach(function(t,i){t.isChoose=!1,e.forEach(function(e){e.id==t.id&&(t.isChoose=!0)})}):t.forEach(function(e,t){e.isChoose=!1}),this.beService=e,this.service=t,this.set_service=!1,this.is_service=!1,setTimeout(function(e){uni.pageScrollTo({scrollTop:45550,duration:0})},0)},submitService:function(){var e=[];this.service.forEach(function(t){t.isChoose&&e.push(t)}),this.beService=e,this.set_service=!1,this.is_service=!1,setTimeout(function(e){uni.pageScrollTo({scrollTop:45550,duration:0})},0)},choose:function(e){var t=this;t.service.forEach(function(i){i.id==e.id&&(i.isChoose=!i.isChoose,t.$forceUpdate())})},toGoodsDetail:function(){uni.navigateTo({url:"/pages/app_admin/goods-detail/goods-detail"})},addImg:function(){var e=this,t=9-e.img.length;uni.chooseImage({count:Number(t),success:function(i){uni.showLoading({mask:!0,title:"上传中..."});var a=function(a){if(a>=t-e.img.length)return"break";var n=new Image;n.src=i.tempFilePaths[a],n.onload=function(){var i=document.createElement("canvas");i.width=n.width,i.height=n.height;var a=i.getContext("2d");a.drawImage(n,0,0,n.width,n.height);var s=n.src.substring(n.src.lastIndexOf(".")+1).toLowerCase(),r=i.toDataURL("image/"+s);(0,o.default)({url:e.$api.upload.file,maxNum:t,success:function(t){t.res;var i=t.header;e.$request({url:e.$api.upload.file+"&name=base64",header:i,method:"post",data:{database:r}}).then(function(t){uni.hideLoading(),0===t.code?e.img.push({pic_url:t.data.url,id:t.data.id}):uni.showModal({title:"",content:t.msg,showCancel:!1})})}})}};for(var n in i.tempFilePaths){var s=a(n);if("break"===s)break}}})},del_img:function(e){this.img.splice(e,1)},chooseCat:function(){uni.navigateTo({url:"/pages/app_admin/goods-cat/goods-cat"})},chooseAttr:function(){uni.navigateTo({url:"/pages/app_admin/goods-attr/goods-attr"}),uni.setStorage({key:"goods_unit",data:this.unit})},bindChange:function(e){this.newIndex=e.detail.value[0]},toggle:function(e){this.choose_list=[],this.dialog=!1,this.set_cat=!1,"postage"==this.dialogType&&(1==e?this.set_postage&&(this.bePostage=this.postage[this.newIndex]):this.set_postage=!1),"delivery"==this.dialogType&&(1==e?this.set_delivery&&(this.beDelivery=this.delivery[this.newIndex]):this.set_delivery=!1),this.dialogType=""},chooseService:function(){var e=this;e.first_service?e.$request({url:e.$api.app_admin.service}).then(function(t){if(e.$hideLoading(),0==t.code){e.service=t.data.list,0==t.data.list.length?e.modal=!0:e.is_service=!0;var i=[],a=!0,n=!1,o=void 0;try{for(var s,r=t.data.list[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var c=s.value;c.isChoose=!1,1==c.is_default&&(i.push(c),c.isChoose=!0)}}catch(d){n=!0,o=d}finally{try{a||null==r.return||r.return()}finally{if(n)throw o}}e.set_service=!0,e.beService=i,e.default_service=i,e.first_service=!1}else uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(){e.$hideLoading()}):0==e.service.length?e.modal=!0:e.is_service=!0},chooseCard:function(){var e=this;e.$request({url:e.$api.app_admin.card}).then(function(t){e.$hideLoading(),0==t.code?(e.card=t.data.list,0==t.data.list.length?(e.set_card=!0,e.modal=!0):uni.navigateTo({url:"/pages/app_admin/goods-card/goods-card"})):uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(){e.$hideLoading()})},chooseDelivery:function(){var e=this;e.$request({url:e.$api.app_admin.delivery_rules}).then(function(t){if(e.$hideLoading(),0==t.code)if(0==t.data.list.length)e.set_delivery=!0,e.modal=!0,e.delivery=t.data.list;else{var i=[];t.data.list.forEach(function(e,a){i.push(t.data.list[a].id)});var a=i.indexOf(e.beDelivery.id);a>-1?(e.deliveryIndex=a,e.newIndex=a):e.beDelivery="",e.set_delivery=!0,e.dialog=!0,e.dialogType="delivery",e.delivery=t.data.list}else uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(){e.$hideLoading()})},chooseExpress:function(){var e=this;e.$request({url:e.$api.app_admin.postage}).then(function(t){if(e.$hideLoading(),0==t.code)if(0==t.data.list.length)e.set_postage=!0,e.modal=!0,e.postage=t.data.list;else{var i=[];t.data.list.forEach(function(e,a){i.push(t.data.list[a].id)});var a=i.indexOf(e.bePostage.id);a>-1?(e.postageIndex=a,e.newIndex=a):e.bePostage="",e.set_postage=!0,e.dialog=!0,e.dialogType="postage",e.postage=t.data.list}else uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(){e.$hideLoading()})},getService:function(e){var t=this;this.$request({url:this.$api.app_admin.service}).then(function(i){t.$hideLoading();var a=i.code,n=i.data,o=i.msg;if(0===a){for(var s in t.service=n.list,t.service)t.service[s].isChoose=!1;if(e>0)for(var r in t.beService)for(var c in t.service)t.service[c].id==t.beService[r].id&&(t.service[c].isChoose=!0,t.first_service=!1);else t.beService=[],n.list.forEach(function(e){e.isChoose=!1,1==e.is_default&&(t.beService.push(e),e.isChoose=!0)})}else uni.showToast({title:o,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getPostage:function(e){var t=this;this.$request({url:this.$api.app_admin.postage}).then(function(i){if(t.$hideLoading(),0==i.code){if(t.postage=i.data.list,e>0)return!1;t.bePostage="",t.bePostage=i.data.list[0]}else uni.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getDelivery:function(e){var t=this;this.$request({url:this.$api.app_admin.delivery_rules}).then(function(i){if(t.$hideLoading(),0==i.code){if(t.delivery=i.data.list,e>0)return!1;t.beDelivery="",t.beDelivery=i.data.list[0]}else uni.showToast({title:i.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getCard:function(){var e=this;this.$request({url:this.$api.app_admin.card}).then(function(t){e.$hideLoading(),0==t.code?e.card=t.data.list:uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(){e.$hideLoading()})},getDetail:function(){var e=c(a.default.mark(function e(t){var i,n,o,s,r,c,d,l,v,u,f,g,h,p,m,_,w,b,C,y,x,k,$,S,E,I,T,O;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$request({url:this.$api.app_admin.goods_edit,data:{id:t}});case 2:return i=e.sent,n=i.code,o=i.data,s=i.msg,e.next=6,this.$hideLoading();case 6:if(this.getService(t),this.getPostage(t),this.getDelivery(t),0===n){for(I in this.form=o.detail,r=this.form,c=r.pic_url,d=r.cats,l=r.use_attr,v=r.services,u=r.freight,f=r.cards,g=r.confine_count,h=r.is_default_services,p=r.forehead_integral,m=r.forehead_integral_type,_=r.give_integral,w=r.give_integral_type,b=r.attr_groups,C=r.attr,y=r.detail,x=r.unit,k=r.shipping,this.img=c,this.cats=d,this.set_attr=1==l,this.beService=v,this.bePostage=u,this.beDelivery=k,this.goods_card=f,this.unit=x,g>0&&(this.confine=!0),0==h&&(this.is_default_services=!1),this.forehead_integral=+p,2==m&&(this.forehead_integral=p+"%"),this.give_integral=+_,2==w&&(this.give_integral=_+"%"),b.length>0&&C.length>0&&(this.attr=!0,uni.setStorage({key:"goods_attr_groups",data:b}),uni.setStorage({key:"goods_attr",data:C})),$=y.split(/<\/p>|<br\/>|<img /),S=[],E=void 0,$)$[I]=$[I].replace(/<p>/g,"").replace(/<\/p>/g,""),E={type:""},$[I].indexOf("src")>-1?(E.type="img",E.id="",T=$[I].indexOf(".png")>-1?$[I].indexOf(".png")+4:$[I].length-1,$[I].indexOf(".jpg")>-1&&(T=$[I].indexOf(".jpg")+4),$[I].indexOf(".jpeg")>-1&&(T=$[I].indexOf(".jpeg")+5),$[I].indexOf(".gif")>-1&&(T=$[I].indexOf(".gif")+4),E.pic_url=$[I].slice($[I].indexOf("http"),T)):(E.type="text",E.text=$[I]),S[I]=E;for(O in S)""===S[O].text&&S.splice(O,1);this.goods_detail=S,uni.setStorage({key:"goods_card",data:f}),uni.setStorage({key:"goods_cat",data:this.cats}),uni.setStorage({key:"goods_detail",data:S})}else uni.showToast({title:s,icon:"none",duration:1e3});case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),chooseECard:function(){var e=this;0===this.id&&this.$request({url:this.$api.app_admin.ecard_api_url+this.ecard_api_url}).then(function(t){var i=t.code,a=t.data,n=t.msg;if(e.$hideLoading(),0===i)if(0===a.length)e.ecard_set_postage=!0,e.ecard_postage=a;else{var o=[];a.forEach(function(e,t){o.push(a[t].id)});var s=o.indexOf(e.form.plugin_data.ecard.ecard_id);s>-1?(e.ecard_postageIndex=s,e.newIndex=s):e.form.plugin_data.ecard={ecard_id:0,name:""},e.ecard_set_postage=!0,e.ecard_dialog=!0,e.ecard_postage=a}else uni.showToast({title:n,icon:"none",duration:1e3})}).catch(function(){e.$hideLoading()})},typeChange:function(e){0===this.id&&(this.form.type=e.target.value)},getGoodsConfig:function(){var e=c(a.default.mark(function e(){var t;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$request({url:this.$api.app_admin.goods_config});case 2:t=e.sent,0===t.code&&(this.is_ecard=t.data.is_ecard,this.ecard_api_url=t.data.ecard_api_url);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),ecardToggle:function(e){this.ecard_dialog=!1,1==e?this.ecard_set_postage&&(this.form.plugin_data.ecard={ecard_id:this.ecard_postage[this.newIndex].id,name:this.ecard_postage[this.newIndex].name}):this.ecard_set_postage=!1}},onLoad:function(e){var t=this;uni.getSystemInfo({success:function(e){t.windowHeight=e.windowHeight,(e.model.indexOf("iPhone X")>-1||e.model.indexOf("iPhone 11")>-1||e.model.indexOf("iPhone11")>-1||e.model.indexOf("iPhone12")>-1||e.model.indexOf("Unknown Device")>-1)&&(t.iphone_x=!0)}}),uni.getSystemInfo({success:function(e){var i=e.windowHeight,a=e.windowWidth,n=750/a;t.height=i*n}}),t.getCard(),t.getGoodsConfig(),uni.removeStorage({key:"goods_card",success:function(){t.goods_card=[]}}),uni.removeStorage({key:"goods_cat"}),uni.removeStorage({key:"goods_unit"}),uni.removeStorage({key:"goods_attr_groups"}),uni.removeStorage({key:"goods_attr"}),uni.removeStorage({key:"temp_attr"}),uni.removeStorage({key:"temp_attr_info"}),uni.removeStorage({key:"goods_detail",success:function(){t.goods_detail=[]}}),e.id>0?(t.$showLoading({type:"global",text:"加载中..."}),t.id=e.id,setTimeout(function(){uni.setNavigationBarTitle({title:"编辑商品"}),t.getDetail(e.id)},500)):(t.getService(),t.getPostage(),t.getDelivery())},onShow:function(){var e=this;uni.getStorage({key:"goods_card",success:function(t){e.goods_card=t.data}}),uni.getStorage({key:"goods_cat",success:function(t){e.cats=t.data}}),uni.getStorage({key:"goods_detail",success:function(t){e.goods_detail=t.data}}),uni.getStorage({key:"goods_attr_groups",success:function(t){e.form.attr_groups=t.data,e.attr=!0}}),uni.getStorage({key:"goods_attr",success:function(t){e.form.attr=t.data}}),uni.removeStorage({key:"temp_attr"}),uni.removeStorage({key:"temp_attr_info"})},watch:{"form.type":{handler:function(e){"goods"===e&&(this.form.plugin_data.ecard.ecard_id=0,this.form.plugin_data.ecard.name="")},deep:!0}}};t.default=u},cf9b:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("app-layout",[i("v-uni-scroll-view",{style:{height:e.windowHeight+"px"},attrs:{"scroll-y":""}},[i("v-uni-view",{staticClass:"title"},[e._v("基本信息")]),1===e.is_ecard?i("v-uni-view",{staticClass:"goods-type"},[i("v-uni-view",{staticClass:"info-item type cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("商品类型")]),i("v-uni-view",{staticClass:"select"},[i("v-uni-radio-group",{staticClass:"dir-left-nowrap main-between",on:{change:function(t){t=e.$handleEvent(t),e.typeChange(t)}}},[i("v-uni-label",{staticClass:"dir-left-nowrap"},[i("v-uni-view",[i("v-uni-radio",{attrs:{disabled:0!==e.id,color:"#446dfd",value:"goods",checked:"goods"===e.form.type}})],1),i("v-uni-view",{staticClass:"select-label"},[e._v("实体商品")])],1),i("v-uni-label",{staticClass:"dir-left-nowrap"},[i("v-uni-view",[i("v-uni-radio",{attrs:{disabled:0!==e.id,color:"#446dfd",value:"ecard",checked:"ecard"===e.form.type}})],1),i("v-uni-view",{staticClass:"select-label"},[e._v("电子卡密")])],1)],1)],1)],1),"ecard"===e.form.type?i("v-uni-view",{staticClass:"info-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[e._v("选择卡密")]),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.chooseECard(t)}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),e.form.plugin_data.ecard.ecard_id>0?i("v-uni-text",[e._v(e._s(e.form.plugin_data.ecard.name))]):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[e._v("未选择")])],1)],1)],1)],1):e._e()],1):e._e(),i("v-uni-view",{staticClass:"goods-img"},[i("v-uni-view",{staticClass:"label"},[i("v-uni-text",{staticStyle:{color:"#353535"}},[e._v("商品图片")]),i("v-uni-text",{staticClass:"label-info"},[e._v("(最多9张，可拖拽改变顺序)")])],1),i("v-uni-view",{staticClass:"goods-list"},[i("v-uni-movable-area",{staticClass:"flex-wrap",staticStyle:{height:"auto",width:"100%"}},[e._l(e.img,function(t,a){return i("v-uni-view",{key:a,staticClass:"goods-item",on:{touchend:function(t){t.stopPropagation(),t=e.$handleEvent(t),e.touchend(t)},touchmove:function(t){t.stopPropagation(),t=e.$handleEvent(t),e.touchm(t)},longpress:function(i){i.stopPropagation(),i=e.$handleEvent(i),e._longtap(t.pic_url,a,i)}}},[i("v-uni-image",{staticClass:"goods-cover move-img",attrs:{mode:"aspectFill","data-index":a,src:t.pic_url}}),e.beMove?e._e():i("v-uni-image",{staticClass:"del-btn",attrs:{src:"./../image/delete.png"},on:{click:function(t){t.stopPropagation(),t=e.$handleEvent(t),e.del_img(a)}}}),0!==a||e.beMove?e._e():i("v-uni-view",{staticClass:"main-img"},[e._v("主图")])],1)}),e.img.length<9?i("v-uni-view",{staticClass:"add-goods-img",on:{click:function(t){t.stopPropagation(),t=e.$handleEvent(t),e.addImg(t)}}},[i("v-uni-image",{attrs:{src:"./../image/add-goods.png"}}),i("v-uni-view",[e._v("添加")])],1):e._e(),i("v-uni-movable-view",{attrs:{"data-index":e.beginIndex,x:e.x,y:e.y,direction:"all",damping:5e3,friction:1,disabled:e.disabled}},[i("v-uni-image",{staticClass:"goods-cover img-border",attrs:{hidden:e.imgHidden,mode:"aspectFill",src:e.img_src}})],1)],2)],1)],1),i("v-uni-view",{staticClass:"goods-info"},[i("v-uni-view",{staticClass:"info-item goods-name cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("商品名称")]),e.inputName?i("v-uni-view",{class:e.form.name.length>0?"input":"input placeholder",on:{click:function(t){t=e.$handleEvent(t),e.nameBlur(t)}}},[e._v(e._s(e.form.name?e.form.name:"请输入商品名称"))]):i("v-uni-input",{staticClass:"input",attrs:{focus:!e.inputName,"placeholder-style":"color: #cdcdcd",placeholder:"请输入商品名称"},on:{blur:function(t){t=e.$handleEvent(t),e.nameBlur(t)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("v-uni-view",{staticClass:"info-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[e._v("商品分类")]),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.chooseCat(t)}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),e.cats.length>0?i("v-uni-text",[e._v("编辑")]):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[e._v("未选择")])],1)],1)],1),i("v-uni-view",{staticClass:"info-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("单位")]),i("v-uni-view",{staticClass:"dir-left-nowrap cross-center"},[i("v-uni-input",{staticClass:"input",attrs:{maxlength:"4","placeholder-style":"color: #cdcdcd",placeholder:"请输入商品单位"},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}})],1)],1)],1),i("v-uni-view",{staticClass:"title"},[e._v(e._s("goods"===e.form.type?"规格、价格及":"价格、")+"库存")]),i("v-uni-view",{staticClass:"goods-info"},["goods"===e.form.type?i("v-uni-view",{staticClass:"info-item main-between"},[i("v-uni-view",[e._v("多规格")]),i("v-uni-switch",{staticStyle:{transform:"scale(0.7)"},attrs:{checked:e.set_attr},on:{change:function(t){t=e.$handleEvent(t),e.set_attr=!e.set_attr}}})],1):e._e(),e.set_attr&&"goods"===e.form.type?i("v-uni-view",{staticClass:"info-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[e._v("商品规格")]),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.chooseAttr(t)}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),e.attr?i("v-uni-text",[e._v("已设置")]):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[e._v("未设置，点击设置")])],1)],1)],1):e._e(),e.set_attr||"goods"!==e.form.type?e._e():i("v-uni-view",{staticClass:"info-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("规格")]),i("v-uni-view",{staticClass:"dir-left-nowrap cross-center price-input"},[i("v-uni-input",{staticClass:"input",attrs:{"placeholder-style":"color: #cdcdcd"},model:{value:e.form.attr_default_name,callback:function(t){e.$set(e.form,"attr_default_name",t)},expression:"form.attr_default_name"}})],1)],1),i("v-uni-view",{staticClass:"info-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("成本价")]),i("v-uni-view",{staticClass:"dir-left-nowrap price-input cross-center main-between"},[i("v-uni-input",{staticClass:"input",attrs:{"placeholder-style":"color: #cdcdcd",placeholder:"请输入成本价",type:"digit"},on:{change:function(t){t=e.$handleEvent(t),e.costChange(t)}},model:{value:e.form.cost_price,callback:function(t){e.$set(e.form,"cost_price",t)},expression:"form.cost_price"}}),i("v-uni-view",[e._v("元")])],1)],1),i("v-uni-view",{staticClass:"info-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("原价")]),i("v-uni-view",{staticClass:"dir-left-nowrap price-input cross-center main-between"},[i("v-uni-input",{staticClass:"input",attrs:{"placeholder-style":"color: #cdcdcd",placeholder:"请输入原价",type:"digit"},on:{change:function(t){t=e.$handleEvent(t),e.originalChange(t)}},model:{value:e.form.original_price,callback:function(t){e.$set(e.form,"original_price",t)},expression:"form.original_price"}}),i("v-uni-view",[e._v("元")])],1)],1),i("v-uni-view",{staticClass:"info-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("售价")]),i("v-uni-view",{staticClass:"dir-left-nowrap price-input cross-center main-between"},[i("v-uni-input",{staticClass:"input",attrs:{"placeholder-style":"color: #cdcdcd",placeholder:"请输入售价",type:"digit"},on:{change:function(t){t=e.$handleEvent(t),e.priceChange(t)}},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),i("v-uni-view",[e._v("元")])],1)],1),e.set_attr?e._e():i("v-uni-view",{staticClass:"info-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("库存")]),i("v-uni-view",{staticClass:"dir-left-nowrap price-input cross-center main-between"},[i("v-uni-input",{staticClass:"input unit",attrs:{"placeholder-style":"color: #cdcdcd",placeholder:"请输入库存",type:"number"},model:{value:e.form.goods_num,callback:function(t){e.$set(e.form,"goods_num",t)},expression:"form.goods_num"}}),i("v-uni-view",{staticClass:"unit-width"},[e._v(e._s(e.unit))])],1)],1),e.set_attr?e._e():i("v-uni-view",{staticClass:"info-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("货号")]),i("v-uni-view",{staticClass:"dir-left-nowrap price-input cross-center"},[i("v-uni-input",{staticClass:"input",attrs:{"placeholder-style":"color: #cdcdcd",placeholder:"请输入货号"},model:{value:e.form.goods_no,callback:function(t){e.$set(e.form,"goods_no",t)},expression:"form.goods_no"}})],1)],1),e.set_attr||"goods"!==e.form.type?e._e():i("v-uni-view",{staticClass:"info-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("重量")]),i("v-uni-view",{staticClass:"dir-left-nowrap cross-center price-input"},[i("v-uni-input",{staticClass:"input",attrs:{"placeholder-style":"color: #cdcdcd",placeholder:"请输入重量",type:"number"},model:{value:e.form.goods_weight,callback:function(t){e.$set(e.form,"goods_weight",t)},expression:"form.goods_weight"}}),i("v-uni-view",[e._v("g")])],1)],1)],1),i("v-uni-view",{staticClass:"title"},[e._v(e._s("goods"===e.form.type?"运费、包邮及":"")+"限购")]),i("v-uni-view",{staticClass:"goods-info"},["goods"===e.form.type?i("v-uni-view",{staticClass:"info-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[e._v("运费设置")]),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.chooseExpress(t)}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),e.bePostage.id>-1?i("v-uni-text",[e._v(e._s(e.bePostage.name))]):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[e._v("未选择")])],1)],1)],1):e._e(),"goods"===e.form.type?i("v-uni-view",{staticClass:"info-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[e._v("包邮规则")]),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.chooseDelivery(t)}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),e.beDelivery.id>-1?i("v-uni-text",[e._v(e._s(e.beDelivery.name))]):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[e._v("未选择")])],1)],1)],1):e._e(),i("v-uni-view",{staticClass:"info-item main-between"},[i("v-uni-view",[e._v("限购")]),i("v-uni-switch",{staticStyle:{transform:"scale(0.7)"},attrs:{checked:e.confine},on:{change:function(t){t=e.$handleEvent(t),e.changeConfine(t)}}})],1),e.confine?i("v-uni-view",{staticClass:"info-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[e._v("限购数量")]),i("v-uni-view",{staticClass:"dir-left-nowrap cross-center price-input"},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center price-input"},[i("v-uni-input",{staticClass:"input",staticStyle:{width:"396rpx"},attrs:{"placeholder-style":"color: #cdcdcd",placeholder:"请输入限购数量",type:"number"},model:{value:e.form.confine_count,callback:function(t){e.$set(e.form,"confine_count",t)},expression:"form.confine_count"}}),i("v-uni-view",[e._v(e._s(e.unit))])],1)],1)],1):e._e()],1),i("v-uni-view",{staticClass:"title"},[e._v("商品图文描述")]),i("v-uni-view",{staticClass:"goods-info"},[i("v-uni-view",{staticClass:"info-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[e._v("商品图文描述")]),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.toGoodsDetail(t)}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),e.goods_detail.length>0?i("v-uni-text",[e._v("已添加")]):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[e._v("未添加")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"title"},[e._v("积分设置")]),i("v-uni-view",{staticClass:"goods-info integral-info"},[i("v-uni-view",{staticClass:"express-setting"},[i("v-uni-view",{staticClass:"express-input cross-center"},[i("v-uni-view",{staticClass:"integral"},[e._v("积分赠送")]),i("v-uni-input",{staticClass:"input",attrs:{"placeholder-style":"color: #cdcdcd",placeholder:"请输入积分赠送数量或比例"},model:{value:e.give_integral,callback:function(t){e.give_integral=t},expression:"give_integral"}})],1),i("v-uni-view",{staticClass:"express-etc"},[e._v("会员购物赠送积分，如果不填或填0，则默认为不赠送，如果带%则为按成交价格的比例计算积分。")])],1),i("v-uni-view",{staticClass:"express-setting"},[i("v-uni-view",{staticClass:"express-input cross-center"},[i("v-uni-view",{staticClass:"integral"},[e._v("积分抵扣")]),i("v-uni-input",{staticClass:"input",attrs:{"placeholder-style":"color: #cdcdcd",placeholder:"请输入积分抵扣数量或比例"},model:{value:e.forehead_integral,callback:function(t){e.forehead_integral=t},expression:"forehead_integral"}})],1),i("v-uni-view",{staticClass:"express-etc"},[e._v("如果不填或填0，则不支持积分抵扣；如果带%则为按成交价格的比例计算抵扣多少元。")])],1)],1),i("v-uni-view",{staticClass:"title"},[e._v("卡券")]),i("v-uni-view",{staticClass:"goods-info"},[i("v-uni-view",{staticClass:"info-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[e._v("卡券")]),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.chooseCard(t)}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),e.goods_card.length>0?i("v-uni-text",{staticClass:"service-text"},e._l(e.goods_card,function(t,a){return i("v-uni-text",{key:a},[a>0?i("v-uni-text",[e._v("，")]):e._e(),e._v(e._s(t.name))],1)}),1):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[e._v("未选择")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"title"},[e._v("服务内容")]),i("v-uni-view",{staticClass:"goods-info"},[i("v-uni-view",{staticClass:"info-item main-between"},[i("v-uni-view",[e._v("默认服务")]),i("v-uni-switch",{staticStyle:{transform:"scale(0.7)"},attrs:{checked:e.is_default_services},on:{change:function(t){t=e.$handleEvent(t),e.is_default_services=!e.is_default_services}}})],1),0==e.is_default_services?i("v-uni-view",{staticClass:"info-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[e._v("服务内容")]),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.chooseService(t)}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),e.beService.length>0?i("v-uni-text",{staticClass:"service-text"},e._l(e.beService,function(t,a){return i("v-uni-text",{key:a},[a>0?i("v-uni-text",[e._v("，")]):e._e(),e._v(e._s(t.name))],1)}),1):e.service.length>0?i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[e._v("未选择")]):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[e._v("未设置")])],1)],1)],1):e._e()],1),i("v-uni-view",{staticClass:"main-between form-button"},[i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.submit(0)}}},[i("v-uni-view",{staticClass:"save"},[e._v("保存")])],1),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.submit(1)}}},[i("v-uni-view",{staticClass:"send"},[e._v("上架")])],1)],1),e.dialog?i("v-uni-view",{class:["dialog",e.iphone_x?"iphone_x":""]},[i("v-uni-view",{staticClass:"picker-list"},[i("v-uni-view",{staticClass:"main-between picker-header"},[i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.toggle(t)}}},[e._v("取消")]),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.toggle(1)}}},[e._v("确定")])],1),"postage"==e.dialogType?i("v-uni-picker-view",{staticClass:"picker",attrs:{value:[e.set_postage?e.postageIndex:-1]},on:{change:function(t){t=e.$handleEvent(t),e.bindChange(t)}}},[i("v-uni-picker-view-column",e._l(e.postage,function(t,a){return i("v-uni-view",{key:t.id,class:["cross-center picker-text",{"sure-color":e.newIndex===a,"cardinal-color":e.newIndex===a+1||e.newIndex===a-1,"even-color":e.newIndex===a+2||e.newIndex===a-2}]},[e._v(e._s(t.name))])}),1)],1):e._e(),"delivery"==e.dialogType?i("v-uni-picker-view",{staticClass:"picker",attrs:{value:[e.set_delivery?e.deliveryIndex:-1]},on:{change:function(t){t=e.$handleEvent(t),e.bindChange(t)}}},[i("v-uni-picker-view-column",e._l(e.delivery,function(t,a){return i("v-uni-view",{key:t.id,class:["cross-center picker-text",{"sure-color":e.newIndex===a,"cardinal-color":e.newIndex===a+1||e.newIndex===a-1,"even-color":e.newIndex===a+2||e.newIndex===a-2}]},[e._v(e._s(t.name))])}),1)],1):e._e()],1)],1):e._e(),e.ecard_dialog?i("v-uni-view",{class:["dialog",e.iphone_x?"iphone_x":""]},[i("v-uni-view",{staticClass:"picker-list"},[i("v-uni-view",{staticClass:"main-between picker-header"},[i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.ecardToggle(t)}}},[e._v("取消")]),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.ecardToggle(1)}}},[e._v("确定")])],1),i("v-uni-picker-view",{staticClass:"picker",attrs:{value:[e.ecard_set_postage?e.ecard_postageIndex:-1]},on:{change:function(t){t=e.$handleEvent(t),e.bindChange(t)}}},[i("v-uni-picker-view-column",e._l(e.ecard_postage,function(t,a){return i("v-uni-view",{key:t.id,class:["cross-center picker-text",{"sure-color":e.newIndex===a,"cardinal-color":e.newIndex===a+1||e.newIndex===a-1,"even-color":e.newIndex===a+2||e.newIndex===a-2}]},[e._v(e._s(t.name))])}),1)],1)],1)],1):e._e()],1),e.is_service?i("v-uni-view",{staticClass:"dialog"},[i("v-uni-view",{staticClass:"dialog-item"},[i("v-uni-view",{staticClass:"dialog-title"},[e._v("服务内容")]),i("v-uni-view",{staticClass:"type-list"},e._l(e.service,function(t,a){return e.is_service?i("v-uni-view",{key:a,staticClass:"dir-left-nowrap type-choose",on:{click:function(i){i=e.$handleEvent(i),e.choose(t)}}},[t.isChoose?i("v-uni-image",{staticClass:"active-status",attrs:{src:"./../image/active.png"}}):i("v-uni-image",{staticClass:"active-status",attrs:{src:"/static/image/icon/form-er.png"}}),i("v-uni-view",{class:[t.isChoose?"active":""]},[e._v(e._s(t.name))])],1):e._e()}),1),i("v-uni-view",{staticClass:"main-center btn-area"},[i("v-uni-view",{staticClass:"submit-btn",on:{click:function(t){t=e.$handleEvent(t),e.cancelService(t)}}},[e._v("取消")]),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"submit-btn be-submit",on:{click:function(t){t=e.$handleEvent(t),e.submitService(t)}}},[e._v("确认")])],1)],1)],1):e._e(),e.modal?i("v-uni-view",{staticClass:"dialog"},[i("v-uni-view",{staticClass:"dialog-item"},[i("v-uni-view",{staticClass:"dialog-title"},[e._v("提示")]),e.set_cat?i("v-uni-view",{staticClass:"error-info"},[e._v("您暂未设置分类")]):e._e(),e.set_postage&&0==e.postage.length?i("v-uni-view",{staticClass:"error-info"},[e._v("您暂未设置运费模板")]):e._e(),e.set_delivery&&0==e.delivery.length?i("v-uni-view",{staticClass:"error-info"},[e._v("您暂未设置包邮规则")]):e._e(),e.set_service&&0==e.service.length?i("v-uni-view",{staticClass:"error-info"},[e._v("您暂未设置服务内容")]):e._e(),e.set_card&&0==e.card.length?i("v-uni-view",{staticClass:"error-info"},[e._v("您暂未设置卡券")]):e._e(),i("v-uni-view",{staticClass:"error-info"},[e._v("请前往商城后台设置")]),i("v-uni-view",{staticClass:"main-center btn-area"},[i("v-uni-view",{staticClass:"submit-btn be-submit",on:{click:function(t){t=e.$handleEvent(t),e.close(t)}}},[e._v("确认")])],1)],1)],1):e._e(),e.error?i("v-uni-view",{staticClass:"dialog"},[i("v-uni-view",{staticClass:"dialog-item"},[i("v-uni-view",{staticClass:"dialog-title"},[e._v("提示")]),i("v-uni-view",{staticClass:"error-info"},[e._v(e._s(e.error))]),i("v-uni-view",{staticClass:"main-center btn-area"},[i("v-uni-view",{staticClass:"submit-btn be-submit",on:{click:function(t){t=e.$handleEvent(t),e.close(t)}}},[e._v("确认")])],1)],1)],1):e._e(),e.beSubmit?i("v-uni-view",{staticClass:"dialog"},[i("v-uni-view",{staticClass:"dialog-item"},[i("v-uni-view",{staticClass:"dialog-title"},[e._v("提示")]),i("v-uni-view",{staticClass:"submit-info"},[e._v("是否确认要上架此商品")]),i("v-uni-view",{staticClass:"main-center btn-area"},[i("v-uni-view",{staticClass:"submit-btn",on:{click:function(t){t=e.$handleEvent(t),e.close(t)}}},[e._v("取消")]),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"submit-btn be-submit",on:{click:function(t){t=e.$handleEvent(t),e.toSubmit(t)}}},[e._v("确认")])],1)],1)],1):e._e()],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})}}]);