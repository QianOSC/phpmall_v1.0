(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-card-clerk-clerk"],{"141d":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".text-center[data-v-2a90c762]{text-align:center}.font-weight[data-v-2a90c762]{font-weight:700}.page-width[data-v-2a90c762]{width:100%}.goods-hover-class[data-v-2a90c762]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-2a90c762]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-2a90c762]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-2a90c762]{width:100%}.u-hover-class[data-v-2a90c762]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-2a90c762]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.box[data-v-2a90c762]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.box .item[data-v-2a90c762]{margin-bottom:%?140?%}.card-info[data-v-2a90c762]{margin:0 %?24?%;border-radius:%?15?%;background-color:#fff;position:relative;margin-top:%?70?%;text-align:center;padding:%?80?% %?24?% %?36?%;margin-bottom:%?20?%}.card-img[data-v-2a90c762]{height:%?88?%;width:%?88?%;position:absolute;left:0;right:0;margin:0 auto;top:%?-44?%;border-radius:%?44?%}.card-name[data-v-2a90c762]{font-size:%?46?%;max-width:70%;color:#353535;margin:0 auto %?38?%}.card-status[data-v-2a90c762]{width:%?160?%;height:%?60?%;position:absolute;bottom:%?30?%;left:0;right:0;margin:0 auto;line-height:%?60?%;font-size:15px;border-radius:%?30?%;background-color:#feeeee;color:#ff4544}.card-about[data-v-2a90c762]{padding:%?40?%;width:90%;margin:0 auto %?50?%;border-radius:%?15?%;background-color:#fff;font-size:15px}.about-title[data-v-2a90c762]{color:#999;margin-bottom:%?40?%}.submit-btn[data-v-2a90c762]{width:%?702?%;height:%?88?%;margin:0 auto;padding:0;text-align:center;line-height:%?88?%;border-radius:%?44?%;background-color:#ff4544;color:#fff;font-size:%?32?%}.bottom[data-v-2a90c762]{position:fixed;bottom:0;height:%?140?%;width:100%;padding:0 %?24?%;border-top:%?1?% solid #e2e2e2;background:#fff}.order-info[data-v-2a90c762]{width:%?702?%;margin:%?24?%;background-color:#fff;border-radius:%?16?%;padding:%?28?% %?24?%;font-size:%?28?%;color:#353535}.info-label[data-v-2a90c762]{color:#999}.card-other[data-v-2a90c762]{text-align:left;font-size:%?28?%;color:#353535;border-top:%?1?% solid #e2e2e2}.other-label[data-v-2a90c762]{color:#999;margin:%?30?% 0 %?22?%}.bg[data-v-2a90c762]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);z-index:1000}.dialog[data-v-2a90c762]{width:%?630?%;background-color:#fff;padding-top:%?40?%;border-radius:%?16?%;font-size:%?32?%;color:#353535;text-align:center}.dialog .title[data-v-2a90c762]{font-size:%?32?%;color:#353535;margin-bottom:%?40?%}.dialog-content[data-v-2a90c762]{margin:%?40?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.dialog-content .input-number[data-v-2a90c762]{width:%?288?%;background:#f7f7f7;border-radius:%?16?%;height:%?80?%;margin-right:%?16?%;line-height:%?80?%}.dialog-btn[data-v-2a90c762]{color:#ff4544;height:%?88?%;line-height:%?88?%;border-top:%?1?% solid #e2e2e2}.line[data-v-2a90c762]{height:%?45?%;width:%?1?%;background-color:#e2e2e2}body.?%PAGE?%[data-v-2a90c762]{background:#f7f7f7}",""])},2494:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){return{detail:{start_time:"",end_time:""},msg:null,is_clerk:0,submit:!1,cardId:null,surplus_number:0,useNumber:"",qrCodeId:-1}},name:"clerk",methods:{getList:function(t){var i=this;i.$showLoading({text:"加载中..."}),i.$request({url:i.$api.card.detail,data:{cardId:t,qr_code_id:i.qrCodeId}}).then(function(e){i.$hideLoading(),0===e.code?(i.detail=e.data.card,i.cardId=t):uni.showToast({title:e.msg,icon:"none",duration:1e3}),i.detail.clerk_number&&i.detail.clerk_number>=1&&uni.showModal({title:"提示",content:"核销码已失效",showCancel:!1,complete:function(t){uni.navigateBack()}})}).catch(function(){i.$hideLoading()})},clerk:function(){var t=this;if(uni.showLoading({title:"核销中..."}),!t.useNumber)return uni.showToast({title:"请输入核销次数",icon:"none",duration:2e3}),!1;t.$request({url:t.$api.card.clerk,data:{cardId:t.cardId,use_number:t.useNumber,qr_code_id:t.qrCodeId}}).then(function(i){uni.hideLoading(),0===i.code?(t.is_clerk=i.data.is_clerk,t.msg=i.msg,t.submit=!1,t.surplus_number=i.data.surplus_number):uni.showToast({title:i.msg,icon:"none",duration:2e3})}).catch(function(){uni.hideLoading()})},closeDialog:function(){if(this.msg){if(this.msg="",this.is_clerk){this.surplus_number>0?"/plugins/clerk/order/order?status=2&type=0":"/plugins/clerk/order/order?status=2&type=1",uni.navigateBack({})}}else this.msg=""}},onLoad:function(t){t.qr_code_id&&(this.qrCodeId=t.qr_code_id),this.getList(t.cardId)}};i.default=a},"27ed":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("app-layout",[e("v-uni-view",{staticClass:"box"},[e("v-uni-view",{staticClass:"item"},[t.detail.name?e("v-uni-view",{staticClass:"order-info"},[e("v-uni-view",{staticClass:"dir-left-nowrap"},[e("v-uni-view",{staticClass:"info-label"},[t._v("收货人：")]),e("v-uni-view",[e("v-uni-view",[t._v(t._s(t.detail.name))])],1)],1),e("v-uni-view",{staticClass:"dir-left-nowrap"},[e("v-uni-view",{staticClass:"info-label"},[t._v("联系方式：")]),e("v-uni-view",[e("v-uni-view",[t._v(t._s(t.detail.mobile))])],1)],1)],1):t._e(),e("v-uni-view",{staticClass:"card-info"},[e("v-uni-image",{staticClass:"card-img",attrs:{src:t.detail.pic_url}}),e("v-uni-view",{staticClass:"card-name t-omit-two"},[t._v(t._s(t.detail.card_name))]),e("v-uni-view",{staticClass:"card-other"},[e("v-uni-view",{staticClass:"other-label"},[t._v("有效时间")]),e("v-uni-view",[t._v(t._s(t.detail.start_time)+" - "+t._s(t.detail.end_time))]),e("v-uni-view",{staticClass:"other-label"},[t._v("发放时间")]),e("v-uni-view",[t._v(t._s(t.detail.created_at))]),e("v-uni-view",{staticClass:"other-label"},[t._v("使用说明")]),e("v-uni-text",[t._v(t._s(t.detail.content))])],1)],1),e("v-uni-view",{staticClass:"order-info"},[e("v-uni-view",{staticStyle:{"margin-bottom":"24rpx"}},[t._v("核销信息")]),e("v-uni-view",{staticClass:"dir-left-nowrap"},[e("v-uni-view",{staticClass:"info-label"},[t._v("剩余次数：")]),e("v-uni-view",[e("v-uni-view",[t._v(t._s(t.detail.number-t.detail.use_number)+"次")])],1)],1),e("v-uni-view",{staticClass:"dir-left-nowrap"},[e("v-uni-view",{staticClass:"info-label"},[t._v("已核销次数：")]),e("v-uni-view",[e("v-uni-view",[t._v(t._s(t.detail.use_number)+"次")])],1)],1),e("v-uni-view",{staticClass:"dir-left-nowrap"},[e("v-uni-view",{staticClass:"info-label"},[t._v("总次数：")]),e("v-uni-view",[e("v-uni-view",[t._v(t._s(t.detail.number)+"次")])],1)],1)],1)],1),0==t.detail.is_use&&0==t.detail.receive_id?e("v-uni-view",{staticClass:"bottom cross-center"},[e("v-uni-view",{on:{click:function(i){i=t.$handleEvent(i),t.submit=!0}}},[e("v-uni-button",{staticClass:"submit-btn"},[t._v("核销卡券")])],1)],1):t._e()],1),t.msg||t.submit?e("v-uni-view",{staticClass:"bg cross-center main-center",on:{touchmove:function(i){i.stopPropagation(),i.preventDefault(),i=t.$handleEvent(i)}}},[e("v-uni-view",{staticClass:"dialog"},[e("v-uni-view",{staticClass:"title"},[t._v(t._s(t.submit?"输入本次核销次数":"提示"))]),t.msg?e("v-uni-view",{staticClass:"dialog-content"},[t._v(t._s(t.msg))]):t._e(),t.submit?e("v-uni-view",{staticClass:"dialog-content"},[e("v-uni-input",{staticClass:"input-number",attrs:{type:"number"},model:{value:t.useNumber,callback:function(i){t.useNumber=i},expression:"useNumber"}}),t._v("次")],1):t._e(),t.msg?e("v-uni-view",{staticClass:"dialog-btn",on:{click:function(i){i=t.$handleEvent(i),t.closeDialog(i)}}},[t._v("确认")]):t._e(),t.submit?e("v-uni-view",{staticClass:"dialog-btn main-center cross-center"},[e("v-uni-view",{staticStyle:{color:"#666666",width:"50%"},on:{click:function(i){i=t.$handleEvent(i),t.submit=!1}}},[t._v("取消")]),e("v-uni-view",{staticClass:"line"}),e("v-uni-view",{staticStyle:{width:"50%"},on:{click:function(i){i=t.$handleEvent(i),t.clerk(i)}}},[t._v("确定")])],1):t._e()],1)],1):t._e()],1)},n=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return n})},7058:function(t,i,e){"use strict";e.r(i);var a=e("2494"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);i["default"]=n.a},b522:function(t,i,e){var a=e("141d");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("10bfe0ec",a,!0,{sourceMap:!1,shadowMode:!1})},e2ce:function(t,i,e){"use strict";var a=e("b522"),n=e.n(a);n.a},e78d:function(t,i,e){"use strict";e.r(i);var a=e("27ed"),n=e("7058");for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);e("e2ce");var s=e("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"2a90c762",null);i["default"]=r.exports}}]);