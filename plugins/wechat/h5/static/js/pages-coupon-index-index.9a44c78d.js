(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-coupon-index-index"],{"1c03":function(e,t,i){var a=i("e85f");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("481ee3d8",a,!0,{sourceMap:!1,shadowMode:!1})},"49f4":function(e,t,i){"use strict";var a=i("1c03"),n=i.n(a);n.a},"6f49":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("app-layout",[i("app-tab-nav",{attrs:{tabList:e.tabList,activeItem:e.activeTab,theme:e.getTheme},on:{click:function(t){t=e.$handleEvent(t),e.tabStatus(t)}}}),0==e.list.length?i("v-uni-view",{staticClass:"tip"},[e._v("暂无相关优惠券")]):i("v-uni-view",{staticClass:"list"},e._l(e.list,function(t){return i("v-uni-view",{key:t.id,on:{click:function(i){i=e.$handleEvent(i),e.toDetail(t.id)}}},[i("v-uni-view",{staticClass:"list-item"},[1==e.activeTab?i("v-uni-image",{attrs:{src:"./../image/img-coupon-bg-0.png"}}):i("v-uni-image",{attrs:{src:"./../image/img-coupon-bg-1.png"}}),2==e.activeTab?i("v-uni-image",{staticClass:"status",attrs:{src:"./../image/img-coupon-status-icon-1.png"}}):e._e(),3==e.activeTab?i("v-uni-image",{staticClass:"status",attrs:{src:"./../image/img-coupon-status-icon-2.png"}}):e._e(),i("v-uni-view",{staticClass:"item-left dir-top-nowrap main-center"},[2==t.coupon.type?i("v-uni-view",{staticClass:"coupon-price t-omit"},[e._v("￥"+e._s(e._f("reservedNum")(t.coupon.sub_price)))]):i("v-uni-view",{staticClass:"coupon-price t-omit"},[e._v(e._s(e._f("reservedNum")(t.coupon.discount))+"折")]),t.coupon_min_price>0?i("v-uni-view",{staticClass:"t-omit",staticStyle:{"font-size":"10px"}},[e._v("满"+e._s(e._f("reservedNum")(t.coupon_min_price))+"可用")]):i("v-uni-view",{staticStyle:{"font-size":"10px"}},[e._v("无门槛使用")]),t.discount_limit?i("v-uni-view",{staticStyle:{"font-size":"10px"}},[e._v("优惠上限:￥"+e._s(e._f("reservedNum")(t.discount_limit)))]):e._e()],1),i("v-uni-view",{staticClass:"item-right"},[i("v-uni-view",{staticClass:"item-name t-omit t-large t-large-color"},[e._v(e._s(t.coupon.name))]),i("v-uni-view",{staticClass:"t-small-color time-area"},[e._v(e._s(t.start_time)+" - "+e._s(t.end_time))]),3==t.coupon.appoint_type?i("v-uni-view",[e._v("全场通用")]):4==t.coupon.appoint_type?i("v-uni-view",[e._v("仅限当面付活动使用")]):5==t.coupon.appoint_type?i("v-uni-view",[e._v("仅限礼品卡使用")]):i("v-uni-view",[e._v("限品类")])],1)],1)],1)}),1),i("v-uni-view",{class:["footer-space",e.iphone_x?"iphone_x":""]}),i("v-uni-view",{class:["coupon-footer",e.iphone_x?"iphone_x":""],on:{click:function(t){t=e.$handleEvent(t),e.toList(t)}}},[e._v("去领券")])],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},"73d5":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{class:[e.shadow?"main-between app-nav shadow":"main-between app-nav"],style:[{"line-height":(e.setHeight?e.setHeight:90)+"rpx","font-size":(e.fontSize?e.fontSize:28)+"rpx",height:(e.setHeight?e.setHeight:90)+"rpx",top:e.setTop>0?"calc("+e.setTop+"rpx + var(--window-top))":"var(--window-top)",top:e.setTop>0?e.setTop+"rpx":"0",backgroundColor:""+(e.background?e.background:"#fff")}]},e._l(e.tabList,function(t){return i("v-uni-view",{key:t.id,staticClass:"box-grow-1 nav-item",style:[{borderBottom:(e.border?1:0)+"rpx solid #e2e2e2"}],attrs:{"data-id":t.id},on:{click:function(t){t=e.$handleEvent(t),e.handleClick(t)}}},[i("v-uni-text",{class:[t.id==e.activeItem?"active-text "+e.theme+"-m-text "+e.theme:""],style:[{height:(e.setHeight?e.setHeight:90)+"rpx",padding:"0 "+e.padding+"rpx"}]},[e._v(e._s(t.name))])],1)}),1),i("v-uni-view",{style:[{height:(e.placeHeight?e.placeHeight:90)+"rpx"}]})],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},7923:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".text-center[data-v-8ec8e3ce]{text-align:center}.font-weight[data-v-8ec8e3ce]{font-weight:700}.page-width[data-v-8ec8e3ce]{width:100%}.goods-hover-class[data-v-8ec8e3ce]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-8ec8e3ce]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-8ec8e3ce]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-8ec8e3ce]{width:100%}.u-hover-class[data-v-8ec8e3ce]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-8ec8e3ce]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.footer-space[data-v-8ec8e3ce]{height:%?100?%}.footer-space.iphone_x[data-v-8ec8e3ce]{height:%?150?%}.time-area[data-v-8ec8e3ce]{padding:%?7?% 0}.list[data-v-8ec8e3ce]{padding:%?32?% %?35?%;background-color:#f7f7f7}.list-item[data-v-8ec8e3ce]{height:%?152?%;width:100%;position:relative;margin-bottom:%?25?%}.list-item uni-image[data-v-8ec8e3ce]{width:100%;height:100%}.item-left[data-v-8ec8e3ce]{position:absolute;left:0;top:0;height:100%;width:%?190?%;text-align:center;font-size:%?24?%;color:#fff;padding-top:%?8?%}.coupon-price[data-v-8ec8e3ce]{font-size:%?36?%;padding-bottom:%?16?%}.item-right[data-v-8ec8e3ce]{position:absolute;left:%?220?%;top:%?15?%;width:65%;color:#6f6e6d;font-size:%?20?%}.item-name[data-v-8ec8e3ce]{font-size:%?32?%;color:#353535}.item-right uni-view[data-v-8ec8e3ce]{margin-bottom:%?4?%}.coupon-footer[data-v-8ec8e3ce]{position:fixed;bottom:0;left:0;right:0;width:100%;height:%?100?%;line-height:%?100?%;text-align:center;background-color:#fff;z-index:2}.coupon-footer.iphone_x[data-v-8ec8e3ce]{height:%?150?%;padding-bottom:%?50?%}.list-item .status[data-v-8ec8e3ce]{position:absolute;top:0;right:0;height:%?98?%;width:%?140?%;z-index:2}.tip[data-v-8ec8e3ce]{margin-top:20%;text-align:center;color:#686868}.t-omit[data-v-8ec8e3ce]{display:inline-block;white-space:nowrap;width:100%;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.t-omit-two[data-v-8ec8e3ce]{word-break:break-all;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}body.?%PAGE?%[data-v-8ec8e3ce]{background:#f7f7f7}",""])},"7fd0":function(e,t,i){"use strict";i.r(t);var a=i("73d5"),n=i("86a7");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("49f4");var c=i("2877"),r=Object(c["a"])(n["default"],a["a"],a["b"],!1,null,"616e7dfe",null);t["default"]=r.exports},"86a7":function(e,t,i){"use strict";i.r(t);var a=i("93b4"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=n.a},"8e27":function(e,t,i){var a=i("7923");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("0e589e86",a,!0,{sourceMap:!1,shadowMode:!1})},"93b4":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"app-tab-nav",props:{background:String,setTop:{type:[Number,String]},padding:{default:45,type:[Number,String]},setHeight:Number,placeHeight:Number,fontSize:Number,theme:{default:"default",type:String},border:{default:!0,type:Boolean},shadow:{default:!0,type:Boolean},activeItem:{type:[Number,String]},tabList:Array},methods:{handleClick:function(e){this.$emit("click",e)}}};t.default=a},a61e:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(i("7fd0")),n=i("2f62");function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(i,!0).forEach(function(t){s(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d={data:function(){return{list:[],iphone_x:!1,tabList:[{id:1,name:"未使用"},{id:2,name:"已使用"},{id:3,name:"已过期"}],activeTab:1,first:!1,page:2}},components:{"app-tab-nav":a.default},computed:r({},(0,n.mapGetters)("mallConfig",{getTheme:"getTheme"})),methods:{tabStatus:function(e){this.list=[],this.page=2,this.activeTab=e.currentTarget.dataset.id,uni.showLoading({title:"加载中..."}),this.getList()},getList:function(){var e=this;e.first=!0,e.$request({url:e.$api.coupon.user_coupon,data:{status:e.activeTab}}).then(function(t){uni.hideLoading(),e.$hideLoading(),0==t.code?(e.list=t.data.list,e.page=2):uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(t){uni.hideLoading(),e.$hideLoading(),e.$event.on(e.$const.EVENT_USER_LOGIN).then(function(){e.getList()})})},getMore:function(){var e=this;uni.showLoading({title:"加载中..."}),e.$request({url:e.$api.coupon.user_coupon,data:{status:e.activeTab,page:e.page}}).then(function(t){uni.hideLoading(),0==t.code?t.data.list.length>0&&(e.list=e.list.concat(t.data.list),e.page++):uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(e){uni.hideLoading()})},toDetail:function(e){uni.navigateTo({url:"/pages/coupon/details/details-no-share?person=1&id="+e})},toList:function(){uni.navigateTo({url:"/pages/coupon/list/list"})}},onLoad:function(){var e=this;uni.getSystemInfo({success:function(t){(t.model.indexOf("iPhone X")>-1||t.model.indexOf("iPhone 11")>-1||t.model.indexOf("iPhone11")>-1||t.model.indexOf("iPhone12")>-1||t.model.indexOf("Unknown Device")>-1)&&(e.iphone_x=!0)}}),e.$showLoading({text:"加载中..."}),e.getList()},onShow:function(){this.first&&this.getList()},onReachBottom:function(){this.getMore()},filters:{reservedNum:function(e){return Number(e)}}};t.default=d},b359:function(e,t,i){"use strict";i.r(t);var a=i("6f49"),n=i("ed8a");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("f95d");var c=i("2877"),r=Object(c["a"])(n["default"],a["a"],a["b"],!1,null,"8ec8e3ce",null);t["default"]=r.exports},e85f:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".text-center[data-v-616e7dfe]{text-align:center}.font-weight[data-v-616e7dfe]{font-weight:700}.page-width[data-v-616e7dfe]{width:100%}.goods-hover-class[data-v-616e7dfe]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-616e7dfe]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-616e7dfe]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-616e7dfe]{width:100%}.u-hover-class[data-v-616e7dfe]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-616e7dfe]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-nav[data-v-616e7dfe]{color:#353535;width:100%;position:fixed;left:0;background-color:#fff;z-index:11}.app-nav .nav-item[data-v-616e7dfe]{text-align:center}.app-nav .nav-item uni-text[data-v-616e7dfe]{display:inline-block}.app-nav .active-text[data-v-616e7dfe]{border-bottom:%?4?% solid}.app-nav.shadow[data-v-616e7dfe]{-webkit-box-shadow:0 %?2?% %?10?% rgba(0,0,0,.06);box-shadow:0 %?2?% %?10?% rgba(0,0,0,.06)}.default-m-text[data-v-616e7dfe]{color:#ff4544}.blue-m-text[data-v-616e7dfe]{color:#446dfd}body.?%PAGE?%[data-v-616e7dfe]{background:#f7f7f7}",""])},ed8a:function(e,t,i){"use strict";i.r(t);var a=i("a61e"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=n.a},f95d:function(e,t,i){"use strict";var a=i("8e27"),n=i.n(a);n.a}}]);