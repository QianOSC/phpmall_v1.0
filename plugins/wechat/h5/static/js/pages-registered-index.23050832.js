(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-registered-index"],{"176c":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".bd-registered[data-v-06c0653f]{min-height:100vh;background-color:#fff;padding:%?46?% %?42?%}.bd-item[data-v-06c0653f]{height:%?100?%;border-bottom:%?2?% solid #f4f4f4}.bd-label[data-v-06c0653f]{width:%?36?%;height:%?36?%;margin:0 %?25?% 0 %?2?%}.bd-btn[data-v-06c0653f]{border-left:%?1?% solid #f4f4f4;width:%?226?%;height:%?53?%;line-height:%?53?%;font-size:%?32?%;color:#ff4544;text-align:center}.bd-image[data-v-06c0653f]{width:%?160?%;height:%?67?%}.bd-input[data-v-06c0653f]{height:%?36?%}.bd-bottom[data-v-06c0653f]{height:%?88?%;line-height:%?88?%;color:#fff;font-size:%?36?%;border-radius:%?44?%;margin-top:%?68?%;text-align:center}.bd-yes-agree[data-v-06c0653f]{background:#ff4544}.bd-no-agree[data-v-06c0653f]{background:rgba(255,69,68,.5)}.bd-agree-group[data-v-06c0653f]{margin-top:%?42?%}.bd-agree[data-v-06c0653f]{color:#999;font-size:%?28?%;margin-left:%?13?%}.bd-color[data-v-06c0653f]{color:#ff4544}[data-v-06c0653f] .uni-radio-input{width:%?35?%;height:%?35?%}.bd-send[data-v-06c0653f]{color:rgba(255,69,68,.5)}",""])},"1d29":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"bd-registered"},[[a("v-uni-view",{staticClass:"bd-item dir-left-nowrap cross-center"},[a("v-uni-image",{staticClass:"bd-label box-grow-0",attrs:{src:"./image/phone.png"}}),a("v-uni-input",{staticClass:"bd-input box-grow-1",attrs:{placeholder:"请输入手机号",type:"text"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}})],1),a("v-uni-view",{staticClass:"bd-item dir-left-nowrap cross-center"},[a("v-uni-image",{staticClass:"bd-label box-grow-0",attrs:{src:"./image/image.png"}}),a("v-uni-input",{staticClass:"bd-input box-grow-1",attrs:{placeholder:"请输入图形验证码",type:"text"},model:{value:e.pic_captcha,callback:function(t){e.pic_captcha=t},expression:"pic_captcha"}}),a("v-uni-image",{staticClass:"bd-image box-grow-0",attrs:{src:e.imageUrl},on:{click:function(t){t=e.$handleEvent(t),e.getImageUrl(t)}}})],1),a("v-uni-view",{staticClass:"bd-item dir-left-nowrap cross-center"},[a("v-uni-image",{staticClass:"bd-label box-grow-0",attrs:{src:"./image/message.png"}}),a("v-uni-input",{staticClass:"bd-input box-grow-1",attrs:{placeholder:"请输入短消息验证码",type:"text"},model:{value:e.sms_captcha,callback:function(t){e.sms_captcha=t},expression:"sms_captcha"}}),e.isSend?a("v-uni-view",{staticClass:"bd-btn box-grow-0 bd-send"},[e._v("重新发送"+e._s(e.timeNum)+"S")]):a("v-uni-view",{staticClass:"bd-btn box-grow-0",on:{click:function(t){t=e.$handleEvent(t),e.getVerCode(t)}}},[e._v("获取验证码")])],1),a("v-uni-view",{staticClass:"bd-bottom",class:e.mobile&&e.pic_captcha&&e.sms_captcha?"bd-yes-agree":"bd-no-agree",on:{click:function(t){t=e.$handleEvent(t),e.register(t)}}},[e._v("完成")]),e.detail.agreement_name||e.detail.declare_name?a("v-uni-view",{staticClass:"bd-agree-group dir-left-nowrap cross-top"},[a("v-uni-radio",{attrs:{color:"#ff4544",checked:e.agree},on:{click:function(t){t=e.$handleEvent(t),e.agree=!e.agree}}}),a("v-uni-view",{staticClass:"bd-agree"},[e._v("点击同意即表示您已阅读并同意"),e.detail.agreement_name?a("v-uni-text",{on:{click:function(t){t=e.$handleEvent(t),e.toRule("agreement")}}},[a("v-uni-text",{staticClass:"bd-color"},[e._v("《"+e._s(e.detail.agreement_name)+"》")])],1):e._e(),e.detail.declare_name?a("v-uni-text",[e._v("与")]):e._e(),e.detail.declare_name?a("v-uni-text",{staticClass:"bd-color",on:{click:function(t){t=e.$handleEvent(t),e.toRule("declare")}}},[e._v("《"+e._s(e.detail.declare_name)+"》")]):e._e()],1)],1):e._e()]],2)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},"386dc":function(e,t,a){var i=a("176c");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("3b751567",i,!0,{sourceMap:!1,shadowMode:!1})},"93fb":function(e,t,a){"use strict";a.r(t);var i=a("eba0"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);t["default"]=n.a},a20b:function(e,t,a){"use strict";a.r(t);var i=a("1d29"),n=a("93fb");for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);a("f6393");var s=a("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"06c0653f",null);t["default"]=c.exports},eba0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("2f62");function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(a,!0).forEach(function(t){s(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c={name:"index",data:function(){return{pic_captcha:"",mobile:"",sms_captcha:"",validate_code_id:"",imageUrl:"",agree:!1,isSend:!1,timeNum:60,timeIng:0,detail:{agreement_name:"",declare_name:""}}},computed:r({},(0,i.mapGetters)({getSign:"user/sign"})),onLoad:function(){this.getDetail(),this.getImageUrl()},methods:{toRule:function(e){this.$store.dispatch("user/sign",{mobile:this.mobile,validate_code_id:this.validate_code_id,sms_captcha:this.sms_captcha});var t="agreement"==e?this.detail.agreement_name:this.detail.declare_name;uni.navigateTo({url:"/pages/rules/index?url=".concat(encodeURIComponent(this.$api.registered.register_data),"&key=")+e+"&title="+t})},getDetail:function(){var e=this;this.$request({url:this.$api.registered.register_data}).then(function(t){0===t.code?e.detail=t.data:uni.showToast({icon:"none",title:t.msg})})},getVerCode:function(){var e=this;this.timeNum=60,this.$request({url:this.$api.registered.sms,method:"post",data:{mobile:this.mobile,pic_captcha:this.pic_captcha}}).then(function(t){0===t.code?(e.isSend=!0,e.validate_code_id=t.data.validate_code_id,e.change()):(e.getImageUrl(),uni.showToast({icon:"none",title:t.msg}))})},getImageUrl:function(){var e=this;this.$request({url:this.$api.registered.captcha,data:{refresh:!0}}).then(function(t){e.imageUrl=t.url})},change:function(){var e=this;clearInterval(this.timeIng),this.timeIng=setInterval(function(){e.timeNum--,0===e.timeNum&&(clearInterval(e.timeIng),e.isSend=!1)},1e3)},register:function(){var e=this;this.mobile&&this.pic_captcha&&this.sms_captcha&&(this.agree||!this.detail.agreement_name&&!this.detail.declare_name?this.validate_code_id?this.$request({url:this.$api.registered.register,method:"post",data:{mobile:this.mobile,validate_code_id:this.validate_code_id,sms_captcha:this.sms_captcha}}).then(function(t){0===t.code?(uni.setStorageSync("_USER_ACCESS_TOKEN",t.data.access_token),e.$store.dispatch("user/sign",{mobile:"",validate_code_id:-1,sms_captcha:""}),e.$event.trigger(e.$const.EVENT_USER_LOGIN),uni.redirectTo({url:"/pages/user-center/user-center"})):(e.getImageUrl(),uni.showToast({icon:"none",title:t.msg}))}):uni.showToast({icon:"none",title:"请先获取验证码"}):uni.showToast({icon:"none",title:"请阅读并同意注册协议"}))}},beforeDestroy:function(){clearInterval(this.timeIng)},watch:{getSign:{handler:function(e){this.validate_code_id=e.validate_code_id,this.sms_captcha=e.sms_captcha,this.mobile=e.mobile},immediate:!0,deep:!0}}};t.default=c},f6393:function(e,t,a){"use strict";var i=a("386dc"),n=a.n(i);n.a}}]);