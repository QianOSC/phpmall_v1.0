(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-share-add-add"],{3870:function(t,a,e){a=t.exports=e("2350")(!1),a.push([t.i,".text-center[data-v-2e7d5c48]{text-align:center}.font-weight[data-v-2e7d5c48]{font-weight:700}.page-width[data-v-2e7d5c48]{width:100%}.goods-hover-class[data-v-2e7d5c48]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-2e7d5c48]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-2e7d5c48]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-2e7d5c48]{width:100%}.u-hover-class[data-v-2e7d5c48]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-2e7d5c48]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.add-bg[data-v-2e7d5c48]{height:%?300?%;width:100%;display:block;margin-bottom:%?20?%;background-color:#f7f7f7}.add-form[data-v-2e7d5c48]{padding:0 %?24?%;font-size:%?30?%;color:#353535}.add-form .add-default[data-v-2e7d5c48]{background-color:#fff;border-radius:%?16?%;padding:0 %?10?% %?35?%;margin-bottom:%?20?%}.add-form .add-default.add-diy-form[data-v-2e7d5c48]{padding-bottom:0;padding:%?10?% %?24?%}.add-form .add-default.add-diy-form .add-info[data-v-2e7d5c48]{border-bottom:0;padding:%?24?% 0}.add-form .add-default .add-info[data-v-2e7d5c48]{width:100%;padding:%?10?% %?24?%;border-bottom:%?1?% solid #e2e2e2}.add-form .add-default .add-info .red-background[data-v-2e7d5c48]{background-color:#ff4544}.add-form .add-default .add-info .add-label[data-v-2e7d5c48]{height:%?45?%;line-height:%?45?%;font-size:%?28?%}.add-form .add-default .add-info .add-input[data-v-2e7d5c48]{height:%?75?%}.add-form .add-default .add-info .add-input uni-input[data-v-2e7d5c48]{height:%?65?%;padding-top:%?5?%}.add-form .add-default .add-info.share-name[data-v-2e7d5c48]{height:%?90?%;line-height:%?90?%;padding:0 %?10?%}.add-form .add-default .add-info.share-name .mall-name[data-v-2e7d5c48]{max-width:%?300?%;color:#ff4544}.add-form .add-default .add-info .share-user[data-v-2e7d5c48]{color:#666;height:%?75?%;line-height:%?75?%}.add-form .add-default .add-info .share-user>uni-text[data-v-2e7d5c48]{color:#ff4544}.add-form .add-default .add-info .read[data-v-2e7d5c48]{width:%?32?%;height:%?32?%;float:left;margin-right:%?10?%}.add-form .add-default .add-info .read uni-image[data-v-2e7d5c48]{height:100%;width:100%;display:block}.submit[data-v-2e7d5c48]{background-color:#f7f7f7;margin:0 %?-24?%;padding:%?24?%}.submit uni-button[data-v-2e7d5c48]{color:#fff;font-size:%?30?%;font-weight:700;height:%?80?%;border-radius:%?40?%;line-height:%?80?%}.other[data-v-2e7d5c48]{background-color:#fff;padding:0 %?24?%;color:#353535;font-size:%?30?%}.other .end-img[data-v-2e7d5c48]{width:100%}.modal[data-v-2e7d5c48]{position:fixed;top:var(--window-top);left:0;right:0;height:100%;width:100%;z-index:99;background-color:rgba(0,0,0,.3)}.modal .protocol[data-v-2e7d5c48]{position:relative;z-index:99;background-color:#fff;width:80%;border-radius:%?20?%;margin:%?100?% auto}.modal .protocol .protocol-name[data-v-2e7d5c48]{height:%?100?%;text-align:center;line-height:%?100?%;color:#666}.modal .protocol .protocol-content[data-v-2e7d5c48]{padding:%?10?% %?20?%;height:%?720?%;overflow:auto;color:#353535}.modal .protocol .read-over[data-v-2e7d5c48]{text-align:center;height:%?100?%;line-height:%?100?%;background-color:#ff4544;color:#fff;font-size:%?30?%;border-bottom-right-radius:%?20?%;border-bottom-left-radius:%?20?%}body.?%PAGE?%[data-v-2e7d5c48]{background:#f7f7f7}",""])},"571a":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("app-layout",[e("v-uni-view",[e("v-uni-image",{staticClass:"add-bg",attrs:{src:t.custom_setting.apply.apply_head_pic}}),e("v-uni-view",{staticClass:"add-form"},[e("v-uni-view",{staticClass:"add-default"},[e("v-uni-view",{staticClass:"add-info share-name dir-left-nowrap"},[e("v-uni-view",[t._v("欢迎加入")]),e("v-uni-view",{staticClass:"mall-name t-omit"},[t._v(t._s(t.mall.name))]),e("v-uni-view",[t._v("，请填写申请信息")])],1),e("v-uni-view",{staticClass:"add-info"},[e("v-uni-view",{staticClass:"add-label"},[t._v("邀请人")]),e("v-uni-view",{staticClass:"share-user"},[e("v-uni-text",[t._v(t._s(t.parent_name))]),t._v("(请核对)")],1)],1),e("v-uni-view",{staticClass:"add-info"},[e("v-uni-view",{staticClass:"add-label"},[e("v-uni-text",{staticStyle:{color:"#ff4544"}},[t._v("*")]),t._v("姓名")],1),e("v-uni-view",{staticClass:"add-input"},[e("v-uni-input",{attrs:{placeholder:"请填写真实姓名","placeholder-style":"color: #cdcdcd"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}})],1)],1),e("v-uni-view",{staticClass:"add-info"},[e("v-uni-view",{staticClass:"add-label"},[e("v-uni-text",{staticStyle:{color:"#ff4544"}},[t._v("*")]),t._v("手机号码")],1),e("v-uni-view",{staticClass:"add-input"},[e("v-uni-input",{attrs:{type:"number",placeholder:"请填写手机号码","placeholder-style":"color: #cdcdcd"},model:{value:t.phone,callback:function(a){t.phone=a},expression:"phone"}})],1)],1)],1),1==t.share_setting.form_status?e("v-uni-view",{staticClass:"add-default add-diy-form"},[e("app-diy-form",{attrs:{datePadding:0,itemHeight:66,showRequiredIcon:!0,labelPosition:"top",list:t.share_setting.form,labelFs28:!0},on:{input:function(a){a=t.$handleEvent(a),t.handleFormInput(a)}}})],1):t._e(),e("v-uni-view",{staticClass:"add-default add-diy-form"},[e("v-uni-view",{staticClass:"add-info",staticStyle:{"font-size":"13px"}},[e("v-uni-view",{staticClass:"read",on:{click:function(a){a=t.$handleEvent(a),t.toRead(a)}}},[0==t.read?e("v-uni-image",{attrs:{src:"/static/image/icon/icon-uncheck.png"}}):e("v-uni-image",{class:["red-background"],attrs:{src:"/static/image/icon/icon-checkbox-checked.png"}})],1),t._v("我已经阅读并了解"),e("v-uni-text",{staticStyle:{color:"#014c8c"},on:{click:function(a){a=t.$handleEvent(a),t.protocol=!0}}},[t._v("【"+t._s(t.custom_setting.apply.share_apply_pact.name?t.custom_setting.apply.share_apply_pact.name:t.custom_setting.apply.share_apply_pact.default)+"】")])],1)],1),e("v-uni-view",{staticClass:"submit"},[e("v-uni-view",{on:{click:function(a){a=t.$handleEvent(a),t.subscribe(a)}}},[e("v-uni-button",{style:{"background-color":""+t.custom_setting.apply.apply_btn_background,"border-radius":""+t.custom_setting.apply.apply_btn_round,color:""+t.custom_setting.apply.apply_btn_color}},[t._v(t._s(t.custom_setting.apply.apply_btn_title?t.custom_setting.apply.apply_btn_title:"申请成为分销商"))])],1)],1)],1),e("v-uni-view",{staticClass:"other"},[e("v-uni-image",{staticClass:"end-img",style:{height:t.height+"rpx"},attrs:{src:t.custom_setting.apply.apply_end_pic},on:{load:function(a){a=t.$handleEvent(a),t.imageLoad(a)}}})],1),t.protocol?e("v-uni-view",{staticClass:"modal"},[e("v-uni-view",{staticClass:"protocol"},[e("v-uni-view",{staticClass:"protocol-name"},[t._v(t._s(t.custom_setting.apply.share_apply_pact.name?t.custom_setting.apply.share_apply_pact.name:t.custom_setting.apply.share_apply_pact.default))]),e("v-uni-view",{staticClass:"protocol-content"},[e("v-uni-text",[t._v(t._s(t.share_setting.agree))])],1),e("v-uni-view",{on:{click:function(a){a=t.$handleEvent(a),t.protocol=!1,t.read=!0}}},[e("v-uni-view",{staticClass:"read-over"},[t._v("我已阅读")])],1)],1)],1):t._e()],1)],1)},o=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return o})},"854e":function(t,a,e){"use strict";e.r(a);var i=e("571a"),o=e("b711");for(var n in o)"default"!==n&&function(t){e.d(a,t,function(){return o[t]})}(n);e("857c");var d=e("2877"),r=Object(d["a"])(o["default"],i["a"],i["b"],!1,null,"2e7d5c48",null);a["default"]=r.exports},"857c":function(t,a,e){"use strict";var i=e("cae2"),o=e.n(i);o.a},b711:function(t,a,e){"use strict";e.r(a);var i=e("e6fb"),o=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);a["default"]=o.a},cae2:function(t,a,e){var i=e("3870");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("7d506df3",i,!0,{sourceMap:!1,shadowMode:!1})},e6fb:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=e("2f62"),o=n(e("7d93"));function n(t){return t&&t.__esModule?t:{default:t}}function d(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,i)}return e}function r(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?d(e,!0).forEach(function(a){s(t,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d(e).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})}return t}function s(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var l={data:function(){return{status:null,mallName:"",name:"",phone:"",parent_name:"",height:0,form:{},template_message:[],read:!1,protocol:!1}},computed:r({},(0,i.mapState)({mall:function(t){return t.mallConfig.mall},custom_setting:function(t){return t.mallConfig.share_setting_custom},share_setting:function(t){return t.mallConfig.share_setting}})),components:{AppDiyForm:o.default},methods:{handleFormInput:function(t){var a=t.data,e=[];for(var i in a)e[i]={key:a[i].key,label:a[i].name,value:a[i].value,required:a[i].is_required};this.form=e},toRead:function(){this.read=!this.read},imageLoad:function(t){var a=t.detail.width,e=t.detail.height;this.height=e*(702/a)},subscribe:function(){var t=this,a=this,e=0;if(this.form.length>0){var i=!0,o=!1,n=void 0;try{for(var d,r=this.form[Symbol.iterator]();!(i=(d=r.next()).done);i=!0){var s=d.value;if(1==s.required){if(!s.value)return uni.showToast({title:"请填写"+s.label,icon:"none",duration:1e3}),!1;if("img_upload"==s.key&&Array.isArray(s.value)){var l=!0,c=!1,u=void 0;try{for(var f,p=s.value[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var h=f.value;if(!h)return uni.showToast({title:"请填写"+s.label,icon:"none",duration:1e3}),!1}}catch(v){c=!0,u=v}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}}}}catch(v){o=!0,n=v}finally{try{i||null==r.return||r.return()}finally{if(o)throw n}}}1==this.read?(e=1,a.name?a.phone?/0?(1)[0-9]{10}/.test(a.phone)?this.$subscribe(this.template_message).then(function(a){t.submit(e)}).catch(function(a){t.submit(e)}):uni.showToast({title:"请输入正确的手机号码",icon:"none",duration:1e3}):uni.showToast({title:"请输入手机号码",icon:"none",duration:1e3}):uni.showToast({title:"请输入真实姓名",icon:"none",duration:1e3})):uni.showToast({title:"请先查看分销协议并同意",icon:"none",duration:1e3})},submit:function(t){var a=this;uni.showLoading({title:"提交中..."});var e={name:a.name,mobile:a.phone,agree:t};1==a.share_setting.form_status&&(e.form=JSON.stringify(a.form)),a.$request({url:a.$api.share.apply,data:e,method:"post"}).then(function(t){a.$store.dispatch("mallConfig/actionResetConfig"),a.$hideLoading(),0==t.code?(uni.showToast({title:t.msg,duration:1e3}),setTimeout(function(){uni.navigateBack({delta:1})},500)):0==a.share_setting.form_status&&"请填写表单"==t.msg?uni.showToast({title:"申请条件有所变化，请重新填写",icon:"none",duration:1e3}):uni.showToast({title:t.msg,icon:"none",duration:1e3})}).catch(function(t){a.$hideLoading(),uni.showToast({title:response,icon:"none",duration:1e3})})}},onLoad:function(t){var a=this,e=this;this.$showLoading({type:"global",text:"加载中..."}),null!=t.template_message&&(e.template_message=JSON.parse(t.template_message)),uni.setNavigationBarTitle({title:this.custom_setting.apply.share_apply.name?this.custom_setting.apply.share_apply.name:this.custom_setting.apply.share_apply.default}),this.$request({url:this.$api.user.user_info}).then(function(t){a.$hideLoading(),0===t.code&&(a.parent_name=t.data.identity.parent_name)})},onShow:function(){this.$store.dispatch("mallConfig/actionResetConfig")}};a.default=l}}]);