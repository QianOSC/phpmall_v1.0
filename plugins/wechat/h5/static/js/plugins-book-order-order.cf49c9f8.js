(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-book-order-order"],{"0a3b":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[i("v-uni-view",{staticClass:"order"},[i("v-uni-view",{staticClass:"header dir-left-nowrap"},[i("v-uni-view",{staticClass:"header-item box-grow-1",on:{click:function(e){e=t.$handleEvent(e),t.setActiveHeader(0)}}},[i("app-form-id",[i("v-uni-text",{class:0===t.status?t.getTheme+"-m-text "+t.getTheme:"no-active"},[t._v("全部")])],1)],1),i("v-uni-view",{staticClass:"header-item box-grow-1",on:{click:function(e){e=t.$handleEvent(e),t.setActiveHeader(1)}}},[i("app-form-id",[i("v-uni-text",{class:1===t.status?t.getTheme+"-m-text "+t.getTheme:"no-active"},[t._v("待支付")])],1)],1),i("v-uni-view",{staticClass:"header-item box-grow-1",on:{click:function(e){e=t.$handleEvent(e),t.setActiveHeader(2)}}},[i("app-form-id",[i("v-uni-text",{class:2===t.status?t.getTheme+"-m-text "+t.getTheme:"no-active"},[t._v("待使用")])],1)],1),i("v-uni-view",{staticClass:"header-item box-grow-1",on:{click:function(e){e=t.$handleEvent(e),t.setActiveHeader(4)}}},[i("app-form-id",[i("v-uni-text",{class:4===t.status?t.getTheme+"-m-text "+t.getTheme:"no-active"},[t._v("待评价")])],1)],1)],1),t.list.length>0?i("v-uni-view",{staticClass:"product-list"},t._l(t.list,function(e,a){return i("v-uni-view",{key:a,staticClass:"product"},[i("v-uni-view",{staticClass:"top dir-left-nowrap main-between",on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.jump(e)}}},[i("v-uni-view",{staticClass:"image-content"},[i("v-uni-image",{attrs:{src:e.detail[0].goods_info.pic_url}}),2==e.cancel_status?i("v-uni-view",{staticClass:"tip-angle"},[t._v("退款中")]):1==e.cancel_status&&0==e.is_pay?i("v-uni-view",{staticClass:"tip-angle"},[t._v("已取消")]):1==e.cancel_status?i("v-uni-view",{staticClass:"tip-angle"},[t._v("已退款")]):1==e.is_comment?i("v-uni-view",{staticClass:"tip-angle"},[t._v("已评价")]):0==e.is_pay?i("v-uni-view",{staticClass:"tip-angle"},[t._v("待付款")]):0==e.is_confirm?i("v-uni-view",{staticClass:"tip-angle"},[t._v("待使用")]):1==e.is_confirm?i("v-uni-view",{staticClass:"tip-angle"},[t._v("已使用")]):t._e()],1),i("v-uni-view",{staticClass:"text-content dir-top-nowrap main-between"},[i("v-uni-view",{staticClass:"text-top"},[i("v-uni-view",{staticClass:"name"},[t._v(t._s(e.detail[0].goods_info.name))]),i("v-uni-view",{staticClass:"attr dir-left-nowrap"},t._l(e.detail[0].goods_info.attr_list,function(e,a){return i("v-uni-view",{key:a},[t._v(t._s(e.attr_group_name)+": "+t._s(e.attr_name))])}),1)],1),i("v-uni-view",{staticClass:"text-bottom dir-left-nowrap main-right cross-center"},[i("v-uni-view",{staticClass:"original-price"},[t._v("￥"+t._s(e.detail[0].total_original_price))]),i("v-uni-view",{staticClass:"current-price",class:t.getTheme+"-m-text "+t.getTheme},[t._v("￥"+t._s(e.detail[0].total_price))])],1)],1)],1),"0"===e.cancel_status&&"0"===e.is_sale&&"0"===e.sale_status&&0==e.is_comment?i("v-uni-view",{staticClass:"bottom dir-left-nowrap main-right cross-center"},[2!=e.cancel_status&&1==e.is_pay&&0==e.is_confirm?i("v-uni-view",{staticClass:"but no",on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.operationOrder(1,e)}}},[i("app-form-id",[t._v("申请退款")])],1):t._e(),2!=e.cancel_status&&1==e.is_pay&&0==e.is_confirm?i("v-uni-view",{staticClass:"but ",class:t.getTheme+"-m-text "+t.getTheme+"-m-back-o "+t.getTheme,on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.operationOrder(2,e)}}},[i("app-form-id",[t._v("立即使用")])],1):t._e(),0==e.sale_status&&0==e.is_sale&&1==e.is_confirm&&0==e.is_comment?i("v-uni-view",{staticClass:"but ",class:t.getTheme+"-m-text "+t.getTheme+"-m-back-o "+t.getTheme},[i("app-jump-button",{attrs:{form:"",url:"/pages/order/appraise/appraise?id="+e.id}},[t._v("去评价")])],1):t._e(),0==e.is_pay?i("v-uni-view",{staticClass:"but no",on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.operationOrder(3,e)}}},[i("app-form-id",[t._v("申请取消")])],1):t._e(),0==e.is_pay?i("v-uni-view",{staticClass:"but ",class:t.getTheme+"-m-text "+t.getTheme+"-m-back-o"+t.getTheme,on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i),t.operationOrder(4,e)}}},[i("app-form-id",[t._v("去支付")])],1):t._e()],1):t._e()],1)}),1):t._e(),t.model?i("v-uni-view",{staticClass:"model",on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.model=!1}}},[2!==t.modelType?i("v-uni-view",{staticClass:"model-content"},[i("v-uni-view",{staticClass:"model-title-top"},[t._v("提示")]),1===t.modelType?i("v-uni-view",{staticClass:"model-header"},[t._v("是否申请退款")]):3===t.modelType?i("v-uni-view",{staticClass:"model-header"},[t._v("是否申请取消订单")]):4===t.modelType?i("v-uni-view",{staticClass:"model-header"},[t._v("申请支付")]):t._e(),2!==t.modelType?i("v-uni-view",{staticClass:"model-bottom dir-left-nowrap cross-center"},[i("v-uni-view",{staticClass:"model-but",on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.cancle(e)}}},[i("app-form-id",[t._v("取消")])],1),i("v-uni-view",{staticClass:"model-line"}),i("v-uni-view",{staticClass:"model-but",on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.determine(e)}}},[i("app-form-id",[t._v("确定")])],1)],1):t._e()],1):t._e(),2===t.modelType?i("v-uni-view",{staticClass:"model-use"},[i("v-uni-view",{staticClass:"image",on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.model=!1}}}),i("v-uni-view",{staticClass:"model-title"},[t._v("核销码")]),i("v-uni-image",{staticClass:"model-image",attrs:{src:t.writeOffChart,mode:"aspectFill"}})],1):t._e()],1):t._e()],1)],1)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},"528b":function(t,e,i){"use strict";i.r(e);var a=i("0a3b"),o=i("8193");for(var r in o)"default"!==r&&function(t){i.d(e,t,function(){return o[t]})}(r);i("977f");var n=i("2877"),s=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"8ba98402",null);e["default"]=s.exports},"56e6":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(i("a34a")),o=i("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return c(t)||d(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function l(t,e,i,a,o,r,n){try{var s=t[r](n),d=s.value}catch(c){return void i(c)}s.done?e(d):Promise.resolve(d).then(a,o)}function u(t){return function(){var e=this,i=arguments;return new Promise(function(a,o){var r=t.apply(e,i);function n(t){l(r,a,o,n,s,"next",t)}function s(t){l(r,a,o,n,s,"throw",t)}n(void 0)})}}function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(i,!0).forEach(function(e){m(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f={name:"order",data:function(){return{status:0,list:[],page:1,over:!1,model:!1,modelType:0,setItem:{},writeOffChart:""}},onLoad:function(){var t=this;this.request({status:this.status,page:this.page}).then(function(e){e&&(t.list=e.list)})},computed:v({},(0,o.mapGetters)("mallConfig",{getTheme:"getTheme"})),onReachBottom:function(){this.over||(this.page+=1,this.pagingRequest({status:this.status,page:this.page}))},methods:{setActiveHeader:function(t){var e=this;this.page=1,this.status=t,this.over=!1,this.list=[],this.request({status:this.status,page:this.page}).then(function(t){t&&(e.list=t.list)})},request:function(){var t=u(a.default.mark(function t(e){var i,o,r;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.status,o=e.page,t.next=3,this.$request({url:this.$api.book.order_list,data:{status:i,page:o}});case 3:if(r=t.sent,0!==r.code){t.next=8;break}return t.abrupt("return",r.data);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),operationOrder:function(t,e){var i=this;switch(this.model=!0,this.setItem=e,t){case 1:this.modelType=1;break;case 2:uni.showLoading({mask:!0,title:"加载中"}),this.modelType=2,this.$request({url:this.$api.book.clerk_code,data:{id:e.id}}).then(function(t){uni.hideLoading(),0===t.code?i.writeOffChart=t.data.file_path:1===t.code&&(i.model=!1,uni.showModal({title:"提示",content:t.msg}))});break;case 3:this.modelType=3;break;case 4:this.modelType=4;break}},pagingRequest:function(t){var e=this,i=t.status,a=t.page;this.request({status:i,page:a}).then(function(t){t&&(t.list.length>0?e.list=[].concat(n(e.list),n(t.list)):e.over=!0)})},cancle:function(){this.modelType=0,this.model=!1},determine:function(){var t=this;switch(uni.showLoading({mask:!0,title:"加载中"}),this.modelType){case 1:this.$request({url:this.$api.order.cancel,data:{id:this.setItem.id}}).then(function(e){if(0===e.code){uni.hideLoading(),t.model=!1;for(var i=0;i<t.list.length;i++)t.setItem.id===t.list[i].id&&(t.list[i].cancel_status="2",2===t.status&&t.$delete(t.list,i))}});break;case 3:this.$request({url:this.$api.order.cancel,data:{id:this.setItem.id}}).then(function(e){if(0===e.code){uni.hideLoading(),t.model=!1;for(var i=0;i<t.list.length;i++)t.setItem.id===t.list[i].id&&(t.list[i].cancel_status="1",t.list[i].is_pay="0",1===t.status&&t.$delete(t.list,i))}});break;case 4:this.$request({url:this.$api.order.list_pay_data,data:{id:this.setItem.id}}).then(function(e){0===e.code&&(uni.hideLoading(),t.model=!1,t.$payment.pay(e.data.id).then(function(){for(var e=0;e<t.list.length;e++)t.setItem.id===t.list[e].id&&(t.list[e].is_pay="1",1===t.status&&t.$delete(t.list,e))}).catch(function(){}))});break}},jump:function(t){this.$jump({open_type:"navigate",url:"/plugins/book/orderDetails/orderDetails?id=".concat(t.id)})}}};e.default=f},"5e695":function(t,e,i){var a=i("b041");e=t.exports=i("2350")(!1),e.push([t.i,".text-center[data-v-8ba98402]{text-align:center}.font-weight[data-v-8ba98402]{font-weight:700}.page-width[data-v-8ba98402]{width:100%}.goods-hover-class[data-v-8ba98402]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-8ba98402]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-8ba98402]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-8ba98402]{width:100%}.u-hover-class[data-v-8ba98402]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-8ba98402]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.order[data-v-8ba98402]{width:%?750?%;position:absolute;top:0;left:0;height:100%;background-color:#f7f7f7}.order .header[data-v-8ba98402]{height:%?88?%;width:100%;position:fixed;top:0;left:0;z-index:1000;background-color:#fff;border-bottom:%?1?% solid #e2e2e2}.order .header .header-item[data-v-8ba98402]{line-height:%?88?%;text-align:center}.order .header .header-item uni-text[data-v-8ba98402]{display:inline-block;height:%?87?%;line-height:%?86?%;font-size:%?32?%;border-bottom-width:%?2?%;border-bottom-style:solid}.order .header .header-item .no-active[data-v-8ba98402]{color:#666;border-bottom-color:rgba(0,0,0,0)}.order .product-list[data-v-8ba98402]{margin-top:%?80?%;padding-top:%?20?%}.order .product-list .product[data-v-8ba98402]{width:100%;background-color:#fff;margin-bottom:%?20?%}.order .product-list .product .top[data-v-8ba98402]{padding:%?24?%;height:%?248?%}.order .product-list .product .top .image-content[data-v-8ba98402]{width:%?200?%;height:%?200?%;position:relative}.order .product-list .product .top .image-content>uni-image[data-v-8ba98402]{width:%?200?%;height:%?200?%;border-radius:%?8?%}.order .product-list .product .top .image-content .tip-angle[data-v-8ba98402]{position:absolute;top:0;left:0;background-color:#ff6868;color:#fff;font-size:%?26?%;border-top-left-radius:%?8?%;line-height:%?48?%;height:%?48?%;width:%?100?%;text-align:center}.order .product-list .product .top .text-content[data-v-8ba98402]{width:%?478?%;height:%?200?%}.order .product-list .product .top .text-content .text-top[data-v-8ba98402]{margin-top:%?8?%}.order .product-list .product .top .text-content .text-top .name[data-v-8ba98402]{font-size:%?28?%;color:#353535;word-break:break-all;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.order .product-list .product .top .text-content .text-top .attr[data-v-8ba98402]{font-size:%?24?%;color:#999;margin-top:%?20?%}.order .product-list .product .top .text-content .text-bottom[data-v-8ba98402]{margin-bottom:%?8?%}.order .product-list .product .top .text-content .text-bottom .original-price[data-v-8ba98402]{text-decoration:line-through;font-size:%?26?%;color:#999;margin-right:%?24?%}.order .product-list .product .top .text-content .text-bottom .current-price[data-v-8ba98402]{font-size:%?32?%}.order .product-list .product .bottom[data-v-8ba98402]{padding:0 %?24?%;height:%?100?%;border-top:%?1?% solid #e2e2e2}.order .product-list .product .bottom .but[data-v-8ba98402]{height:%?60?%;border-radius:%?30?%;border-style:solid;border-width:%?1?%;font-size:%?32?%;line-height:%?60?%;text-align:center;padding:0 %?32?%}.order .product-list .product .bottom .no[data-v-8ba98402]{color:#666;border-color:#cdcdcd;background-color:#fff;margin-right:%?16?%}.order .product-list .product .bottom .ok[data-v-8ba98402]{background-color:#fff5f5;color:#ff4544;border-color:#ff4544}.order .model[data-v-8ba98402]{position:fixed;top:0;left:0;z-index:1000;width:100%;height:100%;background-color:rgba(0,0,0,.3)}.order .model .model-content[data-v-8ba98402]{width:%?620?%;border-radius:%?15?%;background-color:#fff;text-align:center;padding-top:%?20?%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.order .model .model-content .model-header[data-v-8ba98402]{font-size:%?32?%;color:#353535;margin:%?64?% 0}.order .model .model-content .model-title-top[data-v-8ba98402]{font-size:%?32?%;text-align:center;margin:%?20?% 0 %?0?% 0;color:#353535}.order .model .model-content .model-bottom[data-v-8ba98402]{border-top:%?1?% solid #e2e2e2}.order .model .model-content .model-bottom .model-but[data-v-8ba98402]{width:%?309?%;height:%?88?%;line-height:%?88?%}.order .model .model-content .model-bottom .model-line[data-v-8ba98402]{width:%?2?%;height:%?32?%;background-color:#e2e2e2}.order .model .model-use[data-v-8ba98402]{background-color:#fff;width:%?600?%;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:%?8?%;margin:%?20?% 0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:1700}.order .model .model-use .image[data-v-8ba98402]{width:%?30?%;height:%?30?%;position:absolute;right:%?32?%;top:%?32?%;background-size:100% 100%;background-repeat:no-repeat;background-image:url("+a(i("e6f7"))+")}.order .model .model-use .model-title[data-v-8ba98402]{font-size:%?32?%;margin-top:%?56?%;margin-bottom:%?64?%;text-align:center}.order .model .model-use .model-image[data-v-8ba98402]{width:%?360?%;height:%?360?%;margin:0 %?120?% %?86?% %?120?%}body.?%PAGE?%[data-v-8ba98402]{background:#f7f7f7}",""])},8193:function(t,e,i){"use strict";i.r(e);var a=i("56e6"),o=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e["default"]=o.a},"977f":function(t,e,i){"use strict";var a=i("d06f"),o=i.n(a);o.a},d06f:function(t,e,i){var a=i("5e695");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("5760726a",a,!0,{sourceMap:!1,shadowMode:!1})},e6f7:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAV1BMVEUAAAD////f39/n5+fU1NTx8fHX19ft7e3////Y2Nje3t7w8PD////Nzc3////////s7Oz////x8fH////u7u7MzMzx8fH////MzMzR0dHa2tr9/f3j4+Pgp5ThAAAAGHRSTlMAXp2eoJWijEakfZA6909BfL+aVt7Ney9JKnM1AAAA1ElEQVQ4y62USw6DMAxESYFCoXz7c6D3P2erUNmVHt7hlUWeZqTMkOzICc0y3vyze1oaEcnDPlOISNpEPCpc5DuqpBR05LHtp0Sdwi4jz8yopEUvqYbMoUynrPULqXBWxqGUqfT+QMGLlOm0Vz0FpV49GKPWn9dAxKhIL1Lq5VH5hsTZdDjrBi0TTpAXcmTupKgTF4+yvLpyQtrwal/sBDuGtOHV1kibPUx3iN7Dy+9qoV6kHC86Wp+dro5/f/Dce81Ju3WelELvGLuxd16eGGN24HwAWGcfgGkUetEAAAAASUVORK5CYII="}}]);