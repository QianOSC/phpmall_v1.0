(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-integral_mall-index-index"],{3956:function(t,e,a){"use strict";a.r(e);var i=a("9823"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=o.a},"525b":function(t,e,a){"use strict";a.r(e);var i=a("ae76"),o=a("3956");for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);a("ea25");var s=a("2877"),r=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"51ea462e",null);e["default"]=r.exports},"8afe":function(t,e,a){var i=a("bc71");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("56c9eb63",i,!0,{sourceMap:!1,shadowMode:!1})},9823:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("2f62");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)}return a}function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(a,!0).forEach(function(e){s(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r={data:function(){return{success:!1,lose:!1,_num:0,more:!1,setting:{},coupon:[],userInfo:{integral:0},choose:{integral:0},banners:[],cats:[],id:0,exchangeCoupon:!1,current:"wechat",goods:[],args:!1,page:1}},computed:n({},(0,i.mapState)({integralImg:function(t){return t.mallConfig.plugin.integral_mall},appSetting:function(t){return t.mallConfig.mall.setting},appImg:function(t){return t.mallConfig.__wxapp_img.mall},platform:function(t){return t.gConfig.systemInfo.platform}}),{},(0,i.mapGetters)("mallConfig",{getVideo:"getVideo",getTheme:"getTheme"})),methods:{close:function(){this.success=!1,this.lose=!1},tab:function(t){this._num=t,this.page=1,this.goods=[],this.getGoods()},toList:function(){this.success=!1,uni.navigateTo({url:"/pages/coupon/index/index"})},toGoods:function(t){t.goodsWarehouse.video_url&&this.getVideo,uni.navigateTo({url:"/plugins/integral_mall/goods/goods?goods_id="+t.id})},toAbout:function(){uni.navigateTo({url:"/pages/rules/index?url=".concat(encodeURIComponent(this.$api.integral_mall.index),"&keys=").concat(JSON.stringify(["setting","rule"]))})},router:function(t){uni.navigateTo({url:t})},getList:function(){var t=this;t.$request({url:t.$api.integral_mall.index}).then(function(e){if(t.$hideLoading(),0===e.code){var a=e.data,i=a.banners,o=a.setting,n=a.userInfo;t.banners=i,t.setting=o,t.userInfo=n}else uni.showToast({title:e.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getCoupon:function(){var t=this;t.$request({url:t.$api.integral_mall.coupon}).then(function(e){t.$hideLoading(),0===e.code?t.coupon=e.data.list:uni.showToast({title:e.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getCat:function(){var t=this;t.$request({url:t.$api.integral_mall.cats}).then(function(e){t.$hideLoading(),0===e.code?t.cats=e.data.list:uni.showToast({title:e.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})},getGoods:function(){var t=this;t.$request({url:t.$api.integral_mall.goods,data:{cat_id:t._num,page:t.page}}).then(function(e){t.$hideLoading(),0===e.code?(t.more=!1,e.data.list.length==e.data.pagination.pageSize&&(t.page++,t.more=!0),t.page>1?t.goods=t.goods.concat(e.data.list):t.goods=e.data.list):uni.showToast({title:e.msg,icon:"none",duration:1e3})}).catch(function(){t.$hideLoading()})}},onReachBottom:function(){this.more&&this.getGoods()},onLoad:function(){var t=this;t._num=0,t.$showLoading({type:"global",text:"加载中..."}),t.getList(),t.getCoupon(),t.getCat(),t.getGoods()}};e.default=r},ae76:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-layout",{attrs:{overflow:!1}},[a("v-uni-view",{staticClass:"nav"},[a("v-uni-image",{staticClass:"nav-bg",attrs:{"load-lazy":"true",src:"./../image/index_BG.png"}}),a("v-uni-view",{staticClass:"nav-title"},[t._v("我的积分")]),a("v-uni-view",{staticClass:"nav-num"},[t._v(t._s(t.userInfo?t.userInfo.integral:0))]),a("v-uni-view",{staticClass:"about",on:{click:function(e){e=t.$handleEvent(e),t.toAbout(e)}}},[a("v-uni-image",{attrs:{"load-lazy":"true",src:"./../image/about.png"}})],1),a("v-uni-view",{staticClass:"exchange",on:{click:function(e){e=t.$handleEvent(e),t.router("/plugins/integral_mall/exchange/exchange")}}},[a("v-uni-image",{attrs:{"load-lazy":"true",src:"/static/image/icon/exchange.png"}}),a("v-uni-text",[t._v("我的兑换")])],1),a("v-uni-view",{staticClass:"log",on:{click:function(e){e=t.$handleEvent(e),t.router("/pages/user-center/integral-detail/integral-detail")}}},[a("v-uni-image",{attrs:{"load-lazy":"true",src:"./../image/log.png"}}),a("v-uni-text",[t._v("积分收支")])],1)],1),a("v-uni-view",{staticClass:"banner",attrs:{"indicator-dots":"true",autoplay:"true"}},[a("v-uni-swiper",{staticClass:"swiper",attrs:{"indicator-dots":"true",autoplay:"true"}},t._l(t.banners,function(t,e){return a("v-uni-swiper-item",{key:e},[a("app-jump-button",{attrs:{open_type:t.open_type,url:t.page_url,params:t.params}},[a("v-uni-image",{attrs:{mode:"aspectFill",src:t.pic_url}})],1)],1)}),1)],1),t.coupon.length>0?a("v-uni-view",{staticClass:"coupon"},[a("v-uni-view",{staticClass:"coupon-title"},[t._v("兑换优惠券")]),a("v-uni-scroll-view",{staticClass:"coupon-list",attrs:{"scroll-x":""}},t._l(t.coupon,function(e){return a("v-uni-view",{key:e.id,staticClass:"coupon-item",on:{click:function(a){a=t.$handleEvent(a),t.router("/plugins/integral_mall/coupon/coupon?id="+e.id)}}},[a("v-uni-image",{attrs:{"load-lazy":"true",src:"./../image/coupon-bg.png"}}),2==e.coupon.type?a("v-uni-view",{staticClass:"coupon-name t-omit"},[t._v("￥"),a("v-uni-text",[t._v(t._s(e.coupon.sub_price))]),t._v("优惠券")],1):a("v-uni-view",{staticClass:"coupon-name discount"},[a("v-uni-text",[t._v(t._s(e.coupon.discount))]),t._v("优惠券")],1),a("v-uni-view",{staticClass:"coupon-user t-omit"},[t._v(t._s(e.integral_num)+"积分"),e.price>0?a("span",[t._v("+"+t._s(e.price)+"元")]):t._e(),t._v("兑换")]),a("v-uni-view",{staticClass:"coupon-exchange"},[a("v-uni-view",[t._v("立即兑换")])],1)],1)}),1)],1):t._e(),a("v-uni-view",{staticClass:"goods"},[a("v-uni-view",{staticClass:"goods-title"},[a("v-uni-view",{staticClass:"coupon-title"},[t._v("优惠购专区")])],1),a("v-uni-scroll-view",{staticClass:"cat-list",attrs:{"scroll-x":""}},[a("v-uni-view",{class:["cat-item","t-omit",0==t._num?t.getTheme+"-m-back active "+t.getTheme:""],on:{click:function(e){e=t.$handleEvent(e),t.tab(0)}}},[t._v("全部")]),t._l(t.cats,function(e){return a("v-uni-view",{key:e.id,class:["cat-item","t-omit",t._num==e.id?t.getTheme+"-m-back active "+t.getTheme:""],on:{click:function(a){a=t.$handleEvent(a),t.tab(e.id)}}},[t._v(t._s(e.name))])})],2),a("v-uni-view",{staticClass:"goods-list dir-left-wrap"},t._l(t.goods,function(e){return a("v-uni-view",{key:e.id,staticClass:"goods-item",attrs:{"open-type":"navigate"},on:{click:function(a){a=t.$handleEvent(a),t.toGoods(e)}}},[a("v-uni-image",{staticClass:"goods-img",attrs:{"load-lazy":"true",mode:"aspectFill",src:e.cover_pic}}),0==e.goods_stock&&"1"==t.appSetting.is_show_stock?a("v-uni-view",{staticClass:"out-dialog"},[a("v-uni-image",{attrs:{src:"1"==t.appSetting.is_use_stock?t.appImg.plugins_out:t.appSetting.sell_out_pic}})],1):t._e(),a("v-uni-view",{staticClass:"goods-name t-omit"},[t._v(t._s(e.name))]),a("v-uni-view",{staticClass:"goods-price",class:t.getTheme+"-m-text "+t.getTheme},[t._v(t._s(e.integralMallGoods.integral_num)+"积分"),e.price>0?a("v-uni-text",[t._v("+￥"+t._s(e.price))]):t._e()],1),a("v-uni-view",{staticClass:"goods-old"},[t._v("￥"+t._s(e.original_price))]),a("v-uni-view",{staticClass:"goods-num"},[t._v("仅剩"+t._s(e.goods_stock)+"件")]),e.goods_stock>0?a("v-uni-button",{staticClass:"goods-exchange",class:t.getTheme+"-m-back "+t.getTheme},[t._v("立即兑换")]):a("v-uni-button",{staticClass:"goods-exchange",staticStyle:{background:"#CDCDCD",color:"#fff"}},[t._v("已售罄")])],1)}),1)],1),t.lose||t.success?a("v-uni-view",{staticClass:"dialog-bg"},[a("v-uni-view",{staticClass:"dialog"},[a("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.close(e)}}},[a("v-uni-image",{staticClass:"close",attrs:{"load-lazy":"true",src:"/static/image/icon/icon-close.png"}})],1),t.lose?a("v-uni-view",{staticClass:"lose"},[a("v-uni-image",{staticClass:"lose-img",attrs:{"load-lazy":"true",src:"./../image/lose.png"}}),a("v-uni-view",{staticClass:"lose-title"},[t._v("兑换失败！")]),a("v-uni-view",[t._v("当前积分不足")])],1):t._e(),t.success?a("v-uni-view",{staticClass:"success"},[a("v-uni-image",{staticClass:"success-head",attrs:{"load-lazy":"true",src:t.integralImg.app_image.success}}),a("v-uni-view",[t._v("恭喜您，兑换成功！")]),a("v-uni-view",{staticClass:"main-between success-btn"},[a("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.toList(e)}}},[a("v-uni-button",{staticClass:"to-card"},[t._v("去卡券包")])],1),a("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.toList(e)}}},[a("v-uni-button",{staticClass:"to-use"},[t._v("立即使用")])],1)],1)],1):t._e()],1)],1):t._e()],1)},o=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return o})},bc71:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'.text-center[data-v-51ea462e]{text-align:center}.font-weight[data-v-51ea462e]{font-weight:700}.page-width[data-v-51ea462e]{width:100%}.goods-hover-class[data-v-51ea462e]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-51ea462e]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-51ea462e]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-51ea462e]{width:100%}.u-hover-class[data-v-51ea462e]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-51ea462e]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.nav[data-v-51ea462e]{height:%?220?%;width:100%;position:relative}.nav-bg[data-v-51ea462e]{height:%?220?%;width:100%}.nav-title[data-v-51ea462e]{text-align:center;width:100%;position:absolute;top:%?25?%;color:#999;font-size:12px}.nav-num[data-v-51ea462e]{text-align:center;width:100%;position:absolute;top:%?60?%;color:#ecb786;font-size:24px}.exchange[data-v-51ea462e],.log[data-v-51ea462e]{position:absolute;bottom:%?40?%;color:#fff;font-size:15px;height:%?34?%;line-height:%?34?%}.exchange uni-image[data-v-51ea462e],.log uni-image[data-v-51ea462e]{height:%?34?%;width:%?34?%;margin-right:%?16?%;display:block;float:left}.exchange[data-v-51ea462e]{left:%?120?%}.log[data-v-51ea462e]{right:%?120?%}.about[data-v-51ea462e]{height:%?30?%;width:%?30?%;position:absolute;top:%?25?%;right:38%}.about uni-image[data-v-51ea462e]{height:%?30?%;width:%?30?%;display:block}.banner[data-v-51ea462e]{margin:%?20?% 0;height:%?190?%}.banner uni-swiper[data-v-51ea462e]{height:%?190?%}.banner uni-image[data-v-51ea462e]{height:%?190?%;width:100%}.coupon[data-v-51ea462e]{background-color:#fff;padding:%?30?% 0 %?40?% %?25?%}.coupon-title[data-v-51ea462e]{font-size:15px;color:#353535;border-left:%?4?% solid #ff6f28;padding-left:%?16?%;height:%?35?%;line-height:%?35?%;margin-bottom:%?38?%}.coupon-list[data-v-51ea462e]{height:%?220?%;white-space:nowrap;overflow:hidden;width:auto}.coupon-item[data-v-51ea462e]{width:%?330?%;height:%?220?%;position:relative;display:inline-block;font-size:13px;color:#353535;margin-right:%?20?%}.coupon-item uni-image[data-v-51ea462e]{width:%?330?%;height:%?220?%}.coupon-name[data-v-51ea462e]{position:absolute;left:%?24?%;top:%?10?%;width:%?300?%;font-weight:700}.coupon-name.discount uni-text[data-v-51ea462e]:after{content:"\\6298";font-size:50%}.coupon-name uni-text[data-v-51ea462e]{font-size:20px;margin-right:%?12?%}.coupon-user[data-v-51ea462e]{position:absolute;width:%?280?%;left:%?24?%;top:%?70?%}.coupon-exchange[data-v-51ea462e]{position:absolute;bottom:%?22?%;left:0;right:0;text-align:center}.coupon-exchange uni-view[data-v-51ea462e]{display:inline-block;padding:0 %?28?%;text-align:center;height:%?48?%;line-height:%?48?%;border-radius:%?24?%;border:%?2?% solid #353535;margin:0 auto}.goods-title[data-v-51ea462e]{padding-left:%?20?%;height:%?96?%;line-height:%?96?%;padding-top:%?30.5?%;background-color:#fff;margin-top:%?24?%;border-bottom:%?1?% solid #e2e2e2}.cat-list[data-v-51ea462e]{height:%?100?%;background-color:#fff;border-bottom:%?1?% solid #e2e2e2;white-space:nowrap;overflow:hidden;width:auto;position:-webkit-sticky;position:sticky;top:0;z-index:10}.cat-item[data-v-51ea462e]{display:inline-block;margin:%?23?%;text-align:center;width:auto;color:#353535;font-size:12px;height:%?54?%;line-height:%?54?%;padding:0 %?20?%}.cat-item.active[data-v-51ea462e]{border-radius:%?27?%;color:#fff}.goods-list[data-v-51ea462e]{padding-left:%?24?%}.goods-item[data-v-51ea462e]{width:%?344?%;background-color:#fff;font-size:14px;color:#353535;margin:%?14?% %?14?% 0 0;position:relative;display:block;border-radius:%?16?%}.goods-name[data-v-51ea462e]{margin-top:%?16?%;padding-left:%?24?%;font-size:%?26?%;height:%?30?%;line-height:%?30?%}.goods-img[data-v-51ea462e]{height:%?344?%;width:%?344?%;display:block;border-top-left-radius:%?16?%;border-top-right-radius:%?16?%}.out-dialog[data-v-51ea462e]{width:%?344?%;height:%?344?%;position:absolute;top:0;left:0;background-color:rgba(0,0,0,.5)}.out-dialog uni-image[data-v-51ea462e]{width:%?344?%;height:%?344?%}.goods-price[data-v-51ea462e]{margin-top:%?10?%;margin-left:%?24?%;padding-bottom:%?125?%}.goods-old[data-v-51ea462e]{font-size:13px;color:#999;text-decoration:line-through;position:absolute;left:%?24?%;bottom:%?88?%}.goods-num[data-v-51ea462e]{position:absolute;right:%?24?%;bottom:%?88?%;font-size:13px}.goods-exchange[data-v-51ea462e]{height:%?48?%;line-height:%?48?%;border-radius:%?24?%;position:absolute;bottom:%?24?%;left:%?24?%;right:%?24?%;color:#fff;font-size:13px}.goods-exchange[data-v-51ea462e]:after{border:0}.dialog-bg[data-v-51ea462e]{position:fixed;left:0;top:0;height:100%;width:100%;background-color:rgba(0,0,0,.3)}.dialog[data-v-51ea462e]{width:%?574?%;margin:0 auto;background-color:#fff;position:fixed;top:25%;left:0;right:0;border-radius:%?16?%}.close[data-v-51ea462e]{height:%?30?%;width:%?30?%;position:absolute;right:%?22?%;top:%?22?%;z-index:10}.lose[data-v-51ea462e]{padding:%?88?% 0 %?88?% %?90?%;height:%?310?%;font-size:15px;color:#353535}.lose-img[data-v-51ea462e]{height:%?134?%;width:%?124?%;margin-right:%?48?%;display:block;float:left}.lose-title[data-v-51ea462e]{font-size:23px;font-weight:500;margin:%?15?% 0}.success[data-v-51ea462e]{height:%?350?%;background-color:#fff;text-align:center;padding-top:%?150?%;font-size:18px;color:#353535;border-radius:%?16?%}.success-head[data-v-51ea462e]{height:%?332?%;width:%?574?%;position:absolute;top:%?-215?%;left:0}.to-card[data-v-51ea462e],.to-use[data-v-51ea462e]{margin-top:%?44?%;height:%?64?%;border-radius:%?32?%;line-height:%?64?%;width:%?228?%;font-size:16px}.to-card[data-v-51ea462e]:after,.to-use[data-v-51ea462e]:after{border:0}.to-card[data-v-51ea462e]{background-color:#fff;color:#353535;border:%?1?% solid #999}.to-use[data-v-51ea462e]{background-color:#ff4544;color:#fff}.dialog-tip[data-v-51ea462e]{position:fixed;top:%?400?%;left:0;right:0;padding-bottom:%?88?%;width:%?640?%;margin:0 auto;z-index:21;background-color:#fff;border-radius:10px;text-align:center;font-size:%?30?%}.dialog-msg[data-v-51ea462e]{margin:0 %?50?% %?50?%}.dialog-title[data-v-51ea462e]{margin:%?40?% auto %?35?%}.dialog-btn[data-v-51ea462e]{height:%?88?%;width:%?640?%;border-top:%?1?% solid #e2e2e2;line-height:%?88?%;position:absolute;bottom:0;left:0}.dialog-close[data-v-51ea462e],.dialog-submit[data-v-51ea462e]{width:50%}.line[data-v-51ea462e]{height:%?44?%;margin-top:%?22?%;width:%?1?%;background-color:#e2e2e2}.dialog-submit[data-v-51ea462e]{color:#ff4544}.success-btn[data-v-51ea462e]{padding:0 %?39?%}body.?%PAGE?%[data-v-51ea462e]{background:#f7f7f7}',""])},ea25:function(t,e,a){"use strict";var i=a("8afe"),o=a.n(i);o.a}}]);