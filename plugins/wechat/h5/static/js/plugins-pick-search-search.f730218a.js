(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-pick-search-search"],{"453e":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("a34a")),n=i("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return f(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function d(t,e,i,a,n,o,r){try{var s=t[o](r),c=s.value}catch(f){return void i(f)}s.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise(function(a,n){var o=t.apply(e,i);function r(t){d(o,a,n,r,s,"next",t)}function s(t){d(o,a,n,r,s,"throw",t)}r(void 0)})}}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(i,!0).forEach(function(e){g(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var v={name:"search",data:function(){return{list:[],keyword:"",activity:{},historyList:[],isSearch:!1,page:1}},onLoad:function(){this.historyList=this.getHistory()},computed:h({},(0,n.mapState)({appImg:function(t){return t.mallConfig.__wxapp_img.mall},appSetting:function(t){return t.mallConfig.mall.setting}}),{},(0,n.mapGetters)("mallConfig",{getTheme:"getTheme"})),onReachBottom:function(){this.page++,this.getList()},methods:{navigator:function(t){uni.navigateTo({url:t})},search:function(){var t=this.keyword;""!==t&&(this.keyword=t.trim(),this.reset())},reset:function(){this.page=1,this.getGoodsList()},getList:function(){var t=u(a.default.mark(function t(){var e,i,n;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$request({url:this.$api.pick.goods_list,method:"get",data:{keyword:this.keyword,page:this.page}});case 2:e=t.sent,0===e.code&&(n=e.data.list,(i=this.list).push.apply(i,r(n)));case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getGoodsList:function(){var t=u(a.default.mark(function t(){var e,i,n,o,r,s;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$request({url:this.$api.pick.goods_list,method:"get",data:{keyword:this.keyword,page:this.page}});case 2:e=t.sent,0===e.code&&(i=e.data,n=i.bg_url,o=i.list,r=i.form,s=i.activity,this.isSearch=!0,this.list=o,this.background=n,this.form=r,this.activity=s,this.setHistory());case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setHistory:function(){var t=this.getHistory(),e=this.keyword.trim();t.forEach(function(i,a){i.keyword===e&&t.splice(a,1)}),t.push({keyword:e}),t.length>20&&t.shift(),this.historyList=t,this.$storage.setStorageSync("SEARCH_HISTORY_LIST",t)},getHistory:function(){var t=this.$storage.getStorageSync("SEARCH_HISTORY_LIST");return t||(t=[]),t},deleteHistory:function(){this.$storage.removeStorageSync("SEARCH_HISTORY_LIST"),this.historyList=[]},cancel:function(){this.isSearch=!1,this.keyword="",this.list=[]},historyClick:function(t){this.keyword=t.trim(),this.reset()},deleteKeyword:function(){this.keyword=""}},watch:{keyword:{handler:function(t){""==t&&this.cancel()},immediate:!0}}};e.default=v},4797:function(t,e,i){var a=i("8406");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("4ecca224",a,!0,{sourceMap:!1,shadowMode:!1})},8406:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".text-center[data-v-67efebfe]{text-align:center}.font-weight[data-v-67efebfe]{font-weight:700}.page-width[data-v-67efebfe]{width:100%}.goods-hover-class[data-v-67efebfe]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-67efebfe]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-67efebfe]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-67efebfe]{width:100%}.u-hover-class[data-v-67efebfe]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-67efebfe]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.search[data-v-67efebfe]{position:absolute;width:100%;height:100%}.search-input[data-v-67efebfe]{width:%?750?%;height:%?105?%;background-color:#efeff4;position:fixed;top:var(--window-top)}.input[data-v-67efebfe]{height:%?64?%;width:%?620?%;background-color:#fff;border-radius:%?36?%;padding:0 %?36?%}.search-text[data-v-67efebfe]{font-size:%?32?%;margin-left:%?20?%}.list[data-v-67efebfe]{padding-bottom:%?96?%;margin-top:%?105?%}.item[data-v-67efebfe]{padding:%?24?%;border-bottom:%?1?% solid #eee;background-color:#fff;position:relative}.item .out-dialog[data-v-67efebfe]{width:%?220?%;height:%?220?%;border-radius:%?16?%;position:absolute;top:%?24?%;left:%?24?%;z-index:10;background-color:rgba(0,0,0,.5)}.item .out-dialog uni-image[data-v-67efebfe]{width:%?220?%;height:%?220?%;border-radius:%?16?%}.image[data-v-67efebfe]{width:%?220?%;height:%?220?%;border-radius:%?16?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.content[data-v-67efebfe]{width:%?478?%;margin-left:%?24?%;height:%?228?%}.name[data-v-67efebfe]{font-size:%?28?%;color:#353535}.generate[data-v-67efebfe]{position:fixed;bottom:0;height:%?96?%;width:%?750?%;background-color:#fff;border-top:%?1?% solid #e2e2e2}.generate-img[data-v-67efebfe]{width:%?34?%;height:%?34?%;margin-right:%?7.5?%}.generate-text[data-v-67efebfe]{margin-left:%?7.5?%;font-size:%?32?%;color:#ff4d4c}.information[data-v-67efebfe]{margin-bottom:%?12?%}.num[data-v-67efebfe]{margin-bottom:%?8?%}.sales[data-v-67efebfe]{font-size:%?24?%;color:#999;line-height:1}.value[data-v-67efebfe]{margin-bottom:%?18?%;line-height:1}.price[data-v-67efebfe]{font-size:%?32?%;line-height:1}.original_price[data-v-67efebfe]{text-decoration:line-through;font-size:%?24?%;line-height:1;color:#999;margin-left:%?10?%}.go-button[data-v-67efebfe]{height:%?56?%;line-height:%?56?%;width:%?130?%;font-size:%?28?%;border-radius:%?28?%;text-align:center;color:#fff}.history[data-v-67efebfe]{padding:%?36?% %?24?%;border-radius:%?16?% %?16?% 0 0;background-color:#fff;font-size:%?28?%;margin-top:%?105?%}.history .title[data-v-67efebfe]{padding-bottom:%?24?%;color:#666}.history .title uni-image[data-v-67efebfe]{width:%?28?%;height:%?34?%;display:block}.history .history-list .item[data-v-67efebfe]{height:%?64?%;background-color:#f7f7f7;padding:0 %?20?%;margin-right:%?20?%;margin-bottom:%?16?%;border-radius:%?32?%}.delete[data-v-67efebfe]{width:%?32?%;height:%?32?%;position:absolute;right:%?122?%;top:%?36?%;border-radius:50%;z-index:1500}.goods-list .no-result[data-v-67efebfe]{height:%?156?%;padding:%?28?% 0;font-size:%?28?%;background-color:#fff}.goods-list .no-result .empty[data-v-67efebfe]{width:%?100?%;height:%?100?%;display:block;margin-right:%?40?%}body.?%PAGE?%[data-v-67efebfe]{background:#f7f7f7}",""])},"97ac":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[i("v-uni-view",{staticClass:"search"},[i("v-uni-view",{staticClass:"search-input dir-left-nowrap cross-center main-center"},[i("v-uni-input",{staticClass:"input",attrs:{type:"text",focus:""},on:{confirm:function(e){e=t.$handleEvent(e),t.search(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),i("v-uni-text",{staticClass:"search-text",on:{click:function(e){e=t.$handleEvent(e),t.search(e)}}},[t._v("搜索")]),t.keyword.length>0?i("v-uni-image",{staticClass:"delete",attrs:{src:"/static/image/icon/delete-yuan.png"},on:{click:function(e){e=t.$handleEvent(e),t.deleteKeyword(e)}}}):t._e()],1),!t.isSearch&&t.historyList.length>0?i("v-uni-view",{staticClass:"history"},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center title"},[i("v-uni-view",{staticClass:"box-grow-1"},[t._v("历史搜索")]),i("v-uni-image",{staticClass:"box-grow-0",attrs:{src:"/static/image/icon/delete.png"},on:{click:function(e){e=t.$handleEvent(e),t.deleteHistory(e)}}})],1),i("v-uni-view",{staticClass:"dir-left-wrap history-list"},t._l(t.historyList,function(e,a){return i("v-uni-view",{key:a,staticClass:"box-grow-0 cross-center item",on:{click:function(i){i=t.$handleEvent(i),t.historyClick(e.keyword)}}},[t._v(t._s(e.keyword))])}),1)],1):t._e(),i("v-uni-view",{staticClass:"list"},[t._l(t.list,function(e){return i("v-uni-view",{key:e.id,staticClass:"item dir-left-nowrap",on:{click:function(i){i=t.$handleEvent(i),t.navigator("/plugins/pick/detail/detail?goods_id="+e.id)}}},[0==e.goods_stock?i("v-uni-view",{staticClass:"out-dialog"},[i("v-uni-image",{attrs:{src:"1"==t.appSetting.is_use_stock?t.appImg.plugins_out:t.appSetting.sell_out_pic}})],1):t._e(),i("v-uni-image",{staticClass:"image",attrs:{src:e.cover_pic}}),i("v-uni-view",{staticClass:"content dir-top-nowrap main-between"},[i("v-uni-text",{staticClass:"name t-omit-two"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"information dir-left-nowrap main-between cross-bottom"},[i("v-uni-view",{staticClass:"num"},[i("v-uni-view",{staticClass:"value"},[i("v-uni-text",{staticClass:"price",class:t.getTheme+"-m-text "+t.getTheme},[t._v("￥"+t._s(e.price))]),i("v-uni-text",{staticClass:"original_price"},[t._v("￥"+t._s(e.original_price))])],1),i("v-uni-text",{staticClass:"sales"},[t._v(t._s(e.sales))])],1),i("v-uni-view",[i("v-uni-view",{staticClass:"go-button",class:t.getTheme+"-m-back "+t.getTheme},[t._v("去凑单")])],1)],1)],1)],1)}),t.isSearch?i("v-uni-view",{staticClass:"goods-list"},[t.list.length<=0?[i("v-uni-view",{staticClass:"main-center no-result"},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center"},[i("v-uni-image",{staticClass:"box-grow-0 empty",attrs:{src:"/static/image/icon/empty.png"}}),i("v-uni-view",{staticClass:"box-grow-1"},[i("v-uni-view",[t._v("抱歉，没有相关商品")])],1)],1)],1)]:t._e()],2):t._e()],2)],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},c4f0:function(t,e,i){"use strict";i.r(e);var a=i("453e"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},c5a3:function(t,e,i){"use strict";i.r(e);var a=i("97ac"),n=i("c4f0");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("cc0f");var r=i("2877"),s=Object(r["a"])(n["default"],a["a"],a["b"],!1,null,"67efebfe",null);e["default"]=s.exports},cc0f:function(t,e,i){"use strict";var a=i("4797"),n=i.n(a);n.a}}]);